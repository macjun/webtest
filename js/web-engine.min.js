(()=>{var e={5415:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,o=l(e),s=o[0],a=o[1],u=new i((s+a)*3/4-a),c=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(function(e,t,n){for(var i,o=[],s=t;s<n;s+=3)o.push(r[(i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===i?o.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&o.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},5872:(e,t,r)=>{"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */let n=r(5415),i=r(551),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|p(e,t),n=s(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(U(e,Uint8Array)){let t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(U(e,ArrayBuffer)||e&&U(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(U(e,SharedArrayBuffer)||e&&U(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return a.from(n,t,r);let i=function(e){if(a.isBuffer(e)){let t=0|d(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length){var t;return"number"!=typeof e.length||(t=e.length)!=t?s(0):f(e)}if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|d(e))}function f(e){let t=e.length<0?0:0|d(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),n}function d(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||U(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return D(e).length;default:if(i)return n?-1:B(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=N[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return b(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var o,s;return o=t,s=r,0===o&&s===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){var o;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(o=r=+r)!=o&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,a/=2,l/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===l)return n*s}else -1!==n&&(o-=o-n),n=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){let r=!0;for(let n=0;n<l;n++)if(u(e,o+n)!==u(t,n)){r=!1;break}if(r)return o}return -1}function b(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,l;switch(s){case 1:t<128&&(o=t);break;case 2:(192&(r=e[i+1]))==128&&(l=(31&t)<<6|63&r)>127&&(o=l);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(o=l);break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],(192&r)==128&&(192&n)==128&&(192&a)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a)>65535&&l<1114112&&(o=l)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function w(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function _(e,t,r,n,i,o){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function S(e,t,r,n,i){A(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function E(e,t,r,n,i){A(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function T(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function I(e,t,r,n,o){return t=+t,r>>>=0,o||T(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,o){return t=+t,r>>>=0,o||T(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||console.error,Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(u(e),e<=0)?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(U(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),U(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(U(t,Uint8Array))i+t.length>n.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(a.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},a.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},a.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},a.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):g.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,i){if(U(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let o=i-n,s=r-t,l=Math.min(o,s),u=this.slice(n,i),c=e.slice(t,r);for(let e=0;e<l;++e)if(u[e]!==c[e]){o=u[e],s=c[e];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){var i,o,s,a,l,u,c,f;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let d=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;let s=t.length;for(n>s/2&&(n=s/2),i=0;i<n;++i){let n=parseInt(t.substr(2*i,2),16);if(n!=n)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,o=r,L(B(e,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return s=t,a=r,L(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,s,a);case"base64":return l=t,u=r,L(D(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,f=r,L(function(e,t){let r,n;let i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(e,this.length-c),this,c,f);default:if(d)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=j(function(e){M(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&O(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),a.prototype.readBigUInt64BE=j(function(e){M(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&O(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],i=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=j(function(e){M(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&O(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),a.prototype.readBigInt64BE=j(function(e){M(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&O(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;_(this,e,t,r,n,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;_(this,e,t,r,n,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=j(function(e,t=0){return S(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=j(function(e,t=0){return E(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);_(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);_(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=j(function(e,t=0){return S(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=j(function(e,t=0){return E(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},a.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let o=a.isBuffer(e)?e:a.from(e,n),s=o.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};let R={};function x(e,t,r){R[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function P(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function A(e,t,r,n,i,o){if(e>r||e<t){let n;let i="bigint"==typeof t?"n":"";throw n=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new R.ERR_OUT_OF_RANGE("value",n,e)}M(i,"offset"),(void 0===n[i]||void 0===n[i+o])&&O(i,n.length-(o+1))}function M(e,t){if("number"!=typeof e)throw new R.ERR_INVALID_ARG_TYPE(t,"number",e)}function O(e,t,r){if(Math.floor(e)!==e)throw M(e,r),new R.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new R.ERR_BUFFER_OUT_OF_BOUNDS;throw new R.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}x("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),x("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),x("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=P(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=P(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let C=/[^+/0-9A-Za-z-_]/g;function B(e,t){let r;t=t||1/0;let n=e.length,i=null,o=[];for(let s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319||s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function D(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function U(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let N=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function j(e){return"undefined"==typeof BigInt?F:e}function F(){throw Error("BigInt not supported")}},5343:function(e,t,r){var n,i,o;o=function(e){function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function r(){var e=[],t=[];return function(){if(0==arguments.length)return t.join("")+u.apply(String,e);1024<e.length+arguments.length&&(t.push(u.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}function n(e,t,r,n,i){var o,s=(1<<(o=8*i-n-1))-1,a=s>>1,l=-7;i=r?i-1:0;var u=r?-1:1,c=e[t+i];for(i+=u,r=c&(1<<-l)-1,c>>=-l,l+=o;0<l;r=256*r+e[t+i],i+=u,l-=8);for(o=r&(1<<-l)-1,r>>=-l,l+=n;0<l;o=256*o+e[t+i],i+=u,l-=8);if(0===r)r=1-a;else{if(r===s)return o?NaN:1/0*(c?-1:1);o+=Math.pow(2,n),r-=a}return(c?-1:1)*o*Math.pow(2,r-n)}function i(e,t,r,n,i,o){var s,a=8*o-i-1,l=(1<<a)-1,u=l>>1,c=23===i?5960464477539062e-23:0;o=n?0:o-1;var f=n?1:-1,h=0>t||0===t&&0>1/t?1:0;for(isNaN(t=Math.abs(t))||1/0===t?(t=isNaN(t)?1:0,n=l):(n=Math.floor(Math.log(t)/Math.LN2),1>t*(s=Math.pow(2,-n))&&(n--,s*=2),2<=(t=1<=n+u?t+c/s:t+c*Math.pow(2,1-u))*s&&(n++,s/=2),n+u>=l?(t=0,n=l):1<=n+u?(t=(t*s-1)*Math.pow(2,i),n+=u):(t=t*Math.pow(2,u-1)*Math.pow(2,i),n=0));8<=i;e[r+o]=255&t,o+=f,t/=256,i-=8);for(n=n<<i|t,a+=i;0<a;e[r+o]=255&n,o+=f,n/=256,a-=8);e[r+o-f]|=128*h}var o,s=function(e,t,r){if(void 0===e&&(e=s.DEFAULT_CAPACITY),void 0===t&&(t=s.DEFAULT_ENDIAN),void 0===r&&(r=s.DEFAULT_NOASSERT),!r){if(0>(e|=0))throw RangeError("Illegal capacity");t=!!t,r=!!r}this.buffer=0===e?l:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=t,this.noAssert=r};s.VERSION="5.0.1",s.LITTLE_ENDIAN=!0,s.BIG_ENDIAN=!1,s.DEFAULT_CAPACITY=16,s.DEFAULT_ENDIAN=s.BIG_ENDIAN,s.DEFAULT_NOASSERT=!1,s.Long=e||null;var a=s.prototype;Object.defineProperty(a,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var l=new ArrayBuffer(0),u=String.fromCharCode;s.accessor=function(){return Uint8Array},s.allocate=function(e,t,r){return new s(e,t,r)},s.concat=function(e,t,r,n){("boolean"==typeof t||"string"!=typeof t)&&(n=r,r=t,t=void 0);for(var i,o=0,a=0,l=e.length;a<l;++a)s.isByteBuffer(e[a])||(e[a]=s.wrap(e[a],t)),0<(i=e[a].limit-e[a].offset)&&(o+=i);if(0===o)return new s(0,r,n);for(a=0,t=new s(o,r,n);a<l;)0>=(i=(r=e[a++]).limit-r.offset)||(t.view.set(r.view.subarray(r.offset,r.limit),t.offset),t.offset+=i);return t.limit=t.offset,t.offset=0,t},s.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},s.type=function(){return ArrayBuffer},s.wrap=function(e,t,r,n){if("string"!=typeof t&&(n=r,r=t,t=void 0),"string"==typeof e)switch(void 0===t&&(t="utf8"),t){case"base64":return s.fromBase64(e,r);case"hex":return s.fromHex(e,r);case"binary":return s.fromBinary(e,r);case"utf8":return s.fromUTF8(e,r);case"debug":return s.fromDebug(e,r);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");if(s.isByteBuffer(e))return(t=a.clone.call(e)).markedOffset=-1,t;if(e instanceof Uint8Array)t=new s(0,r,n),0<e.length&&(t.buffer=e.buffer,t.offset=e.byteOffset,t.limit=e.byteOffset+e.byteLength,t.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)t=new s(0,r,n),0<e.byteLength&&(t.buffer=e,t.offset=0,t.limit=e.byteLength,t.view=0<e.byteLength?new Uint8Array(e):null);else if("[object Array]"===Object.prototype.toString.call(e))for((t=new s(e.length,r,n)).limit=e.length,r=0;r<e.length;++r)t.view[r]=e[r];else throw TypeError("Illegal buffer");return t},a.writeBitSet=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n,i=t,o=e.length,s=o>>3,a=0;for(t+=this.writeVarint32(o,t);s--;)n=1&!!e[a++]|(1&!!e[a++])<<1|(1&!!e[a++])<<2|(1&!!e[a++])<<3|(1&!!e[a++])<<4|(1&!!e[a++])<<5|(1&!!e[a++])<<6|(1&!!e[a++])<<7,this.writeByte(n,t++);if(a<o){for(n=s=0;a<o;)n|=(1&!!e[a++])<<s++;this.writeByte(n,t++)}return r?(this.offset=t,this):t-i},a.readBitSet=function(e){var t=void 0===e;t&&(e=this.offset);var r=this.readVarint32(e),n=r.value,i=n>>3,o=0,s=[];for(e+=r.length;i--;)r=this.readByte(e++),s[o++]=!!(1&r),s[o++]=!!(2&r),s[o++]=!!(4&r),s[o++]=!!(8&r),s[o++]=!!(16&r),s[o++]=!!(32&r),s[o++]=!!(64&r),s[o++]=!!(128&r);if(o<n)for(i=0,r=this.readByte(e++);o<n;)s[o++]=!!(r>>i++&1);return t&&(this.offset=e),s},a.readBytes=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}var n=this.slice(t,t+e);return r&&(this.offset+=e),n},a.writeBytes=a.append,a.writeInt8=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),this.view[t-1]=e,r&&(this.offset+=1),this},a.writeByte=a.writeInt8,a.readInt8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}return 128==(128&(e=this.view[e]))&&(e=-(255-e+1)),t&&(this.offset+=1),e},a.readByte=a.readInt8,a.writeUint8=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),this.view[t-1]=e,r&&(this.offset+=1),this},a.writeUInt8=a.writeUint8,a.readUint8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}return e=this.view[e],t&&(this.offset+=1),e},a.readUInt8=a.readUint8,a.writeInt16=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),r&&(this.offset+=2),this},a.writeShort=a.writeInt16,a.readInt16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=0;return 32768==(32768&(r=this.littleEndian?this.view[e]|this.view[e+1]<<8:this.view[e]<<8|this.view[e+1]))&&(r=-(65535-r+1)),t&&(this.offset+=2),r},a.readShort=a.readInt16,a.writeUint16=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),r&&(this.offset+=2),this},a.writeUInt16=a.writeUint16,a.readUint16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=0;return r=this.littleEndian?this.view[e]|this.view[e+1]<<8:this.view[e]<<8|this.view[e+1],t&&(this.offset+=2),r},a.readUInt16=a.readUint16,a.writeInt32=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),r&&(this.offset+=4),this},a.writeInt=a.writeInt32,a.readInt32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=0;return r=this.littleEndian?(this.view[e+2]<<16|this.view[e+1]<<8|this.view[e])+(this.view[e+3]<<24>>>0):(this.view[e+1]<<16|this.view[e+2]<<8|this.view[e+3])+(this.view[e]<<24>>>0),t&&(this.offset+=4),0|r},a.readInt=a.readInt32,a.writeUint32=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),r&&(this.offset+=4),this},a.writeUInt32=a.writeUint32,a.readUint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=0;return r=this.littleEndian?(this.view[e+2]<<16|this.view[e+1]<<8|this.view[e])+(this.view[e+3]<<24>>>0):(this.view[e+1]<<16|this.view[e+2]<<8|this.view[e+3])+(this.view[e]<<24>>>0),t&&(this.offset+=4),r},a.readUInt32=a.readUint32,e&&(a.writeInt64=function(t,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||0!=r%1)throw TypeError("Illegal offset: "+r+" (not an integer)");if(0>(r>>>=0)||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),r+=8;var i=this.buffer.byteLength;r>i&&this.resize((i*=2)>r?i:r),r-=8;var i=t.low,o=t.high;return this.littleEndian?(this.view[r+3]=i>>>24&255,this.view[r+2]=i>>>16&255,this.view[r+1]=i>>>8&255,this.view[r]=255&i,r+=4,this.view[r+3]=o>>>24&255,this.view[r+2]=o>>>16&255,this.view[r+1]=o>>>8&255,this.view[r]=255&o):(this.view[r]=o>>>24&255,this.view[r+1]=o>>>16&255,this.view[r+2]=o>>>8&255,this.view[r+3]=255&o,r+=4,this.view[r]=i>>>24&255,this.view[r+1]=i>>>16&255,this.view[r+2]=i>>>8&255,this.view[r+3]=255&i),n&&(this.offset+=8),this},a.writeLong=a.writeInt64,a.readInt64=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var n=0,i=0;return this.littleEndian?(n=(this.view[t+2]<<16|this.view[t+1]<<8|this.view[t])+(this.view[t+3]<<24>>>0),t+=4,i=(this.view[t+2]<<16|this.view[t+1]<<8|this.view[t])+(this.view[t+3]<<24>>>0)):(i=(this.view[t+1]<<16|this.view[t+2]<<8|this.view[t+3])+(this.view[t]<<24>>>0),t+=4,n=(this.view[t+1]<<16|this.view[t+2]<<8|this.view[t+3])+(this.view[t]<<24>>>0)),t=new e(n,i,!1),r&&(this.offset+=8),t},a.readLong=a.readInt64,a.writeUint64=function(t,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||0!=r%1)throw TypeError("Illegal offset: "+r+" (not an integer)");if(0>(r>>>=0)||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),r+=8;var i=this.buffer.byteLength;r>i&&this.resize((i*=2)>r?i:r),r-=8;var i=t.low,o=t.high;return this.littleEndian?(this.view[r+3]=i>>>24&255,this.view[r+2]=i>>>16&255,this.view[r+1]=i>>>8&255,this.view[r]=255&i,r+=4,this.view[r+3]=o>>>24&255,this.view[r+2]=o>>>16&255,this.view[r+1]=o>>>8&255,this.view[r]=255&o):(this.view[r]=o>>>24&255,this.view[r+1]=o>>>16&255,this.view[r+2]=o>>>8&255,this.view[r+3]=255&o,r+=4,this.view[r]=i>>>24&255,this.view[r+1]=i>>>16&255,this.view[r+2]=i>>>8&255,this.view[r+3]=255&i),n&&(this.offset+=8),this},a.writeUInt64=a.writeUint64,a.readUint64=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var n=0,i=0;return this.littleEndian?(n=(this.view[t+2]<<16|this.view[t+1]<<8|this.view[t])+(this.view[t+3]<<24>>>0),t+=4,i=(this.view[t+2]<<16|this.view[t+1]<<8|this.view[t])+(this.view[t+3]<<24>>>0)):(i=(this.view[t+1]<<16|this.view[t+2]<<8|this.view[t+3])+(this.view[t]<<24>>>0),t+=4,n=(this.view[t+1]<<16|this.view[t+2]<<8|this.view[t+3])+(this.view[t]<<24>>>0)),t=new e(n,i,!0),r&&(this.offset+=8),t},a.readUInt64=a.readUint64),a.writeFloat32=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),i(this.view,e,t-4,this.littleEndian,23,4),r&&(this.offset+=4),this},a.writeFloat=a.writeFloat32,a.readFloat32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}return e=n(this.view,e,this.littleEndian,23,4),t&&(this.offset+=4),e},a.readFloat=a.readFloat32,a.writeFloat64=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),i(this.view,e,t-8,this.littleEndian,52,8),r&&(this.offset+=8),this},a.writeDouble=a.writeFloat64,a.readFloat64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}return e=n(this.view,e,this.littleEndian,52,8),t&&(this.offset+=8),e},a.readDouble=a.readFloat64,s.MAX_VARINT32_BYTES=5,s.calculateVarint32=function(e){return 128>(e>>>=0)?1:16384>e?2:2097152>e?3:268435456>e?4:5},s.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},s.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},a.writeVarint32=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n,i=s.calculateVarint32(e);for((t+=i)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=i,e>>>=0;128<=e;)n=127&e|128,this.view[t++]=n,e>>>=7;return this.view[t++]=e,r?(this.offset=t,this):i},a.writeVarint32ZigZag=function(e,t){return this.writeVarint32(s.zigZagEncode32(e),t)},a.readVarint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,n=0,i=0;do{if(!this.noAssert&&e>this.limit)throw(e=Error("Truncated")).truncated=!0,e;r=this.view[e++],5>n&&(i|=(127&r)<<7*n),++n}while(0!=(128&r))return i|=0,t?(this.offset=e,i):{value:i,length:n}},a.readVarint32ZigZag=function(e){return"object"==typeof(e=this.readVarint32(e))?e.value=s.zigZagDecode32(e.value):e=s.zigZagDecode32(e),e},e&&(s.MAX_VARINT64_BYTES=10,s.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var r=t.toInt()>>>0,n=t.shiftRightUnsigned(28).toInt()>>>0;return 0==(t=t.shiftRightUnsigned(56).toInt()>>>0)?0==n?16384>r?128>r?1:2:2097152>r?3:4:16384>n?128>n?5:6:2097152>n?7:8:128>t?9:10},s.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},s.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},a.writeVarint64=function(t,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||0!=r%1)throw TypeError("Illegal offset: "+r+" (not an integer)");if(0>(r>>>=0)||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned());var i=s.calculateVarint64(t),o=t.toInt()>>>0,a=t.shiftRightUnsigned(28).toInt()>>>0,l=t.shiftRightUnsigned(56).toInt()>>>0;r+=i;var u=this.buffer.byteLength;switch(r>u&&this.resize((u*=2)>r?u:r),r-=i,i){case 10:this.view[r+9]=l>>>7&1;case 9:this.view[r+8]=9!==i?128|l:127&l;case 8:this.view[r+7]=8!==i?a>>>21|128:a>>>21&127;case 7:this.view[r+6]=7!==i?a>>>14|128:a>>>14&127;case 6:this.view[r+5]=6!==i?a>>>7|128:a>>>7&127;case 5:this.view[r+4]=5!==i?128|a:127&a;case 4:this.view[r+3]=4!==i?o>>>21|128:o>>>21&127;case 3:this.view[r+2]=3!==i?o>>>14|128:o>>>14&127;case 2:this.view[r+1]=2!==i?o>>>7|128:o>>>7&127;case 1:this.view[r]=1!==i?128|o:127&o}return n?(this.offset+=i,this):i},a.writeVarint64ZigZag=function(e,t){return this.writeVarint64(s.zigZagEncode64(e),t)},a.readVarint64=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(0>(t>>>=0)||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=t,i=0,o=0,s=0,a=this.view[t++],i=127&a;if(128&a&&(i|=(127&(a=this.view[t++]))<<7,128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<14,128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<21,128&a||this.noAssert&&void 0===a)&&(o=127&(a=this.view[t++]),128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[t++]))<<7,128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[t++]))<<14,128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[t++]))<<21,128&a||this.noAssert&&void 0===a)&&(s=127&(a=this.view[t++]),128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[t++]))<<7,128&a||this.noAssert&&void 0===a))throw Error("Buffer overrun");return i=e.fromBits(i|o<<28,o>>>4|s<<24,!1),r?(this.offset=t,i):{value:i,length:t-n}},a.readVarint64ZigZag=function(t){return(t=this.readVarint64(t))&&t.value instanceof e?t.value=s.zigZagDecode64(t.value):t=s.zigZagDecode64(t),t}),a.writeCString=function(e,r){var n=void 0===r;n&&(r=this.offset);var i,o=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(i=0;i<o;++i)if(0===e.charCodeAt(i))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof r||0!=r%1)throw TypeError("Illegal offset: "+r+" (not an integer)");if(0>(r>>>=0)||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}return o=f.calculateUTF16asUTF8(t(e))[1],r+=o+1,i=this.buffer.byteLength,r>i&&this.resize((i*=2)>r?i:r),r-=o+1,f.encodeUTF16toUTF8(t(e),(function(e){this.view[r++]=e}).bind(this)),this.view[r++]=0,n?(this.offset=r,this):o},a.readCString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,i=e,o=-1;return f.decodeUTF8toUTF16((function(){if(0===o)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(o=this.view[e++])?null:o}).bind(this),n=r(),!0),t?(this.offset=e,n()):{string:n(),length:e-i}},a.writeIString=function(e,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||0!=r%1)throw TypeError("Illegal offset: "+r+" (not an integer)");if(0>(r>>>=0)||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var i,o=r;i=f.calculateUTF16asUTF8(t(e),this.noAssert)[1],r+=4+i;var s=this.buffer.byteLength;if(r>s&&this.resize((s*=2)>r?s:r),r-=4+i,this.littleEndian?(this.view[r+3]=i>>>24&255,this.view[r+2]=i>>>16&255,this.view[r+1]=i>>>8&255,this.view[r]=255&i):(this.view[r]=i>>>24&255,this.view[r+1]=i>>>16&255,this.view[r+2]=i>>>8&255,this.view[r+3]=255&i),r+=4,f.encodeUTF16toUTF8(t(e),(function(e){this.view[r++]=e}).bind(this)),r!==o+4+i)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+4+i));return n?(this.offset=r,this):r-o},a.readIString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=e,n=this.readUint32(e),n=this.readUTF8String(n,s.METRICS_BYTES,e+=4);return e+=n.length,t?(this.offset=e,n.string):{string:n.string,length:e-r}},s.METRICS_CHARS="c",s.METRICS_BYTES="b",a.writeUTF8String=function(e,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"!=typeof r||0!=r%1)throw TypeError("Illegal offset: "+r+" (not an integer)");if(0>(r>>>=0)||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var i,o=r;i=f.calculateUTF16asUTF8(t(e))[1],r+=i;var s=this.buffer.byteLength;return r>s&&this.resize((s*=2)>r?s:r),r-=i,f.encodeUTF16toUTF8(t(e),(function(e){this.view[r++]=e}).bind(this)),n?(this.offset=r,this):r-o},a.writeString=a.writeUTF8String,s.calculateUTF8Chars=function(e){return f.calculateUTF16asUTF8(t(e))[0]},s.calculateUTF8Bytes=function(e){return f.calculateUTF16asUTF8(t(e))[1]},s.calculateString=s.calculateUTF8Bytes,a.readUTF8String=function(e,t,n){"number"==typeof t&&(n=t,t=void 0);var i=void 0===n;if(i&&(n=this.offset),void 0===t&&(t=s.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof n||0!=n%1)throw TypeError("Illegal offset: "+n+" (not an integer)");if(0>(n>>>=0)||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var o,a=0,l=n;if(t===s.METRICS_CHARS){if(o=r(),f.decodeUTF8((function(){return a<e&&n<this.limit?this.view[n++]:null}).bind(this),function(e){++a,f.UTF8toUTF16(e,o)}),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return i?(this.offset=n,o()):{string:o(),length:n-l}}if(t===s.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof n||0!=n%1)throw TypeError("Illegal offset: "+n+" (not an integer)");if(0>(n>>>=0)||n+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+e+") <= "+this.buffer.byteLength)}var u=n+e;if(f.decodeUTF8toUTF16((function(){return n<u?this.view[n++]:null}).bind(this),o=r(),this.noAssert),n!==u)throw RangeError("Illegal range: Truncated data, "+n+" == "+u);return i?(this.offset=n,o()):{string:o(),length:n-l}}throw TypeError("Unsupported metrics: "+t)},a.readString=a.readUTF8String,a.writeVString=function(e,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||0!=r%1)throw TypeError("Illegal offset: "+r+" (not an integer)");if(0>(r>>>=0)||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var i,o,a=r;i=f.calculateUTF16asUTF8(t(e),this.noAssert)[1],o=s.calculateVarint32(i),r+=o+i;var l=this.buffer.byteLength;if(r>l&&this.resize((l*=2)>r?l:r),r-=o+i,r+=this.writeVarint32(i,r),f.encodeUTF16toUTF8(t(e),(function(e){this.view[r++]=e}).bind(this)),r!==a+i+o)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+i+o));return n?(this.offset=r,this):r-a},a.readVString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=e,n=this.readVarint32(e),n=this.readUTF8String(n.value,s.METRICS_BYTES,e+=n.length);return e+=n.length,t?(this.offset=e,n.string):{string:n.string,length:e-r}},a.append=function(e,t,r){("number"==typeof t||"string"!=typeof t)&&(r=t,t=void 0);var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"!=typeof r||0!=r%1)throw TypeError("Illegal offset: "+r+" (not an integer)");if(0>(r>>>=0)||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}if(e instanceof s||(e=s.wrap(e,t)),0>=(t=e.limit-e.offset))return this;r+=t;var i=this.buffer.byteLength;return r>i&&this.resize((i*=2)>r?i:r),r-=t,this.view.set(e.view.subarray(e.offset,e.limit),r),e.offset+=t,n&&(this.offset+=t),this},a.appendTo=function(e,t){return e.append(this,t),this},a.assert=function(e){return this.noAssert=!e,this},a.capacity=function(){return this.buffer.byteLength},a.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},a.clone=function(e){var t=new s(0,this.littleEndian,this.noAssert);return e?(t.buffer=new ArrayBuffer(this.buffer.byteLength),t.view=new Uint8Array(t.buffer)):(t.buffer=this.buffer,t.view=this.view),t.offset=this.offset,t.markedOffset=this.markedOffset,t.limit=this.limit,t},a.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var r=t-e;if(0===r)return this.buffer=l,this.view=null,0<=this.markedOffset&&(this.markedOffset-=e),this.limit=this.offset=0,this;var n=new ArrayBuffer(r),i=new Uint8Array(n);return i.set(this.view.subarray(e,t)),this.buffer=n,this.view=i,0<=this.markedOffset&&(this.markedOffset-=e),this.offset=0,this.limit=r,this},a.copy=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return new s(0,this.littleEndian,this.noAssert);var r=t-e,n=new s(r,this.littleEndian,this.noAssert);return n.offset=0,n.limit=r,0<=n.markedOffset&&(n.markedOffset-=e),this.copyTo(n,0,e,t),n},a.copyTo=function(e,t,r,n){if(!this.noAssert&&!s.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(o=void 0===t)?e.offset:0|t,r=(i=void 0===r)?this.offset:0|r,n=void 0===n?this.limit:0|n,0>t||t>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.byteLength);if(0>r||n>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var i,o,a=n-r;return 0===a?e:(e.ensureCapacity(t+a),e.view.set(this.view.subarray(r,n),t),i&&(this.offset+=a),o&&(e.offset+=a),this)},a.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},a.fill=function(e,t,r){var n=void 0===t;if(n&&(t=this.offset),"string"==typeof e&&0<e.length&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===r&&(r=this.limit),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof r||0!=r%1)throw TypeError("Illegal end: Not an integer");if(r>>>=0,0>t||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(t>=r)return this;for(;t<r;)this.view[t++]=e;return n&&(this.offset=t),this},a.flip=function(){return this.limit=this.offset,this.offset=0,this},a.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(0>(e>>>=0)||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},a.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},a.LE=function(e){return this.littleEndian=void 0===e||!!e,this},a.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},a.prepend=function(e,t,r){("number"==typeof t||"string"!=typeof t)&&(r=t,t=void 0);var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"!=typeof r||0!=r%1)throw TypeError("Illegal offset: "+r+" (not an integer)");if(0>(r>>>=0)||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}if(e instanceof s||(e=s.wrap(e,t)),0>=(t=e.limit-e.offset))return this;var i=t-r;if(0<i){var o=new ArrayBuffer(this.buffer.byteLength+i),a=new Uint8Array(o);a.set(this.view.subarray(r,this.buffer.byteLength),t),this.buffer=o,this.view=a,this.offset+=i,0<=this.markedOffset&&(this.markedOffset+=i),this.limit+=i,r+=i}else new Uint8Array(this.buffer);return this.view.set(e.view.subarray(e.offset,e.limit),r-t),e.offset=e.limit,n&&(this.offset-=t),this},a.prependTo=function(e,t){return e.prepend(this,t),this},a.printDebug=function(e){"function"!=typeof e&&(e=void 0),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},a.remaining=function(){return this.limit-this.offset},a.reset=function(){return 0<=this.markedOffset?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},a.resize=function(e){if(!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal capacity: "+e+" (not an integer)");if(0>(e|=0))throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new Uint8Array(e=new ArrayBuffer(e));t.set(this.view),this.buffer=e,this.view=t}return this},a.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t||Array.prototype.reverse.call(this.view.subarray(e,t)),this},a.skip=function(e){if(!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(0>t||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},a.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r=this.clone();return r.offset=e,r.limit=t,r},a.toBuffer=function(e){var t=this.offset,r=this.limit;if(!this.noAssert){if("number"!=typeof t||0!=t%1)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof r||0!=r%1)throw TypeError("Illegal limit: Not an integer");if(r>>>=0,0>t||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}return e||0!==t||r!==this.buffer.byteLength?t===r?l:(new Uint8Array(e=new ArrayBuffer(r-t)).set(new Uint8Array(this.buffer).subarray(t,r),0),e):this.buffer},a.toArrayBuffer=a.toBuffer,a.toString=function(e,t,r){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(r=t=e="utf8"),e){case"utf8":return this.toUTF8(t,r);case"base64":return this.toBase64(t,r);case"hex":return this.toHex(t,r);case"binary":return this.toBinary(t,r);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var c=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[],n=0,i=t.length;n<i;++n)r[t[n]]=n;return e.encode=function(e,r){for(var n,i;null!==(n=e());)r(t[n>>2&63]),i=(3&n)<<4,null!==(n=e())?(r(t[((i|=n>>4&15)|n>>4&15)&63]),i=(15&n)<<2,null!==(n=e())?(r(t[(i|n>>6&3)&63]),r(t[63&n])):(r(t[63&i]),r(61))):(r(t[63&i]),r(61),r(61))},e.decode=function(e,t){function n(e){throw Error("Illegal character code: "+e)}for(var i,o,s;null!==(i=e());)if(void 0===(o=r[i])&&n(i),null!==(i=e())&&(void 0===(s=r[i])&&n(i),t(o<<2>>>0|(48&s)>>4),null!==(i=e()))){if(void 0===(o=r[i])){if(61===i)break;n(i)}if(t((15&s)<<4>>>0|(60&o)>>2),null!==(i=e())){if(void 0===(s=r[i])){if(61===i)break;n(i)}t((3&o)<<6>>>0|s)}}},e.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},e}();a.toBase64=function(e,t){var n;if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),e|=0,t|=0,0>e||t>this.capacity||e>t)throw RangeError("begin, end");return c.encode((function(){return e<t?this.view[e++]:null}).bind(this),n=r()),n()},s.fromBase64=function(e,r){if("string"!=typeof e)throw TypeError("str");var n=new s(e.length/4*3,r),i=0;return c.decode(t(e),function(e){n.view[i++]=e}),n.limit=i,n},s.btoa=function(e){return s.fromBinary(e).toBase64()},s.atob=function(e){return s.fromBase64(e).toBinary()},a.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,0>(e|=0)||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var r=[],n=[];e<t;)r.push(this.view[e++]),1024<=r.length&&(n.push(String.fromCharCode.apply(String,r)),r=[]);return n.join("")+String.fromCharCode.apply(String,r)},s.fromBinary=function(e,t){if("string"!=typeof e)throw TypeError("str");for(var r,n=0,i=e.length,o=new s(i,t);n<i;){if(255<(r=e.charCodeAt(n)))throw RangeError("illegal char code: "+r);o.view[n++]=r}return o.limit=i,o},a.toDebug=function(e){for(var t,r=-1,n=this.buffer.byteLength,i="",o="",s="";r<n;){if(-1!==r&&(i=16>(t=this.view[r])?i+"0"+t.toString(16).toUpperCase():i+t.toString(16).toUpperCase(),e&&(o+=32<t&&127>t?String.fromCharCode(t):".")),++r,e&&0<r&&0==r%16&&r!==n){for(;51>i.length;)i+=" ";s+=i+o+"\n",i=o=""}i=r===this.offset&&r===this.limit?i+(r===this.markedOffset?"!":"|"):r===this.offset?i+(r===this.markedOffset?"[":"<"):r===this.limit?i+(r===this.markedOffset?"]":">"):i+(r===this.markedOffset?"'":e||0!==r&&r!==n?" ":"")}if(e&&" "!==i){for(;51>i.length;)i+=" ";s+=i+o+"\n"}return e?s:i},s.fromDebug=function(e,t,r){var n=e.length;t=new s((n+1)/3|0,t,r);for(var i,o=0,a=0,l=!1,u=!1,c=!1,f=!1,h=!1;o<n;){switch(i=e.charAt(o++)){case"!":if(!r){if(u||c||f){h=!0;break}u=c=f=!0}t.offset=t.markedOffset=t.limit=a,l=!1;break;case"|":if(!r){if(u||f){h=!0;break}u=f=!0}t.offset=t.limit=a,l=!1;break;case"[":if(!r){if(u||c){h=!0;break}u=c=!0}t.offset=t.markedOffset=a,l=!1;break;case"<":if(!r){if(u){h=!0;break}u=!0}t.offset=a,l=!1;break;case"]":if(!r){if(f||c){h=!0;break}f=c=!0}t.limit=t.markedOffset=a,l=!1;break;case">":if(!r){if(f){h=!0;break}f=!0}t.limit=a,l=!1;break;case"'":if(!r){if(c){h=!0;break}c=!0}t.markedOffset=a,l=!1;break;case" ":l=!1;break;default:if(!r&&l){h=!0;break}if(i=parseInt(i+e.charAt(o++),16),!r&&(isNaN(i)||0>i||255<i))throw TypeError("Illegal str: Not a debug encoded string");t.view[a++]=i,l=!0}if(h)throw TypeError("Illegal str: Invalid symbol at "+o)}if(!r){if(!u||!f)throw TypeError("Illegal str: Missing offset or limit");if(a<t.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+a+" < "+n)}return t},a.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var r,n=Array(t-e);e<t;)16>(r=this.view[e++])?n.push("0",r.toString(16)):n.push(r.toString(16));return n.join("")},s.fromHex=function(e,t,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(0!=e.length%2)throw TypeError("Illegal str: Length not a multiple of 2")}var n=e.length;t=new s(n/2|0,t);for(var i,o=0,a=0;o<n;o+=2){if(i=parseInt(e.substring(o,o+2),16),!r&&(!isFinite(i)||0>i||255<i))throw TypeError("Illegal str: Contains non-hex characters");t.view[a++]=i}return t.limit=a,t};var f=o={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)128>r?t(127&r):(2048>r?t(r>>6&31|192):(65536>r?t(r>>12&15|224):(t(r>>18&7|240),t(r>>12&63|128)),t(r>>6&63|128)),t(63&r|128)),r=null},decodeUTF8:function(e,t){for(var r,n,i,o,s=function(e){var t=Error((e=e.slice(0,e.indexOf(null))).toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(r=e());)if(0==(128&r))t(r);else if(192==(224&r))null===(n=e())&&s([r,n]),t((31&r)<<6|63&n);else if(224==(240&r))null!==(n=e())&&null!==(i=e())||s([r,n,i]),t((15&r)<<12|(63&n)<<6|63&i);else if(240==(248&r))null!==(n=e())&&null!==(i=e())&&null!==(o=e())||s([r,n,i,o]),t((7&r)<<18|(63&n)<<12|(63&i)<<6|63&o);else throw RangeError("Illegal starting byte: "+r)},UTF16toUTF8:function(e,t){for(var r,n=null;null!==(r=null!==n?n:e());)55296<=r&&57343>=r&&null!==(n=e())&&56320<=n&&57343>=n?(t(1024*(r-55296)+n-56320+65536),n=null):t(r);null!==n&&t(n)},UTF8toUTF16:function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)65535>=r?t(r):(t(((r-=65536)>>10)+55296),t(r%1024+56320)),r=null},encodeUTF16toUTF8:function(e,t){o.UTF16toUTF8(e,function(e){o.encodeUTF8(e,t)})},decodeUTF8toUTF16:function(e,t){o.decodeUTF8(e,function(e){o.UTF8toUTF16(e,t)})},calculateCodePoint:function(e){return 128>e?1:2048>e?2:65536>e?3:4},calculateUTF8:function(e){for(var t,r=0;null!==(t=e());)r+=128>t?1:2048>t?2:65536>t?3:4;return r},calculateUTF16asUTF8:function(e){var t=0,r=0;return o.UTF16toUTF8(e,function(e){++t,r+=128>e?1:2048>e?2:65536>e?3:4}),[t,r]}};return a.toUTF8=function(e,t){var n;if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||0!=e%1)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||0!=t%1)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}try{f.decodeUTF8toUTF16((function(){return e<t?this.view[e++]:null}).bind(this),n=r())}catch(r){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return n()},s.fromUTF8=function(e,r,n){if(!n&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var i=new s(f.calculateUTF16asUTF8(t(e),!0)[1],r,n),o=0;return f.encodeUTF16toUTF8(t(e),function(e){i.view[o++]=e}),i.limit=o,i},s},n=[r(921)],void 0!==(i=o.apply(t,n))&&(e.exports=i)},4806:(e,t,r)=>{"use strict";var n=r(8794),i=r(5953),o=r(1657),s=r(8208);e.exports=s||n.call(o,i)},5953:e=>{"use strict";e.exports=Function.prototype.apply},1657:e=>{"use strict";e.exports=Function.prototype.call},9753:(e,t,r)=>{"use strict";var n=r(8794),i=r(9837),o=r(1657),s=r(4806);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new i("a function is required");return s(n,o,e)}},8208:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},8350:(e,t,r)=>{"use strict";var n=r(2103),i=r(9753),o=i([n("%String.prototype.indexOf%")]);e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i([r]):r}},5200:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{default:()=>tC});let i=("undefined"!=typeof globalThis?globalThis:void 0)?.crypto||("undefined"!=typeof global?global:void 0)?.crypto||("undefined"!=typeof window?window:void 0)?.crypto||("undefined"!=typeof self?self:void 0)?.crypto||("undefined"!=typeof frames?frames:void 0)?.[0]?.crypto;n=i?e=>{let t=[];for(let r=0;r<e;r+=4)t.push(i.getRandomValues(new Uint32Array(1))[0]);return new s(t,e)}:e=>{let t=[],r=e=>{let t=e,r=987654321;return()=>{let e=((r=36969*(65535&r)+(r>>16)&4294967295)<<16)+(t=18e3*(65535&t)+(t>>16)&4294967295)&4294967295;return e/=4294967296,(e+=.5)*(Math.random()>.5?1:-1)}};for(let n=0,i;n<e;n+=4){let e=r(4294967296*(i||Math.random()));i=987654071*e(),t.push(4294967296*e()|0)}return new s(t,e)};class o{static create(...e){return new this(...e)}mixIn(e){return Object.assign(this,e)}clone(){let e=new this.constructor;return Object.assign(e,this),e}}class s extends o{constructor(e=[],t=4*e.length){super();let r=e;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),(r instanceof Int8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array)&&(r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),r instanceof Uint8Array){let e=r.byteLength,t=[];for(let n=0;n<e;n+=1)t[n>>>2]|=r[n]<<24-n%4*8;this.words=t,this.sigBytes=e}else this.words=e,this.sigBytes=t}static random=n;toString(e=a){return e.stringify(this)}concat(e){let t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(let e=0;e<i;e+=1){let i=r[e>>>2]>>>24-e%4*8&255;t[n+e>>>2]|=i<<24-(n+e)%4*8}else for(let e=0;e<i;e+=4)t[n+e>>>2]=r[e>>>2];return this.sigBytes+=i,this}clamp(){let{words:e,sigBytes:t}=this;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}clone(){let e=super.clone.call(this);return e.words=this.words.slice(0),e}}let a={stringify(e){let{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){let r=t[e>>>2]>>>24-e%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse(e){let t=e.length,r=[];for(let n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s(r,t/2)}},l={stringify(e){let{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){let r=t[e>>>2]>>>24-e%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse(e){let t=e.length,r=[];for(let n=0;n<t;n+=1)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s(r,t)}},u={stringify(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:e=>l.parse(unescape(encodeURIComponent(e)))};class c extends o{constructor(){super(),this._minBufferSize=0}reset(){this._data=new s,this._nDataBytes=0}_append(e){let t=e;"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(e){let t;let{_data:r,blockSize:n}=this,i=r.words,o=r.sigBytes,a=o/(4*n),l=(a=e?Math.ceil(a):Math.max((0|a)-this._minBufferSize,0))*n,u=Math.min(4*l,o);if(l){for(let e=0;e<l;e+=n)this._doProcessBlock(i,e);t=i.splice(0,l),r.sigBytes-=u}return new s(t,u)}clone(){let e=super.clone.call(this);return e._data=this._data.clone(),e}}class f extends c{constructor(e){super(),this.blockSize=16,this.cfg=Object.assign(new o,e),this.reset()}static _createHelper(e){return(t,r)=>new e(r).finalize(t)}static _createHmacHelper(e){return(t,r)=>new h(e,r).finalize(t)}reset(){super.reset.call(this),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){return e&&this._append(e),this._doFinalize()}}class h extends o{constructor(e,t){super();let r=new e;this._hasher=r;let n=t;"string"==typeof n&&(n=u.parse(n));let i=r.blockSize,o=4*i;n.sigBytes>o&&(n=r.finalize(t)),n.clamp();let s=n.clone();this._oKey=s;let a=n.clone();this._iKey=a;let l=s.words,c=a.words;for(let e=0;e<i;e+=1)l[e]^=1549556828,c[e]^=909522486;s.sigBytes=o,a.sigBytes=o,this.reset()}reset(){let e=this._hasher;e.reset(),e.update(this._iKey)}update(e){return this._hasher.update(e),this}finalize(e){let t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}}class d extends o{constructor(e,t){super(),this.high=e,this.low=t}}class p extends o{constructor(e=[],t=8*e.length){super(),this.words=e,this.sigBytes=t}toX32(){let e=this.words,t=e.length,r=[];for(let n=0;n<t;n+=1){let t=e[n];r.push(t.high),r.push(t.low)}return s.create(r,this.sigBytes)}clone(){let e=super.clone.call(this);e.words=this.words.slice(0);let{words:t}=e,r=t.length;for(let e=0;e<r;e+=1)t[e]=t[e].clone();return e}}let g=(e,t,r)=>{let n=[],i=0;for(let o=0;o<t;o+=1)if(o%4){let t=r[e.charCodeAt(o-1)]<<o%4*2|r[e.charCodeAt(o)]>>>6-o%4*2;n[i>>>2]|=t<<24-i%4*8,i+=1}return s.create(n,i)},y={stringify(e){let{words:t,sigBytes:r}=e,n=this._map;e.clamp();let i=[];for(let e=0;e<r;e+=3){let o=(t[e>>>2]>>>24-e%4*8&255)<<16|(t[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|t[e+2>>>2]>>>24-(e+2)%4*8&255;for(let t=0;t<4&&e+.75*t<r;t+=1)i.push(n.charAt(o>>>6*(3-t)&63))}let o=n.charAt(64);if(o)for(;i.length%4;)i.push(o);return i.join("")},parse(e){let t=e.length,r=this._map,n=this._reverseMap;if(!n){this._reverseMap=[],n=this._reverseMap;for(let e=0;e<r.length;e+=1)n[r.charCodeAt(e)]=e}let i=r.charAt(64);if(i){let r=e.indexOf(i);-1!==r&&(t=r)}return g(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},m=[];for(let e=0;e<64;e+=1)m[e]=4294967296*Math.abs(Math.sin(e+1))|0;let v=(e,t,r,n,i,o,s)=>{let a=e+(t&r|~t&n)+i+s;return(a<<o|a>>>32-o)+t},b=(e,t,r,n,i,o,s)=>{let a=e+(t&n|r&~n)+i+s;return(a<<o|a>>>32-o)+t},w=(e,t,r,n,i,o,s)=>{let a=e+(t^r^n)+i+s;return(a<<o|a>>>32-o)+t},_=(e,t,r,n,i,o,s)=>{let a=e+(r^(t|~n))+i+s;return(a<<o|a>>>32-o)+t};class S extends f{_doReset(){this._hash=new s([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(e,t){for(let r=0;r<16;r+=1){let n=t+r,i=e[n];e[n]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}let r=this._hash.words,n=e[t+0],i=e[t+1],o=e[t+2],s=e[t+3],a=e[t+4],l=e[t+5],u=e[t+6],c=e[t+7],f=e[t+8],h=e[t+9],d=e[t+10],p=e[t+11],g=e[t+12],y=e[t+13],S=e[t+14],E=e[t+15],T=r[0],I=r[1],k=r[2],R=r[3];T=v(T,I,k,R,n,7,m[0]),R=v(R,T,I,k,i,12,m[1]),k=v(k,R,T,I,o,17,m[2]),I=v(I,k,R,T,s,22,m[3]),T=v(T,I,k,R,a,7,m[4]),R=v(R,T,I,k,l,12,m[5]),k=v(k,R,T,I,u,17,m[6]),I=v(I,k,R,T,c,22,m[7]),T=v(T,I,k,R,f,7,m[8]),R=v(R,T,I,k,h,12,m[9]),k=v(k,R,T,I,d,17,m[10]),I=v(I,k,R,T,p,22,m[11]),T=v(T,I,k,R,g,7,m[12]),R=v(R,T,I,k,y,12,m[13]),k=v(k,R,T,I,S,17,m[14]),I=v(I,k,R,T,E,22,m[15]),T=b(T,I,k,R,i,5,m[16]),R=b(R,T,I,k,u,9,m[17]),k=b(k,R,T,I,p,14,m[18]),I=b(I,k,R,T,n,20,m[19]),T=b(T,I,k,R,l,5,m[20]),R=b(R,T,I,k,d,9,m[21]),k=b(k,R,T,I,E,14,m[22]),I=b(I,k,R,T,a,20,m[23]),T=b(T,I,k,R,h,5,m[24]),R=b(R,T,I,k,S,9,m[25]),k=b(k,R,T,I,s,14,m[26]),I=b(I,k,R,T,f,20,m[27]),T=b(T,I,k,R,y,5,m[28]),R=b(R,T,I,k,o,9,m[29]),k=b(k,R,T,I,c,14,m[30]),I=b(I,k,R,T,g,20,m[31]),T=w(T,I,k,R,l,4,m[32]),R=w(R,T,I,k,f,11,m[33]),k=w(k,R,T,I,p,16,m[34]),I=w(I,k,R,T,S,23,m[35]),T=w(T,I,k,R,i,4,m[36]),R=w(R,T,I,k,a,11,m[37]),k=w(k,R,T,I,c,16,m[38]),I=w(I,k,R,T,d,23,m[39]),T=w(T,I,k,R,y,4,m[40]),R=w(R,T,I,k,n,11,m[41]),k=w(k,R,T,I,s,16,m[42]),I=w(I,k,R,T,u,23,m[43]),T=w(T,I,k,R,h,4,m[44]),R=w(R,T,I,k,g,11,m[45]),k=w(k,R,T,I,E,16,m[46]),I=w(I,k,R,T,o,23,m[47]),T=_(T,I,k,R,n,6,m[48]),R=_(R,T,I,k,c,10,m[49]),k=_(k,R,T,I,S,15,m[50]),I=_(I,k,R,T,l,21,m[51]),T=_(T,I,k,R,g,6,m[52]),R=_(R,T,I,k,s,10,m[53]),k=_(k,R,T,I,d,15,m[54]),I=_(I,k,R,T,i,21,m[55]),T=_(T,I,k,R,f,6,m[56]),R=_(R,T,I,k,E,10,m[57]),k=_(k,R,T,I,u,15,m[58]),I=_(I,k,R,T,y,21,m[59]),T=_(T,I,k,R,a,6,m[60]),R=_(R,T,I,k,p,10,m[61]),k=_(k,R,T,I,o,15,m[62]),I=_(I,k,R,T,h,21,m[63]),r[0]=r[0]+T|0,r[1]=r[1]+I|0,r[2]=r[2]+k|0,r[3]=r[3]+R|0}_doFinalize(){let e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;let i=Math.floor(r/4294967296);t[(n+64>>>9<<4)+15]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,t[(n+64>>>9<<4)+14]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,e.sigBytes=(t.length+1)*4,this._process();let o=this._hash,s=o.words;for(let e=0;e<4;e+=1){let t=s[e];s[e]=(t<<8|t>>>24)&16711935|(t<<24|t>>>8)&4278255360}return o}clone(){let e=super.clone.call(this);return e._hash=this._hash.clone(),e}}let E=f._createHelper(S),T=f._createHmacHelper(S);class I extends o{constructor(e){super(),this.cfg=Object.assign(new o,{keySize:4,hasher:S,iterations:1},e)}compute(e,t){let r;let{cfg:n}=this,i=n.hasher.create(),o=s.create(),a=o.words,{keySize:l,iterations:u}=n;for(;a.length<l;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(let e=1;e<u;e+=1)r=i.finalize(r),i.reset();o.concat(r)}return o.sigBytes=4*l,o}}class k extends c{constructor(e,t,r){super(),this.cfg=Object.assign(new o,r),this._xformMode=e,this._key=t,this.reset()}static createEncryptor(e,t){return this.create(this._ENC_XFORM_MODE,e,t)}static createDecryptor(e,t){return this.create(this._DEC_XFORM_MODE,e,t)}static _createHelper(e){let t=e=>"string"==typeof e?U:D;return{encrypt:(r,n,i)=>t(n).encrypt(e,r,n,i),decrypt:(r,n,i)=>t(n).decrypt(e,r,n,i)}}reset(){super.reset.call(this),this._doReset()}process(e){return this._append(e),this._process()}finalize(e){return e&&this._append(e),this._doFinalize()}}k._ENC_XFORM_MODE=1,k._DEC_XFORM_MODE=2,k.keySize=4,k.ivSize=4;class R extends k{constructor(...e){super(...e),this.blockSize=1}_doFinalize(){return this._process(!0)}}class x extends o{constructor(e,t){super(),this._cipher=e,this._iv=t}static createEncryptor(e,t){return this.Encryptor.create(e,t)}static createDecryptor(e,t){return this.Decryptor.create(e,t)}}function P(e,t,r){let n;let i=this._iv;i?(n=i,this._iv=void 0):n=this._prevBlock;for(let i=0;i<r;i+=1)e[t+i]^=n[i]}class A extends x{}A.Encryptor=class extends A{processBlock(e,t){let r=this._cipher,{blockSize:n}=r;P.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}},A.Decryptor=class extends A{processBlock(e,t){let r=this._cipher,{blockSize:n}=r,i=e.slice(t,t+n);r.decryptBlock(e,t),P.call(this,e,t,n),this._prevBlock=i}};let M={pad(e,t){let r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,o=[];for(let e=0;e<n;e+=4)o.push(i);let a=s.create(o,n);e.concat(a)},unpad(e){let t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};class O extends k{constructor(e,t,r){super(e,t,Object.assign({mode:A,padding:M},r)),this.blockSize=4}reset(){let e;super.reset.call(this);let{cfg:t}=this,{iv:r,mode:n}=t;this._xformMode===this.constructor._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode=e.call(n,this,r&&r.words),this._mode.__creator=e}_doProcessBlock(e,t){this._mode.processBlock(e,t)}_doFinalize(){let e;let{padding:t}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e}}class C extends o{constructor(e){super(),this.mixIn(e)}toString(e){return(e||this.formatter).stringify(this)}}let B={stringify(e){let{ciphertext:t,salt:r}=e;return(r?s.create([1398893684,1701076831]).concat(r).concat(t):t).toString(y)},parse(e){let t;let r=y.parse(e),n=r.words;return 1398893684===n[0]&&1701076831===n[1]&&(t=s.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),C.create({ciphertext:r,salt:t})}};class D extends o{static encrypt(e,t,r,n){let i=Object.assign(new o,this.cfg,n),s=e.createEncryptor(r,i),a=s.finalize(t),l=s.cfg;return C.create({ciphertext:a,key:r,iv:l.iv,algorithm:e,mode:l.mode,padding:l.padding,blockSize:s.blockSize,formatter:i.format})}static decrypt(e,t,r,n){let i=t,s=Object.assign(new o,this.cfg,n);return i=this._parse(i,s.format),e.createDecryptor(r,s).finalize(i.ciphertext)}static _parse(e,t){return"string"==typeof e?t.parse(e,this):e}}D.cfg=Object.assign(new o,{format:B});let L={execute(e,t,r,n,i){let o,a=n;a||(a=s.random(8)),o=i?I.create({keySize:t+r,hasher:i}).compute(e,a):I.create({keySize:t+r}).compute(e,a);let l=s.create(o.words.slice(t),4*r);return o.sigBytes=4*t,C.create({key:o,iv:l,salt:a})}};class U extends D{static encrypt(e,t,r,n){let i=Object.assign(new o,this.cfg,n),s=i.kdf.execute(r,e.keySize,e.ivSize,i.salt,i.hasher);i.iv=s.iv;let a=D.encrypt.call(this,e,t,s.key,i);return a.mixIn(s),a}static decrypt(e,t,r,n){let i=t,s=Object.assign(new o,this.cfg,n);i=this._parse(i,s.format);let a=s.kdf.execute(r,e.keySize,e.ivSize,i.salt,s.hasher);return s.iv=a.iv,D.decrypt.call(this,e,i,a.key,s)}}U.cfg=Object.assign(D.cfg,{kdf:L});let N=e=>e<<8&4278255360|e>>>8&16711935,j={stringify(e){let{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=2){let r=t[e>>>2]>>>16-e%4*8&65535;n.push(String.fromCharCode(r))}return n.join("")},parse(e){let t=e.length,r=[];for(let n=0;n<t;n+=1)r[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return s.create(r,2*t)}},F=[];class z extends f{_doReset(){this._hash=new s([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){let r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4];for(let r=0;r<80;r+=1){if(r<16)F[r]=0|e[t+r];else{let e=F[r-3]^F[r-8]^F[r-14]^F[r-16];F[r]=e<<1|e>>>31}let l=(n<<5|n>>>27)+a+F[r];r<20?l+=(i&o|~i&s)+1518500249:r<40?l+=(i^o^s)+1859775393:r<60?l+=(i&o|i&s|o&s)-1894007588:l+=(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0}_doFinalize(){let e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),t[(n+64>>>9<<4)+15]=r,e.sigBytes=4*t.length,this._process(),this._hash}clone(){let e=super.clone.call(this);return e._hash=this._hash.clone(),e}}let q=f._createHelper(z),W=f._createHmacHelper(z),H=[],V=[],$=e=>{let t=Math.sqrt(e);for(let r=2;r<=t;r+=1)if(!(e%r))return!1;return!0},Y=e=>(e-(0|e))*4294967296|0,X=2,K=0;for(;K<64;)$(X)&&(K<8&&(H[K]=Y(X**.5)),V[K]=Y(X**(1/3)),K+=1),X+=1;let Q=[];class G extends f{_doReset(){this._hash=new s(H.slice(0))}_doProcessBlock(e,t){let r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],l=r[5],u=r[6],c=r[7];for(let r=0;r<64;r+=1){if(r<16)Q[r]=0|e[t+r];else{let e=Q[r-15],t=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,n=Q[r-2],i=(n<<15|n>>>17)^(n<<13|n>>>19)^n>>>10;Q[r]=t+Q[r-7]+i+Q[r-16]}let f=a&l^~a&u,h=n&i^n&o^i&o,d=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),p=c+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+f+V[r]+Q[r],g=d+h;c=u,u=l,l=a,a=s+p|0,s=o,o=i,i=n,n=p+g|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+l|0,r[6]=r[6]+u|0,r[7]=r[7]+c|0}_doFinalize(){let e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),t[(n+64>>>9<<4)+15]=r,e.sigBytes=4*t.length,this._process(),this._hash}clone(){let e=super.clone.call(this);return e._hash=this._hash.clone(),e}}let Z=f._createHelper(G),J=f._createHmacHelper(G);class ee extends G{_doReset(){this._hash=new s([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])}_doFinalize(){let e=super._doFinalize.call(this);return e.sigBytes-=4,e}}let et=G._createHelper(ee),er=G._createHmacHelper(ee),en=[new d(1116352408,3609767458),new d(1899447441,602891725),new d(3049323471,3964484399),new d(3921009573,2173295548),new d(961987163,4081628472),new d(1508970993,3053834265),new d(2453635748,2937671579),new d(2870763221,3664609560),new d(3624381080,2734883394),new d(310598401,1164996542),new d(607225278,1323610764),new d(1426881987,3590304994),new d(1925078388,4068182383),new d(2162078206,991336113),new d(2614888103,633803317),new d(3248222580,3479774868),new d(3835390401,2666613458),new d(4022224774,944711139),new d(264347078,2341262773),new d(604807628,2007800933),new d(770255983,1495990901),new d(1249150122,1856431235),new d(1555081692,3175218132),new d(1996064986,2198950837),new d(2554220882,3999719339),new d(2821834349,766784016),new d(2952996808,2566594879),new d(3210313671,3203337956),new d(3336571891,1034457026),new d(3584528711,2466948901),new d(113926993,3758326383),new d(338241895,168717936),new d(666307205,1188179964),new d(773529912,1546045734),new d(1294757372,1522805485),new d(1396182291,2643833823),new d(1695183700,2343527390),new d(1986661051,1014477480),new d(2177026350,1206759142),new d(2456956037,344077627),new d(2730485921,1290863460),new d(2820302411,3158454273),new d(3259730800,3505952657),new d(3345764771,106217008),new d(3516065817,3606008344),new d(3600352804,1432725776),new d(4094571909,1467031594),new d(275423344,851169720),new d(430227734,3100823752),new d(506948616,1363258195),new d(659060556,3750685593),new d(883997877,3785050280),new d(958139571,3318307427),new d(1322822218,3812723403),new d(1537002063,2003034995),new d(1747873779,3602036899),new d(1955562222,1575990012),new d(2024104815,1125592928),new d(2227730452,2716904306),new d(2361852424,442776044),new d(2428436474,593698344),new d(2756734187,3733110249),new d(3204031479,2999351573),new d(3329325298,3815920427),new d(3391569614,3928383900),new d(3515267271,566280711),new d(3940187606,3454069534),new d(4118630271,4000239992),new d(116418474,1914138554),new d(174292421,2731055270),new d(289380356,3203993006),new d(460393269,320620315),new d(685471733,587496836),new d(852142971,1086792851),new d(1017036298,365543100),new d(1126000580,2618297676),new d(1288033470,3409855158),new d(1501505948,4234509866),new d(1607167915,987167468),new d(1816402316,1246189591)],ei=[];for(let e=0;e<80;e+=1)ei[e]=new d;class eo extends f{constructor(){super(),this.blockSize=32}_doReset(){this._hash=new p([new d(1779033703,4089235720),new d(3144134277,2227873595),new d(1013904242,4271175723),new d(2773480762,1595750129),new d(1359893119,2917565137),new d(2600822924,725511199),new d(528734635,4215389547),new d(1541459225,327033209)])}_doProcessBlock(e,t){let r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],l=r[5],u=r[6],c=r[7],f=n.high,h=n.low,d=i.high,p=i.low,g=o.high,y=o.low,m=s.high,v=s.low,b=a.high,w=a.low,_=l.high,S=l.low,E=u.high,T=u.low,I=c.high,k=c.low,R=f,x=h,P=d,A=p,M=g,O=y,C=m,B=v,D=b,L=w,U=_,N=S,j=E,F=T,z=I,q=k;for(let r=0;r<80;r+=1){let n,i;let o=ei[r];if(r<16)o.high=0|e[t+2*r],i=o.high,o.low=0|e[t+2*r+1],n=o.low;else{let e=ei[r-15],t=e.high,s=e.low,a=(t>>>1|s<<31)^(t>>>8|s<<24)^t>>>7,l=(s>>>1|t<<31)^(s>>>8|t<<24)^(s>>>7|t<<25),u=ei[r-2],c=u.high,f=u.low,h=(c>>>19|f<<13)^(c<<3|f>>>29)^c>>>6,d=(f>>>19|c<<13)^(f<<3|c>>>29)^(f>>>6|c<<26),p=ei[r-7],g=p.high,y=p.low,m=ei[r-16],v=m.high,b=m.low;i=a+g+((n=l+y)>>>0<l>>>0?1:0),n+=d,i=i+h+(n>>>0<d>>>0?1:0),n+=b,i=i+v+(n>>>0<b>>>0?1:0),o.high=i,o.low=n}let s=D&U^~D&j,a=L&N^~L&F,l=R&P^R&M^P&M,u=x&A^x&O^A&O,c=(R>>>28|x<<4)^(R<<30|x>>>2)^(R<<25|x>>>7),f=(x>>>28|R<<4)^(x<<30|R>>>2)^(x<<25|R>>>7),h=(D>>>14|L<<18)^(D>>>18|L<<14)^(D<<23|L>>>9),d=(L>>>14|D<<18)^(L>>>18|D<<14)^(L<<23|D>>>9),p=en[r],g=p.high,y=p.low,m=q+d,v=z+h+(m>>>0<q>>>0?1:0);m+=a,v=v+s+(m>>>0<a>>>0?1:0),m+=y,v=v+g+(m>>>0<y>>>0?1:0),m+=n,v=v+i+(m>>>0<n>>>0?1:0);let b=f+u,w=c+l+(b>>>0<f>>>0?1:0);z=j,q=F,j=U,F=N,U=D,N=L,D=C+v+((L=B+m|0)>>>0<B>>>0?1:0)|0,C=M,B=O,M=P,O=A,P=R,A=x,R=v+w+((x=m+b|0)>>>0<m>>>0?1:0)|0}n.low=h+x,h=n.low,n.high=f+R+(h>>>0<x>>>0?1:0),i.low=p+A,p=i.low,i.high=d+P+(p>>>0<A>>>0?1:0),o.low=y+O,y=o.low,o.high=g+M+(y>>>0<O>>>0?1:0),s.low=v+B,v=s.low,s.high=m+C+(v>>>0<B>>>0?1:0),a.low=w+L,w=a.low,a.high=b+D+(w>>>0<L>>>0?1:0),l.low=S+N,S=l.low,l.high=_+U+(S>>>0<N>>>0?1:0),u.low=T+F,T=u.low,u.high=E+j+(T>>>0<F>>>0?1:0),c.low=k+q,k=c.low,c.high=I+z+(k>>>0<q>>>0?1:0)}_doFinalize(){let e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[(n+128>>>10<<5)+30]=Math.floor(r/4294967296),t[(n+128>>>10<<5)+31]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()}clone(){let e=super.clone.call(this);return e._hash=this._hash.clone(),e}}let es=f._createHelper(eo),ea=f._createHmacHelper(eo);class el extends eo{_doReset(){this._hash=new p([new d(3418070365,3238371032),new d(1654270250,914150663),new d(2438529370,812702999),new d(355462360,4144912697),new d(1731405415,4290775857),new d(2394180231,1750603025),new d(3675008525,1694076839),new d(1203062813,3204075428)])}_doFinalize(){let e=super._doFinalize.call(this);return e.sigBytes-=16,e}}let eu=eo._createHelper(el),ec=eo._createHmacHelper(el),ef=[],eh=[],ed=[],ep=1,eg=0;for(let e=0;e<24;e+=1){ef[ep+5*eg]=(e+1)*(e+2)/2%64;let t=eg%5,r=(2*ep+3*eg)%5;ep=t,eg=r}for(let e=0;e<5;e+=1)for(let t=0;t<5;t+=1)eh[e+5*t]=t+(2*e+3*t)%5*5;let ey=1;for(let e=0;e<24;e+=1){let t=0,r=0;for(let e=0;e<7;e+=1){if(1&ey){let n=(1<<e)-1;n<32?r^=1<<n:t^=1<<n-32}128&ey?ey=ey<<1^113:ey<<=1}ed[e]=d.create(t,r)}let em=[];for(let e=0;e<25;e+=1)em[e]=d.create();class ev extends f{constructor(e){super(Object.assign({outputLength:512},e))}_doReset(){this._state=[];let e=this._state;for(let t=0;t<25;t+=1)e[t]=new d;this.blockSize=(1600-2*this.cfg.outputLength)/32}_doProcessBlock(e,t){let r=this._state,n=this.blockSize/2;for(let i=0;i<n;i+=1){let n=e[t+2*i],o=e[t+2*i+1];n=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,o=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360;let s=r[i];s.high^=o,s.low^=n}for(let e=0;e<24;e+=1){for(let e=0;e<5;e+=1){let t=0,n=0;for(let i=0;i<5;i+=1){let o=r[e+5*i];t^=o.high,n^=o.low}let i=em[e];i.high=t,i.low=n}for(let e=0;e<5;e+=1){let t=em[(e+4)%5],n=em[(e+1)%5],i=n.high,o=n.low,s=t.high^(i<<1|o>>>31),a=t.low^(o<<1|i>>>31);for(let t=0;t<5;t+=1){let n=r[e+5*t];n.high^=s,n.low^=a}}for(let e=1;e<25;e+=1){let t,n;let i=r[e],o=i.high,s=i.low,a=ef[e];a<32?(t=o<<a|s>>>32-a,n=s<<a|o>>>32-a):(t=s<<a-32|o>>>64-a,n=o<<a-32|s>>>64-a);let l=em[eh[e]];l.high=t,l.low=n}let t=em[0],n=r[0];t.high=n.high,t.low=n.low;for(let e=0;e<5;e+=1)for(let t=0;t<5;t+=1){let n=e+5*t,i=r[n],o=em[n],s=em[(e+1)%5+5*t],a=em[(e+2)%5+5*t];i.high=o.high^~s.high&a.high,i.low=o.low^~s.low&a.low}let i=r[0],o=ed[e];i.high^=o.high,i.low^=o.low}}_doFinalize(){let e=this._data,t=e.words,r=8*e.sigBytes,n=32*this.blockSize;t[r>>>5]|=1<<24-r%32,t[(Math.ceil((r+1)/n)*n>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();let i=this._state,o=this.cfg.outputLength/8,a=o/8,l=[];for(let e=0;e<a;e+=1){let t=i[e],r=t.high,n=t.low;r=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,n=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,l.push(n),l.push(r)}return new s(l,o)}clone(){let e=super.clone.call(this);e._state=this._state.slice(0);let t=e._state;for(let e=0;e<25;e+=1)t[e]=t[e].clone();return e}}let eb=f._createHelper(ev),ew=f._createHmacHelper(ev),e_=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),eS=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),eE=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),eT=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),eI=s.create([0,1518500249,1859775393,2400959708,2840853838]),ek=s.create([1352829926,1548603684,1836072691,2053994217,0]),eR=(e,t,r)=>e^t^r,ex=(e,t,r)=>e&t|~e&r,eP=(e,t,r)=>(e|~t)^r,eA=(e,t,r)=>e&r|t&~r,eM=(e,t,r)=>e^(t|~r),eO=(e,t)=>e<<t|e>>>32-t;class eC extends f{_doReset(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){let r;for(let r=0;r<16;r+=1){let n=t+r,i=e[n];e[n]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}let n=this._hash.words,i=eI.words,o=ek.words,s=e_.words,a=eS.words,l=eE.words,u=eT.words,c=n[0],f=n[1],h=n[2],d=n[3],p=n[4],g=n[0],y=n[1],m=n[2],v=n[3],b=n[4];for(let n=0;n<80;n+=1)r=c+e[t+s[n]]|0,n<16?r+=eR(f,h,d)+i[0]:n<32?r+=ex(f,h,d)+i[1]:n<48?r+=eP(f,h,d)+i[2]:n<64?r+=eA(f,h,d)+i[3]:r+=eM(f,h,d)+i[4],r|=0,r=(r=eO(r,l[n]))+p|0,c=p,p=d,d=eO(h,10),h=f,f=r,r=g+e[t+a[n]]|0,n<16?r+=eM(y,m,v)+o[0]:n<32?r+=eA(y,m,v)+o[1]:n<48?r+=eP(y,m,v)+o[2]:n<64?r+=ex(y,m,v)+o[3]:r+=eR(y,m,v)+o[4],r|=0,r=(r=eO(r,u[n]))+b|0,g=b,b=v,v=eO(m,10),m=y,y=r;r=n[1]+h+v|0,n[1]=n[2]+d+b|0,n[2]=n[3]+p+g|0,n[3]=n[4]+c+y|0,n[4]=n[0]+f+m|0,n[0]=r}_doFinalize(){let e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,e.sigBytes=(t.length+1)*4,this._process();let i=this._hash,o=i.words;for(let e=0;e<5;e+=1){let t=o[e];o[e]=(t<<8|t>>>24)&16711935|(t<<24|t>>>8)&4278255360}return i}clone(){let e=super.clone.call(this);return e._hash=this._hash.clone(),e}}let eB=f._createHelper(eC),eD=f._createHmacHelper(eC);class eL extends o{constructor(e){super(),this.cfg=Object.assign(new o,{keySize:4,hasher:G,iterations:25e4},e)}compute(e,t){let{cfg:r}=this,n=h.create(r.hasher,e),i=s.create(),o=s.create([1]),a=i.words,l=o.words,{keySize:u,iterations:c}=r;for(;a.length<u;){let e=n.update(t).finalize(o);n.reset();let r=e.words,s=r.length,a=e;for(let e=1;e<c;e+=1){a=n.finalize(a),n.reset();let e=a.words;for(let t=0;t<s;t+=1)r[t]^=e[t]}i.concat(e),l[0]+=1}return i.sigBytes=4*u,i}}let eU=[],eN=[],ej=[],eF=[],ez=[],eq=[],eW=[],eH=[],eV=[],e$=[],eY=[];for(let e=0;e<256;e+=1)e<128?eY[e]=e<<1:eY[e]=e<<1^283;let eX=0,eK=0;for(let e=0;e<256;e+=1){let e=eK^eK<<1^eK<<2^eK<<3^eK<<4;e=e>>>8^255&e^99,eU[eX]=e,eN[e]=eX;let t=eY[eX],r=eY[t],n=eY[r],i=257*eY[e]^16843008*e;ej[eX]=i<<24|i>>>8,eF[eX]=i<<16|i>>>16,ez[eX]=i<<8|i>>>24,eq[eX]=i,i=16843009*n^65537*r^257*t^16843008*eX,eW[e]=i<<24|i>>>8,eH[e]=i<<16|i>>>16,eV[e]=i<<8|i>>>24,e$[e]=i,eX?(eX=t^eY[eY[eY[n^t]]],eK^=eY[eY[eK]]):eX=eK=1}let eQ=[0,1,2,4,8,16,32,64,128,27,54];class eG extends O{_doReset(){let e;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;let t=this._keyPriorReset,r=t.words,n=t.sigBytes/4;this._nRounds=n+6;let i=(this._nRounds+1)*4;this._keySchedule=[];let o=this._keySchedule;for(let t=0;t<i;t+=1)t<n?o[t]=r[t]:(e=o[t-1],t%n?n>6&&t%n==4&&(e=eU[e>>>24]<<24|eU[e>>>16&255]<<16|eU[e>>>8&255]<<8|eU[255&e]):e=(eU[(e=e<<8|e>>>24)>>>24]<<24|eU[e>>>16&255]<<16|eU[e>>>8&255]<<8|eU[255&e])^eQ[t/n|0]<<24,o[t]=o[t-n]^e);this._invKeySchedule=[];let s=this._invKeySchedule;for(let t=0;t<i;t+=1){let r=i-t;e=t%4?o[r]:o[r-4],t<4||r<=4?s[t]=e:s[t]=eW[eU[e>>>24]]^eH[eU[e>>>16&255]]^eV[eU[e>>>8&255]]^e$[eU[255&e]]}}encryptBlock(e,t){this._doCryptBlock(e,t,this._keySchedule,ej,eF,ez,eq,eU)}decryptBlock(e,t){let r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,eW,eH,eV,e$,eN),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r}_doCryptBlock(e,t,r,n,i,o,s,a){let l=this._nRounds,u=e[t]^r[0],c=e[t+1]^r[1],f=e[t+2]^r[2],h=e[t+3]^r[3],d=4;for(let e=1;e<l;e+=1){let e=n[u>>>24]^i[c>>>16&255]^o[f>>>8&255]^s[255&h]^r[d];d+=1;let t=n[c>>>24]^i[f>>>16&255]^o[h>>>8&255]^s[255&u]^r[d];d+=1;let a=n[f>>>24]^i[h>>>16&255]^o[u>>>8&255]^s[255&c]^r[d];d+=1;let l=n[h>>>24]^i[u>>>16&255]^o[c>>>8&255]^s[255&f]^r[d];d+=1,u=e,c=t,f=a,h=l}let p=(a[u>>>24]<<24|a[c>>>16&255]<<16|a[f>>>8&255]<<8|a[255&h])^r[d];d+=1;let g=(a[c>>>24]<<24|a[f>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^r[d];d+=1;let y=(a[f>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&c])^r[d];d+=1;let m=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[c>>>8&255]<<8|a[255&f])^r[d];d+=1,e[t]=p,e[t+1]=g,e[t+2]=y,e[t+3]=m}}eG.keySize=8;let eZ=O._createHelper(eG),eJ=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],e0=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],e1=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],e2=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],e3=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679];function e4(e,t){let r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function e6(e,t){let r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}class e5 extends O{constructor(e,t,r){super(e,t,r),this.blockSize=2}_doReset(){let e=this._key.words,t=[];for(let r=0;r<56;r+=1){let n=eJ[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}this._subKeys=[];let r=this._subKeys;for(let e=0;e<16;e+=1){r[e]=[];let n=r[e],i=e1[e];for(let e=0;e<24;e+=1)n[e/6|0]|=t[(e0[e]-1+i)%28]<<31-e%6,n[4+(e/6|0)]|=t[28+(e0[e+24]-1+i)%28]<<31-e%6;n[0]=n[0]<<1|n[0]>>>31;for(let e=1;e<7;e+=1)n[e]>>>=(e-1)*4+3;n[7]=n[7]<<5|n[7]>>>27}this._invSubKeys=[];let n=this._invSubKeys;for(let e=0;e<16;e+=1)n[e]=r[15-e]}encryptBlock(e,t){this._doCryptBlock(e,t,this._subKeys)}decryptBlock(e,t){this._doCryptBlock(e,t,this._invSubKeys)}_doCryptBlock(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],e4.call(this,4,252645135),e4.call(this,16,65535),e6.call(this,2,858993459),e6.call(this,8,16711935),e4.call(this,1,1431655765);for(let e=0;e<16;e+=1){let t=r[e],n=this._lBlock,i=this._rBlock,o=0;for(let e=0;e<8;e+=1)o|=e2[e][((i^t[e])&e3[e])>>>0];this._lBlock=i,this._rBlock=n^o}let n=this._lBlock;this._lBlock=this._rBlock,this._rBlock=n,e4.call(this,1,1431655765),e6.call(this,8,16711935),e6.call(this,2,858993459),e4.call(this,16,65535),e4.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock}}e5.keySize=2,e5.ivSize=2;let e8=O._createHelper(e5);class e7 extends O{_doReset(){let e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");let t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),n=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=e5.createEncryptor(s.create(t)),this._des2=e5.createEncryptor(s.create(r)),this._des3=e5.createEncryptor(s.create(n))}encryptBlock(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)}decryptBlock(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)}}e7.keySize=6,e7.ivSize=2;let e9=O._createHelper(e7),te=[],tt=[],tr=[];function tn(){let e=this._X,t=this._C;for(let e=0;e<8;e+=1)tt[e]=t[e];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<tt[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<tt[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<tt[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<tt[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<tt[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<tt[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<tt[6]>>>0?1:0)|0,this._b=t[7]>>>0<tt[7]>>>0?1:0;for(let r=0;r<8;r+=1){let n=e[r]+t[r],i=65535&n,o=n>>>16,s=((i*i>>>17)+i*o>>>15)+o*o,a=((4294901760&n)*n|0)+((65535&n)*n|0);tr[r]=s^a}e[0]=tr[0]+(tr[7]<<16|tr[7]>>>16)+(tr[6]<<16|tr[6]>>>16)|0,e[1]=tr[1]+(tr[0]<<8|tr[0]>>>24)+tr[7]|0,e[2]=tr[2]+(tr[1]<<16|tr[1]>>>16)+(tr[0]<<16|tr[0]>>>16)|0,e[3]=tr[3]+(tr[2]<<8|tr[2]>>>24)+tr[1]|0,e[4]=tr[4]+(tr[3]<<16|tr[3]>>>16)+(tr[2]<<16|tr[2]>>>16)|0,e[5]=tr[5]+(tr[4]<<8|tr[4]>>>24)+tr[3]|0,e[6]=tr[6]+(tr[5]<<16|tr[5]>>>16)+(tr[4]<<16|tr[4]>>>16)|0,e[7]=tr[7]+(tr[6]<<8|tr[6]>>>24)+tr[5]|0}class ti extends R{constructor(...e){super(...e),this.blockSize=4,this.ivSize=2}_doReset(){let e=this._key.words,{iv:t}=this.cfg;for(let t=0;t<4;t+=1)e[t]=(e[t]<<8|e[t]>>>24)&16711935|(e[t]<<24|e[t]>>>8)&4278255360;this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16];let r=this._X;this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];let n=this._C;this._b=0;for(let e=0;e<4;e+=1)tn.call(this);for(let e=0;e<8;e+=1)n[e]^=r[e+4&7];if(t){let e=t.words,r=e[0],i=e[1],o=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,s=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,a=o>>>16|4294901760&s,l=s<<16|65535&o;n[0]^=o,n[1]^=a,n[2]^=s,n[3]^=l,n[4]^=o,n[5]^=a,n[6]^=s,n[7]^=l;for(let e=0;e<4;e+=1)tn.call(this)}}_doProcessBlock(e,t){let r=this._X;tn.call(this),te[0]=r[0]^r[5]>>>16^r[3]<<16,te[1]=r[2]^r[7]>>>16^r[5]<<16,te[2]=r[4]^r[1]>>>16^r[7]<<16,te[3]=r[6]^r[3]>>>16^r[1]<<16;for(let r=0;r<4;r+=1)te[r]=(te[r]<<8|te[r]>>>24)&16711935|(te[r]<<24|te[r]>>>8)&4278255360,e[t+r]^=te[r]}}let to=R._createHelper(ti),ts=[],ta=[],tl=[];function tu(){let e=this._X,t=this._C;for(let e=0;e<8;e+=1)ta[e]=t[e];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<ta[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<ta[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<ta[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<ta[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<ta[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<ta[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<ta[6]>>>0?1:0)|0,this._b=t[7]>>>0<ta[7]>>>0?1:0;for(let r=0;r<8;r+=1){let n=e[r]+t[r],i=65535&n,o=n>>>16,s=((i*i>>>17)+i*o>>>15)+o*o,a=((4294901760&n)*n|0)+((65535&n)*n|0);tl[r]=s^a}e[0]=tl[0]+(tl[7]<<16|tl[7]>>>16)+(tl[6]<<16|tl[6]>>>16)|0,e[1]=tl[1]+(tl[0]<<8|tl[0]>>>24)+tl[7]|0,e[2]=tl[2]+(tl[1]<<16|tl[1]>>>16)+(tl[0]<<16|tl[0]>>>16)|0,e[3]=tl[3]+(tl[2]<<8|tl[2]>>>24)+tl[1]|0,e[4]=tl[4]+(tl[3]<<16|tl[3]>>>16)+(tl[2]<<16|tl[2]>>>16)|0,e[5]=tl[5]+(tl[4]<<8|tl[4]>>>24)+tl[3]|0,e[6]=tl[6]+(tl[5]<<16|tl[5]>>>16)+(tl[4]<<16|tl[4]>>>16)|0,e[7]=tl[7]+(tl[6]<<8|tl[6]>>>24)+tl[5]|0}class tc extends R{constructor(...e){super(...e),this.blockSize=4,this.ivSize=2}_doReset(){let e=this._key.words,{iv:t}=this.cfg;this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16];let r=this._X;this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];let n=this._C;this._b=0;for(let e=0;e<4;e+=1)tu.call(this);for(let e=0;e<8;e+=1)n[e]^=r[e+4&7];if(t){let e=t.words,r=e[0],i=e[1],o=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,s=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,a=o>>>16|4294901760&s,l=s<<16|65535&o;n[0]^=o,n[1]^=a,n[2]^=s,n[3]^=l,n[4]^=o,n[5]^=a,n[6]^=s,n[7]^=l;for(let e=0;e<4;e+=1)tu.call(this)}}_doProcessBlock(e,t){let r=this._X;tu.call(this),ts[0]=r[0]^r[5]>>>16^r[3]<<16,ts[1]=r[2]^r[7]>>>16^r[5]<<16,ts[2]=r[4]^r[1]>>>16^r[7]<<16,ts[3]=r[6]^r[3]>>>16^r[1]<<16;for(let r=0;r<4;r+=1)ts[r]=(ts[r]<<8|ts[r]>>>24)&16711935|(ts[r]<<24|ts[r]>>>8)&4278255360,e[t+r]^=ts[r]}}let tf=R._createHelper(tc);function th(){let e=this._S,t=this._i,r=this._j,n=0;for(let i=0;i<4;i+=1){r=(r+e[t=(t+1)%256])%256;let o=e[t];e[t]=e[r],e[r]=o,n|=e[(e[t]+e[r])%256]<<24-8*i}return this._i=t,this._j=r,n}class td extends R{_doReset(){let e=this._key,t=e.words,r=e.sigBytes;this._S=[];let n=this._S;for(let e=0;e<256;e+=1)n[e]=e;for(let e=0,i=0;e<256;e+=1){let o=e%r,s=t[o>>>2]>>>24-o%4*8&255;i=(i+n[e]+s)%256;let a=n[e];n[e]=n[i],n[i]=a}this._j=0,this._i=this._j}_doProcessBlock(e,t){e[t]^=th.call(this)}}td.keySize=8,td.ivSize=0;let tp=R._createHelper(td);class tg extends td{constructor(...e){super(...e),Object.assign(this.cfg,{drop:192})}_doReset(){super._doReset.call(this);for(let e=this.cfg.drop;e>0;e-=1)th.call(this)}}let ty=R._createHelper(tg),tm=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],tv=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]],tb={pbox:[],sbox:[]};function tw(e,t){let r=e.sbox[0][t>>24&255]+e.sbox[1][t>>16&255];return r^=e.sbox[2][t>>8&255],r+=e.sbox[3][255&t]}function t_(e,t,r){let n,i=t,o=r;for(let t=0;t<16;++t)i^=e.pbox[t],o=tw(e,i)^o,n=i,i=o,o=n;return n=i,i=o,o=n^e.pbox[16],{left:i^=e.pbox[17],right:o}}class tS extends O{constructor(e,t,r){super(e,t,r),this.blockSize=2}_doReset(){if(this._keyPriorReset===this._key)return;let e=this._keyPriorReset=this._key;!function(e,t,r){for(let t=0;t<4;t++){e.sbox[t]=[];for(let r=0;r<256;r++)e.sbox[t][r]=tv[t][r]}let n=0;for(let i=0;i<18;i++)e.pbox[i]=tm[i]^t[n],++n>=r&&(n=0);let i=0,o=0,s=0;for(let t=0;t<18;t+=2)i=(s=t_(e,i,o)).left,o=s.right,e.pbox[t]=i,e.pbox[t+1]=o;for(let t=0;t<4;t++)for(let r=0;r<256;r+=2)i=(s=t_(e,i,o)).left,o=s.right,e.sbox[t][r]=i,e.sbox[t][r+1]=o}(tb,e.words,e.sigBytes/4)}encryptBlock(e,t){let r=t_(tb,e[t],e[t+1]);e[t]=r.left,e[t+1]=r.right}decryptBlock(e,t){let r=function(e,t,r){let n,i=t,o=r;for(let t=17;t>1;--t)i^=e.pbox[t],o=tw(e,i)^o,n=i,i=o,o=n;return n=i,i=o,o=n^e.pbox[1],{left:i^=e.pbox[0],right:o}}(tb,e[t],e[t+1]);e[t]=r.left,e[t+1]=r.right}}tS.keySize=4,tS.ivSize=2;let tE=O._createHelper(tS);function tT(e,t,r,n){let i;let o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(let n=0;n<r;n+=1)e[t+n]^=i[n]}class tI extends x{}tI.Encryptor=class extends tI{processBlock(e,t){let r=this._cipher,{blockSize:n}=r;tT.call(this,e,t,n,r),this._prevBlock=e.slice(t,t+n)}},tI.Decryptor=class extends tI{processBlock(e,t){let r=this._cipher,{blockSize:n}=r,i=e.slice(t,t+n);tT.call(this,e,t,n,r),this._prevBlock=i}};class tk extends x{}tk.Encryptor=class extends tk{processBlock(e,t){let r=this._cipher,{blockSize:n}=r,i=this._iv,o=this._counter;i&&(this._counter=i.slice(0),o=this._counter,this._iv=void 0);let s=o.slice(0);r.encryptBlock(s,0),o[n-1]=o[n-1]+1|0;for(let r=0;r<n;r+=1)e[t+r]^=s[r]}},tk.Decryptor=tk.Encryptor;let tR=e=>{let t=e;if((e>>24&255)==255){let r=e>>16&255,n=e>>8&255,i=255&e;255===r?(r=0,255===n?(n=0,255===i?i=0:i+=1):n+=1):r+=1,t=0+(r<<16)+(n<<8)+i}else t+=16777216;return t},tx=e=>(e[0]=tR(e[0]),0===e[0]&&(e[1]=tR(e[1])),e);/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */class tP extends x{}tP.Encryptor=class extends tP{processBlock(e,t){let r=this._cipher,{blockSize:n}=r,i=this._iv,o=this._counter;i&&(this._counter=i.slice(0),o=this._counter,this._iv=void 0),tx(o);let s=o.slice(0);r.encryptBlock(s,0);for(let r=0;r<n;r+=1)e[t+r]^=s[r]}},tP.Decryptor=tP.Encryptor;class tA extends x{}tA.Encryptor=class extends tA{processBlock(e,t){this._cipher.encryptBlock(e,t)}},tA.Decryptor=class extends tA{processBlock(e,t){this._cipher.decryptBlock(e,t)}};class tM extends x{}tM.Encryptor=class extends tM{processBlock(e,t){let r=this._cipher,{blockSize:n}=r,i=this._iv,o=this._keystream;i&&(this._keystream=i.slice(0),o=this._keystream,this._iv=void 0),r.encryptBlock(o,0);for(let r=0;r<n;r+=1)e[t+r]^=o[r]}},tM.Decryptor=tM.Encryptor;let tO={pad(e,t){let r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad(e){let t=e.words;for(let r=e.sigBytes-1;r>=0;r-=1)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},tC={lib:{Base:o,WordArray:s,BufferedBlockAlgorithm:c,Hasher:f,Cipher:k,StreamCipher:R,BlockCipherMode:x,BlockCipher:O,CipherParams:C,SerializableCipher:D,PasswordBasedCipher:U},x64:{Word:d,WordArray:p},enc:{Hex:a,Latin1:l,Utf8:u,Utf16:j,Utf16BE:j,Utf16LE:{stringify(e){let{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=2){let r=N(t[e>>>2]>>>16-e%4*8&65535);n.push(String.fromCharCode(r))}return n.join("")},parse(e){let t=e.length,r=[];for(let n=0;n<t;n+=1)r[n>>>1]|=N(e.charCodeAt(n)<<16-n%2*16);return s.create(r,2*t)}},Base64:y,Base64url:{stringify(e,t=!0){let{words:r,sigBytes:n}=e,i=t?this._safeMap:this._map;e.clamp();let o=[];for(let e=0;e<n;e+=3){let t=(r[e>>>2]>>>24-e%4*8&255)<<16|(r[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|r[e+2>>>2]>>>24-(e+2)%4*8&255;for(let r=0;r<4&&e+.75*r<n;r+=1)o.push(i.charAt(t>>>6*(3-r)&63))}let s=i.charAt(64);if(s)for(;o.length%4;)o.push(s);return o.join("")},parse(e,t=!0){let r=e.length,n=t?this._safeMap:this._map,i=this._reverseMap;if(!i){this._reverseMap=[],i=this._reverseMap;for(let e=0;e<n.length;e+=1)i[n.charCodeAt(e)]=e}let o=n.charAt(64);if(o){let t=e.indexOf(o);-1!==t&&(r=t)}return g(e,r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safeMap:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}},algo:{HMAC:h,MD5:S,SHA1:z,SHA224:ee,SHA256:G,SHA384:el,SHA512:eo,SHA3:ev,RIPEMD160:eC,PBKDF2:eL,EvpKDF:I,AES:eG,DES:e5,TripleDES:e7,Rabbit:ti,RabbitLegacy:tc,RC4:td,RC4Drop:tg,Blowfish:tS},mode:{CBC:A,CFB:tI,CTR:tk,CTRGladman:tP,ECB:tA,OFB:tM},pad:{Pkcs7:M,AnsiX923:{pad(e,t){let r=e.sigBytes,n=4*t,i=n-r%n,o=r+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad(e){let t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},Iso10126:{pad(e,t){let r=4*t,n=r-e.sigBytes%r;e.concat(s.random(n-1)).concat(s.create([n<<24],1))},unpad(e){let t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},Iso97971:{pad(e,t){e.concat(s.create([2147483648],1)),tO.pad(e,t)},unpad(e){tO.unpad(e),e.sigBytes-=1}},NoPadding:{pad(){},unpad(){}},ZeroPadding:tO},format:{OpenSSL:B,Hex:{stringify:e=>e.ciphertext.toString(a),parse(e){let t=a.parse(e);return C.create({ciphertext:t})}}},kdf:{OpenSSL:L},MD5:E,HmacMD5:T,SHA1:q,HmacSHA1:W,SHA224:et,HmacSHA224:er,SHA256:Z,HmacSHA256:J,SHA384:eu,HmacSHA384:ec,SHA512:es,HmacSHA512:ea,SHA3:eb,HmacSHA3:ew,RIPEMD160:eB,HmacRIPEMD160:eD,PBKDF2:(e,t,r)=>eL.create(r).compute(e,t),EvpKDF:(e,t,r)=>I.create(r).compute(e,t),AES:eZ,DES:e8,TripleDES:e9,Rabbit:to,RabbitLegacy:tf,RC4:tp,RC4Drop:ty,Blowfish:tE}},5726:function(e){var t;t=function(){"use strict";var e="millisecond",t="second",r="minute",n="hour",i="week",o="month",s="quarter",a="year",l="date",u="Invalid Date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},d="en",p={};p[d]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||"th")+"]"}};var g="$isDayjsObject",y=function(e){return e instanceof w||!(!e||!e[g])},m=function e(t,r,n){var i;if(!t)return d;if("string"==typeof t){var o=t.toLowerCase();p[o]&&(i=o),r&&(p[o]=r,i=o);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var a=t.name;p[a]=t,i=a}return!n&&i&&(d=i),i||!n&&d},v=function(e,t){if(y(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new w(r)},b={s:h,z:function(e){var t=-e.utcOffset(),r=Math.abs(t);return(t<=0?"+":"-")+h(Math.floor(r/60),2,"0")+":"+h(r%60,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,o),s=r-i<0,a=t.clone().add(n+(s?-1:1),o);return+(-(n+(r-i)/(s?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return({M:o,y:a,w:i,d:"day",D:l,h:n,m:r,s:t,ms:e,Q:s})[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};b.l=m,b.i=y,b.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function h(e){this.$L=m(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[g]=!0}var d=h.prototype;return d.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(c);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.init()},d.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},d.$utils=function(){return b},d.isValid=function(){return this.$d.toString()!==u},d.isSame=function(e,t){var r=v(e);return this.startOf(t)<=r&&r<=this.endOf(t)},d.isAfter=function(e,t){return v(e)<this.startOf(t)},d.isBefore=function(e,t){return this.endOf(t)<v(e)},d.$g=function(e,t,r){return b.u(e)?this[t]:this.set(r,e)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(e,s){var u=this,c=!!b.u(s)||s,f=b.p(e),h=function(e,t){var r=b.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return c?r:r.endOf("day")},d=function(e,t){return b.w(u.toDate()[e].apply(u.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},p=this.$W,g=this.$M,y=this.$D,m="set"+(this.$u?"UTC":"");switch(f){case a:return c?h(1,0):h(31,11);case o:return c?h(1,g):h(0,g+1);case i:var v=this.$locale().weekStart||0,w=(p<v?p+7:p)-v;return h(c?y-w:y+(6-w),g);case"day":case l:return d(m+"Hours",0);case n:return d(m+"Minutes",1);case r:return d(m+"Seconds",2);case t:return d(m+"Milliseconds",3);default:return this.clone()}},d.endOf=function(e){return this.startOf(e,!1)},d.$set=function(i,s){var u,c=b.p(i),f="set"+(this.$u?"UTC":""),h=((u={}).day=f+"Date",u[l]=f+"Date",u[o]=f+"Month",u[a]=f+"FullYear",u[n]=f+"Hours",u[r]=f+"Minutes",u[t]=f+"Seconds",u[e]=f+"Milliseconds",u)[c],d="day"===c?this.$D+(s-this.$W):s;if(c===o||c===a){var p=this.clone().set(l,1);p.$d[h](d),p.init(),this.$d=p.set(l,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](d);return this.init(),this},d.set=function(e,t){return this.clone().$set(e,t)},d.get=function(e){return this[b.p(e)]()},d.add=function(e,s){var l,u=this;e=Number(e);var c=b.p(s),f=function(t){var r=v(u);return b.w(r.date(r.date()+Math.round(t*e)),u)};if(c===o)return this.set(o,this.$M+e);if(c===a)return this.set(a,this.$y+e);if("day"===c)return f(1);if(c===i)return f(7);var h=((l={})[r]=6e4,l[n]=36e5,l[t]=1e3,l)[c]||1,d=this.$d.getTime()+e*h;return b.w(d,this)},d.subtract=function(e,t){return this.add(-1*e,t)},d.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||u;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=b.z(this),o=this.$H,s=this.$m,a=this.$M,l=r.weekdays,c=r.months,h=r.meridiem,d=function(e,r,i,o){return e&&(e[r]||e(t,n))||i[r].slice(0,o)},p=function(e){return b.s(o%12||12,e,"0")},g=h||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(f,function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return b.s(t.$y,4,"0");case"M":return a+1;case"MM":return b.s(a+1,2,"0");case"MMM":return d(r.monthsShort,a,c,3);case"MMMM":return d(c,a);case"D":return t.$D;case"DD":return b.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,l,2);case"ddd":return d(r.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return b.s(o,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return g(o,s,!0);case"A":return g(o,s,!1);case"m":return String(s);case"mm":return b.s(s,2,"0");case"s":return String(t.$s);case"ss":return b.s(t.$s,2,"0");case"SSS":return b.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},d.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},d.diff=function(e,l,u){var c,f=this,h=b.p(l),d=v(e),p=(d.utcOffset()-this.utcOffset())*6e4,g=this-d,y=function(){return b.m(f,d)};switch(h){case a:c=y()/12;break;case o:c=y();break;case s:c=y()/3;break;case i:c=(g-p)/6048e5;break;case"day":c=(g-p)/864e5;break;case n:c=g/36e5;break;case r:c=g/6e4;break;case t:c=g/1e3;break;default:c=g}return u?c:b.a(c)},d.daysInMonth=function(){return this.endOf(o).$D},d.$locale=function(){return p[this.$L]},d.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=m(e,t,!0);return n&&(r.$L=n),r},d.clone=function(){return b.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},h}(),_=w.prototype;return v.prototype=_,[["$ms",e],["$s",t],["$m",r],["$H",n],["$W","day"],["$M",o],["$y",a],["$D",l]].forEach(function(e){_[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),v.extend=function(e,t){return e.$i||(e(t,w,v),e.$i=!0),v},v.locale=m,v.isDayjs=y,v.unix=function(e){return v(1e3*e)},v.en=p[d],v.Ls=p,v.p={},v},e.exports=t()},5269:(e,t,r)=>{var n=r(4224);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e},t.useColors=function(){return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0)}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(7489)(t);let{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},7489:(e,t,r)=>{e.exports=function(e){function t(e){let r;let i=null;function o(...e){if(!o.enabled)return;let n=Number(new Date),i=n-(r||n);o.diff=i,o.prev=r,o.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";s++;let i=t.formatters[n];if("function"==typeof i){let t=e[s];r=i.call(o,t),e.splice(s,1),s--}return r}),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=n,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null===i?t.enabled(e):i,set:e=>{i=e}}),"function"==typeof t.init&&t.init(o),o}function n(e,r){let n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(i),...t.skips.map(i).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.names=[],t.skips=[];let n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.substr(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,n;if("*"===e[e.length-1])return!0;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(4610),t.destroy=function(){},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},9440:(e,t,r)=>{"use strict";var n,i=r(9753),o=r(4355);try{n=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var s=!!n&&o&&o(Object.prototype,"__proto__"),a=Object,l=a.getPrototypeOf;e.exports=s&&"function"==typeof s.get?i([s.get]):"function"==typeof l&&function(e){return l(null==e?e:a(e))}},6693:e=>{"use strict";function t(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,r,n){if(!e||"string"==typeof e)throw TypeError("Please pass an Error to err-code");n||(n={}),"object"==typeof r&&(n=r,r=void 0),null!=r&&(n.code=r);try{return t(e,n)}catch(i){n.message=e.message,n.stack=e.stack;let r=function(){};return r.prototype=Object.create(Object.getPrototypeOf(e)),t(new r,n)}}},3006:e=>{"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},6731:e=>{"use strict";e.exports=EvalError},6392:e=>{"use strict";e.exports=Error},3996:e=>{"use strict";e.exports=RangeError},961:e=>{"use strict";e.exports=ReferenceError},5736:e=>{"use strict";e.exports=SyntaxError},9837:e=>{"use strict";e.exports=TypeError},7821:e=>{"use strict";e.exports=URIError},8176:e=>{"use strict";e.exports=Object},2100:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(r,n){var i;function o(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&(i={once:!0},"function"==typeof e.on&&g(e,"error",o,i))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var i,o,s,u=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length}return e}function c(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=c.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,a=Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else for(var u=l.length,c=p(l,u),r=0;r<u;++r)n(c[r],this,t);return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},59:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},i=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r},o=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};e.exports=function(e){var s,a=this;if("function"!=typeof a||"[object Function]"!==t.apply(a))throw TypeError("Function.prototype.bind called on incompatible "+a);for(var l=i(arguments,1),u=r(0,a.length-l.length),c=[],f=0;f<u;f++)c[f]="$"+f;if(s=Function("binder","return function ("+o(c,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof s){var t=a.apply(this,n(l,arguments));return Object(t)===t?t:this}return a.apply(e,n(l,arguments))}),a.prototype){var h=function(){};h.prototype=a.prototype,s.prototype=new h,h.prototype=null}return s}},8794:(e,t,r)=>{"use strict";var n=r(59);e.exports=Function.prototype.bind||n},8835:e=>{e.exports=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},2103:(e,t,r)=>{"use strict";var n,i=r(8176),o=r(6392),s=r(6731),a=r(3996),l=r(961),u=r(5736),c=r(9837),f=r(7821),h=r(9273),d=r(2889),p=r(95),g=r(7237),y=r(2046),m=r(8525),v=r(2030),b=Function,w=function(e){try{return b('"use strict"; return ('+e+").constructor;")()}catch(e){}},_=r(4355),S=r(3006),E=function(){throw new c},T=_?function(){try{return arguments.callee,E}catch(e){try{return _(arguments,"callee").get}catch(e){return E}}}():E,I=r(2644)(),k=r(4765),R=r(7032),x=r(3568),P=r(5953),A=r(1657),M={},O="undefined"!=typeof Uint8Array&&k?k(Uint8Array):n,C={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":I&&k?k([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":M,"%AsyncGenerator%":M,"%AsyncGeneratorFunction%":M,"%AsyncIteratorPrototype%":M,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":s,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":M,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":I&&k?k(k([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&I&&k?k(new Map()[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":_,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&I&&k?k(new Set()[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":I&&k?k(""[Symbol.iterator]()):n,"%Symbol%":I?Symbol:n,"%SyntaxError%":u,"%ThrowTypeError%":T,"%TypedArray%":O,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":f,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%Function.prototype.call%":A,"%Function.prototype.apply%":P,"%Object.defineProperty%":S,"%Object.getPrototypeOf%":R,"%Math.abs%":h,"%Math.floor%":d,"%Math.max%":p,"%Math.min%":g,"%Math.pow%":y,"%Math.round%":m,"%Math.sign%":v,"%Reflect.getPrototypeOf%":x};if(k)try{null.error}catch(e){var B=k(k(e));C["%Error.prototype%"]=B}var D=function e(t){var r;if("%AsyncFunction%"===t)r=w("async function () {}");else if("%GeneratorFunction%"===t)r=w("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=w("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&k&&(r=k(i.prototype))}return C[t]=r,r},L={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},U=r(8794),N=r(2957),j=U.call(A,Array.prototype.concat),F=U.call(P,Array.prototype.splice),z=U.call(A,String.prototype.replace),q=U.call(A,String.prototype.slice),W=U.call(A,RegExp.prototype.exec),H=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,V=/\\(\\)?/g,$=function(e){var t=q(e,0,1),r=q(e,-1);if("%"===t&&"%"!==r)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var n=[];return z(e,H,function(e,t,r,i){n[n.length]=r?z(i,V,"$1"):t||e}),n},Y=function(e,t){var r,n=e;if(N(L,n)&&(n="%"+(r=L[n])[0]+"%"),N(C,n)){var i=C[n];if(i===M&&(i=D(n)),void 0===i&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new u("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===W(/^%?[^%]*%?$/,e))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=$(e),n=r.length>0?r[0]:"",i=Y("%"+n+"%",t),o=i.name,s=i.value,a=!1,l=i.alias;l&&(n=l[0],F(r,j([0,1],l)));for(var f=1,h=!0;f<r.length;f+=1){var d=r[f],p=q(d,0,1),g=q(d,-1);if(('"'===p||"'"===p||"`"===p||'"'===g||"'"===g||"`"===g)&&p!==g)throw new u("property names with quotes must have matching quotes");if("constructor"!==d&&h||(a=!0),n+="."+d,N(C,o="%"+n+"%"))s=C[o];else if(null!=s){if(!(d in s)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(_&&f+1>=r.length){var y=_(s,d);s=(h=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[d]}else h=N(s,d),s=s[d];h&&!a&&(C[o]=s)}}return s}},7032:(e,t,r)=>{"use strict";var n=r(8176);e.exports=n.getPrototypeOf||null},3568:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},4765:(e,t,r)=>{"use strict";var n=r(3568),i=r(7032),o=r(9440);e.exports=n?function(e){return n(e)}:i?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return i(e)}:o?function(e){return o(e)}:null},4080:e=>{"use strict";e.exports=Object.getOwnPropertyDescriptor},4355:(e,t,r)=>{"use strict";var n=r(4080);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},2644:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(2499);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},2499:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},2957:(e,t,r)=>{"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=r(8794);e.exports=o.call(n,i)},551:(e,t)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+e[t+f],f+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+f],f+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=u}return(d?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,h=23===i?5960464477539062e-23:0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?t+=h/l:t+=h*Math.pow(2,1-f),t*l>=2&&(s++,l/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*l-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+d]=255&s,d+=p,s/=256,u-=8);e[r+d-p]|=128*g}},2937:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},2266:(e,t,r)=>{e=r.nmd(e);var n,i,o="__lodash_hash_undefined__",s="[object Arguments]",a="[object Function]",l="[object Object]",u=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f[s]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f[a]=f["[object Map]"]=f["[object Number]"]=f[l]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1;var h="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,d="object"==typeof self&&self&&self.Object===Object&&self,p=h||d||Function("return this")(),g=t&&!t.nodeType&&t,y=g&&e&&!e.nodeType&&e,m=y&&y.exports===g,v=m&&h.process,b=function(){try{var e=y&&y.require&&y.require("util").types;if(e)return e;return v&&v.binding&&v.binding("util")}catch(e){}}(),w=b&&b.isTypedArray,_=Array.prototype,S=Function.prototype,E=Object.prototype,T=p["__core-js_shared__"],I=S.toString,k=E.hasOwnProperty,R=function(){var e=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),x=E.toString,P=I.call(Object),A=RegExp("^"+I.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=m?p.Buffer:void 0,O=p.Symbol,C=p.Uint8Array,B=M?M.allocUnsafe:void 0,D=(n=Object.getPrototypeOf,i=Object,function(e){return n(i(e))}),L=Object.create,U=E.propertyIsEnumerable,N=_.splice,j=O?O.toStringTag:void 0,F=function(){try{var e=ei(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),z=M?M.isBuffer:void 0,q=Math.max,W=Date.now,H=ei(p,"Map"),V=ei(Object,"create"),$=function(){function e(){}return function(t){if(!ey(t))return{};if(L)return L(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Y(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function X(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function K(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Q(e){var t=this.__data__=new X(e);this.size=t.size}function G(e,t,r){(void 0===r||eu(e[t],r))&&(void 0!==r||t in e)||J(e,t,r)}function Z(e,t){for(var r=e.length;r--;)if(eu(e[r][0],t))return r;return -1}function J(e,t,r){"__proto__"==t&&F?F(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}Y.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},Y.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Y.prototype.get=function(e){var t=this.__data__;if(V){var r=t[e];return r===o?void 0:r}return k.call(t,e)?t[e]:void 0},Y.prototype.has=function(e){var t=this.__data__;return V?void 0!==t[e]:k.call(t,e)},Y.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=V&&void 0===t?o:t,this},X.prototype.clear=function(){this.__data__=[],this.size=0},X.prototype.delete=function(e){var t=this.__data__,r=Z(t,e);return!(r<0)&&(r==t.length-1?t.pop():N.call(t,r,1),--this.size,!0)},X.prototype.get=function(e){var t=this.__data__,r=Z(t,e);return r<0?void 0:t[r][1]},X.prototype.has=function(e){return Z(this.__data__,e)>-1},X.prototype.set=function(e,t){var r=this.__data__,n=Z(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},K.prototype.clear=function(){this.size=0,this.__data__={hash:new Y,map:new(H||X),string:new Y}},K.prototype.delete=function(e){var t=en(this,e).delete(e);return this.size-=t?1:0,t},K.prototype.get=function(e){return en(this,e).get(e)},K.prototype.has=function(e){return en(this,e).has(e)},K.prototype.set=function(e,t){var r=en(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Q.prototype.clear=function(){this.__data__=new X,this.size=0},Q.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Q.prototype.get=function(e){return this.__data__.get(e)},Q.prototype.has=function(e){return this.__data__.has(e)},Q.prototype.set=function(e,t){var r=this.__data__;if(r instanceof X){var n=r.__data__;if(!H||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new K(n)}return r.set(e,t),this.size=r.size,this};var ee=function(e,t,r){for(var n=-1,i=Object(e),o=r(e),s=o.length;s--;){var a=o[++n];if(!1===t(i[a],a,i))break}return e};function et(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":j&&j in Object(e)?function(e){var t=k.call(e,j),r=e[j];try{e[j]=void 0;var n=!0}catch(e){}var i=x.call(e);return n&&(t?e[j]=r:delete e[j]),i}(e):x.call(e)}function er(e){return em(e)&&et(e)==s}function en(e,t){var r,n=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function ei(e,t){var r=null==e?void 0:e[t];return!(!ey(r)||R&&R in r)&&(ep(r)?A:u).test(function(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(r))?r:void 0}function eo(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&c.test(e))&&e>-1&&e%1==0&&e<t}function es(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||E)}function ea(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var el=function(e){var t=0,r=0;return function(){var n=W(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(F?function(e,t){return F(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:e_);function eu(e,t){return e===t||e!=e&&t!=t}var ec=er(function(){return arguments}())?er:function(e){return em(e)&&k.call(e,"callee")&&!U.call(e,"callee")},ef=Array.isArray;function eh(e){return null!=e&&eg(e.length)&&!ep(e)}var ed=z||function(){return!1};function ep(e){if(!ey(e))return!1;var t=et(e);return t==a||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eg(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function ey(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function em(e){return null!=e&&"object"==typeof e}var ev=w?function(e){return w(e)}:function(e){return em(e)&&eg(e.length)&&!!f[et(e)]};function eb(e){return eh(e)?function(e,t){var r=ef(e),n=!r&&ec(e),i=!r&&!n&&ed(e),o=!r&&!n&&!i&&ev(e),s=r||n||i||o,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=a.length;for(var u in e)(t||k.call(e,u))&&!(s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||eo(u,l)))&&a.push(u);return a}(e,!0):function(e){if(!ey(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=es(e),r=[];for(var n in e)"constructor"==n&&(t||!k.call(e,n))||r.push(n);return r}(e)}var ew=function(e){var t,r,n,i;return el((r=t=function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&function(e,t,r){if(!ey(r))return!1;var n=typeof t;return("number"==n?!!(eh(r)&&eo(t,r.length)):"string"==n&&t in r)&&eu(r[t],e)}(r[0],r[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,o)}return t},n=void 0,i=e_,n=q(void 0===n?r.length-1:n,0),function(){for(var e=arguments,t=-1,o=q(e.length-n,0),s=Array(o);++t<o;)s[t]=e[n+t];t=-1;for(var a=Array(n+1);++t<n;)a[t]=e[t];return a[n]=i(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(r,this,a)}),t+"")}(function(e,t,r){!function e(t,r,n,i,o){t!==r&&ee(r,function(s,a){if(o||(o=new Q),ey(s))!function(e,t,r,n,i,o,s){var a=ea(e,r),u=ea(t,r),c=s.get(u);if(c){G(e,r,c);return}var f=o?o(a,u,r+"",e,t,s):void 0,h=void 0===f;if(h){var d,p,g,y=ef(u),m=!y&&ed(u),v=!y&&!m&&ev(u);f=u,y||m||v?ef(a)?f=a:em(a)&&eh(a)?f=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(a):m?(h=!1,f=function(e,t){if(t)return e.slice();var r=e.length,n=B?B(r):new e.constructor(r);return e.copy(n),n}(u,!0)):v?(h=!1,new C(p=new(d=u.buffer).constructor(d.byteLength)).set(new C(d)),g=p,f=new u.constructor(g,u.byteOffset,u.length)):f=[]:function(e){if(!em(e)||et(e)!=l)return!1;var t=D(e);if(null===t)return!0;var r=k.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&I.call(r)==P}(u)||ec(u)?(f=a,ec(a)?f=function(e,t,r,n){var i=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=void 0;void 0===l&&(l=e[a]),i?J(r,a,l):function(e,t,r){var n=e[t];k.call(e,t)&&eu(n,r)&&(void 0!==r||t in e)||J(e,t,r)}(r,a,l)}return r}(a,eb(a)):(!ey(a)||ep(a))&&(f="function"!=typeof u.constructor||es(u)?{}:$(D(u)))):h=!1}h&&(s.set(u,f),i(f,u,n,o,s),s.delete(u)),G(e,r,f)}(t,r,a,n,e,i,o);else{var u=i?i(ea(t,a),s,a+"",t,r,o):void 0;void 0===u&&(u=s),G(t,a,u)}},eb)}(e,t,r)});function e_(e){return e}e.exports=ew},2615:(e,t,r)=>{var n=1/0,i="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,o="object"==typeof self&&self&&self.Object===Object&&self,s=i||o||Function("return this")(),a=Object.prototype,l=a.hasOwnProperty,u=a.toString,c=s.Symbol,f=a.propertyIsEnumerable,h=c?c.isConcatSpreadable:void 0,d=Math.max;function p(e){var t,r,n,i,o,s;return y(e)||m(e)&&null!=(t=e)&&"number"==typeof(r=t.length)&&r>-1&&r%1==0&&r<=9007199254740991&&!("[object Function]"==(o=typeof(i=n=t),s=i&&("object"==o||"function"==o)?u.call(n):"")||"[object GeneratorFunction]"==s)&&l.call(e,"callee")&&(!f.call(e,"callee")||"[object Arguments]"==u.call(e))||!!(h&&e&&e[h])}function g(e){if("string"==typeof e||"symbol"==typeof(t=e)||m(t)&&"[object Symbol]"==u.call(t))return e;var t,r=e+"";return"0"==r&&1/e==-n?"-0":r}var y=Array.isArray;function m(e){return!!e&&"object"==typeof e}var v=function(e,t){return t=d(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=d(r.length-t,0),o=Array(i);++n<i;)o[n]=r[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=r[n];return s[t]=o,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(function(e,t){var r,n;return null==e?{}:(r=e,n=function(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(function e(t,r,n,i,o){var s=-1,a=t.length;for(n||(n=p),o||(o=[]);++s<a;){var l=t[s];r>0&&n(l)?r>1?e(l,r-1,n,i,o):function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(o,l):i||(o[o.length]=l)}return o}(t,1),g),function(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=e[s];r(a,s)&&(o[s]=a)}return o}(r=Object(r),n,function(e,t){return t in r}))});e.exports=v},921:function(e,t){var r,n,i;n=[],void 0!==(i="function"==typeof(r=function(){"use strict";function e(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var r={},n={};function i(e,t){var i,o,a;return t?(e>>>=0,(a=0<=e&&e<256)&&(o=n[e]))?o:(i=s(e,(0|e)<0?-1:0,!0),a&&(n[e]=i),i):(e|=0,(a=-128<=e&&e<128)&&(o=r[e]))?o:(i=s(e,e<0?-1:0,!1),a&&(r[e]=i),i)}function o(e,t){if(isNaN(e)||!isFinite(e))return t?g:p;if(t){if(e<0)return g;if(e>=f)return w}else{if(e<=-h)return _;if(e+1>=h)return b}return e<0?o(-e,t).neg():s(e%c|0,e/c|0,t)}function s(t,r,n){return new e(t,r,n)}e.fromInt=i,e.fromNumber=o,e.fromBits=s;var a=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return p;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var n,i=o(a(r,8)),s=p,u=0;u<e.length;u+=8){var c=Math.min(8,e.length-u),f=parseInt(e.substring(u,u+c),r);if(c<8){var h=o(a(r,c));s=s.mul(h).add(o(f))}else s=(s=s.mul(i)).add(o(f))}return s.unsigned=t,s}function u(t){return t instanceof e?t:"number"==typeof t?o(t):"string"==typeof t?l(t):s(t.low,t.high,t.unsigned)}e.fromString=l,e.fromValue=u;var c=4294967296,f=18446744073709552e3,h=0x7fffffffffffffff,d=i(16777216),p=i(0);e.ZERO=p;var g=i(0,!0);e.UZERO=g;var y=i(1);e.ONE=y;var m=i(1,!0);e.UONE=m;var v=i(-1);e.NEG_ONE=v;var b=s(-1,2147483647,!1);e.MAX_VALUE=b;var w=s(-1,-1,!0);e.MAX_UNSIGNED_VALUE=w;var _=s(0,-2147483648,!1);e.MIN_VALUE=_;var S=e.prototype;return S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*c+(this.low>>>0):this.high*c+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(_))return"-"+this.neg().toString(e);var t=o(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}for(var i=o(a(e,6),this.unsigned),s=this,l="";;){var u=s.div(i),c=(s.sub(u.mul(i)).toInt()>>>0).toString(e);if((s=u).isZero())return c+l;for(;c.length<6;)c="0"+c;l=""+c+l}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return(1&this.low)==1},S.isEven=function(){return(1&this.low)==0},S.equals=function(e){return t(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.lessThan=function(e){return 0>this.comp(e)},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return 0>=this.comp(e)},S.lte=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.compare=function(e){if(t(e)||(e=u(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(y)},S.neg=S.negate,S.add=function(e){t(e)||(e=u(e));var r,n,i=this.high>>>16,o=65535&this.high,a=this.low>>>16,l=65535&this.low,c=e.high>>>16,f=65535&e.high,h=e.low>>>16,d=65535&e.low,p=0,g=0;return r=0+((n=0+(l+d))>>>16),n&=65535,r+=a+h,g+=r>>>16,r&=65535,g+=o+f,p+=g>>>16,g&=65535,p+=i+c,s(r<<16|n,(p&=65535)<<16|g,this.unsigned)},S.subtract=function(e){return t(e)||(e=u(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero()||(t(e)||(e=u(e)),e.isZero()))return p;if(this.eq(_))return e.isOdd()?_:p;if(e.eq(_))return this.isOdd()?_:p;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(d)&&e.lt(d))return o(this.toNumber()*e.toNumber(),this.unsigned);var r,n,i=this.high>>>16,a=65535&this.high,l=this.low>>>16,c=65535&this.low,f=e.high>>>16,h=65535&e.high,g=e.low>>>16,y=65535&e.low,m=0,v=0;return r=0+((n=0+c*y)>>>16),n&=65535,r+=l*y,v+=r>>>16,r&=65535,r+=c*g,v+=r>>>16,r&=65535,v+=a*y,m+=v>>>16,v&=65535,v+=l*g,m+=v>>>16,v&=65535,v+=c*h,m+=v>>>16,v&=65535,m+=i*y+a*g+l*h+c*f,s(r<<16|n,(m&=65535)<<16|v,this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(t(e)||(e=u(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?g:p;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return m;i=g}else{if(this.eq(_)){var r,n,i;return e.eq(y)||e.eq(v)?_:e.eq(_)?y:(r=this.shr(1).div(e).shl(1)).eq(p)?e.isNegative()?y:v:(n=this.sub(e.mul(r)),i=r.add(n.div(e)))}if(e.eq(_))return this.unsigned?g:p;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=p}for(n=this;n.gte(e);){for(var s=Math.ceil(Math.log(r=Math.max(1,Math.floor(n.toNumber()/e.toNumber())))/Math.LN2),l=s<=48?1:a(2,s-48),c=o(r),f=c.mul(e);f.isNegative()||f.gt(n);)r-=l,f=(c=o(r,this.unsigned)).mul(e);c.isZero()&&(c=y),i=i.add(c),n=n.sub(f)}return i},S.div=S.divide,S.modulo=function(e){return t(e)||(e=u(e)),this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.not=function(){return s(~this.low,~this.high,this.unsigned)},S.and=function(e){return t(e)||(e=u(e)),s(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return t(e)||(e=u(e)),s(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return t(e)||(e=u(e)),s(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return(t(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?s(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):s(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return(t(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?s(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):s(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0==(e&=63))return this;var r=this.high;return e<32?s(this.low>>>e|r<<32-e,r>>>e,this.unsigned):32===e?s(r,0,this.unsigned):s(r>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e})?r.apply(t,n):r)&&(e.exports=i)},9273:e=>{"use strict";e.exports=Math.abs},2889:e=>{"use strict";e.exports=Math.floor},7811:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},95:e=>{"use strict";e.exports=Math.max},7237:e=>{"use strict";e.exports=Math.min},2046:e=>{"use strict";e.exports=Math.pow},8525:e=>{"use strict";e.exports=Math.round},2030:(e,t,r)=>{"use strict";var n=r(7811);e.exports=function(e){return n(e)||0===e?e:e<0?-1:1}},4610:e=>{function t(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var n,i,o=typeof e;if("string"===o&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===o&&isFinite(e))return r.long?(n=Math.abs(e))>=864e5?t(e,n,864e5,"day"):n>=36e5?t(e,n,36e5,"hour"):n>=6e4?t(e,n,6e4,"minute"):n>=1e3?t(e,n,1e3,"second"):e+" ms":(i=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":i>=36e5?Math.round(e/36e5)+"h":i>=6e4?Math.round(e/6e4)+"m":i>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2065:(e,t,r)=>{var n="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=n&&i&&"function"==typeof i.get?i.get:null,s=n&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=a&&l&&"function"==typeof l.get?l.get:null,c=a&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,d="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,g=Object.prototype.toString,y=Function.prototype.toString,m=String.prototype.match,v=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,_=String.prototype.toLowerCase,S=RegExp.prototype.test,E=Array.prototype.concat,T=Array.prototype.join,I=Array.prototype.slice,k=Math.floor,R="function"==typeof BigInt?BigInt.prototype.valueOf:null,x=Object.getOwnPropertySymbols,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,A="function"==typeof Symbol&&"object"==typeof Symbol.iterator,M="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===A?"object":"symbol")?Symbol.toStringTag:null,O=Object.prototype.propertyIsEnumerable,C=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function B(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||S.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-k(-e):k(e);if(n!==e){var i=String(n),o=v.call(t,i.length+1);return b.call(i,r,"$&_")+"."+b.call(b.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var D=r(3624),L=D.custom,U=W(L)?L:null,N={__proto__:null,double:'"',single:"'"},j={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function F(e,t,r){var n=N[r.quoteStyle||t];return n+e+n}function z(e){return"[object Array]"===$(e)&&(!M||!("object"==typeof e&&M in e))}function q(e){return"[object RegExp]"===$(e)&&(!M||!("object"==typeof e&&M in e))}function W(e){if(A)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!P)return!1;try{return P.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,i,a){var l=n||{};if(V(l,"quoteStyle")&&!V(N,l.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(V(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var g=!V(l,"customInspect")||l.customInspect;if("boolean"!=typeof g&&"symbol"!==g)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(l,"indent")&&null!==l.indent&&"	"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(l,"numericSeparator")&&"boolean"!=typeof l.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var w=l.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,r){if(t.length>r.maxStringLength){var n=t.length-r.maxStringLength;return e(v.call(t,0,r.maxStringLength),r)+"... "+n+" more character"+(n>1?"s":"")}var i=j[r.quoteStyle||"single"];return i.lastIndex=0,F(b.call(b.call(t,i,"\\$1"),/[\x00-\x1f]/g,X),"single",r)}(t,l);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var S=String(t);return w?B(t,S):S}if("bigint"==typeof t){var k=String(t)+"n";return w?B(t,k):k}var x=void 0===l.depth?5:l.depth;if(void 0===i&&(i=0),i>=x&&x>0&&"object"==typeof t)return z(t)?"[Array]":"[Object]";var L=function(e,t){var r;if("	"===e.indent)r="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;r=T.call(Array(e.indent+1)," ")}return{base:r,prev:T.call(Array(t+1),r)}}(l,i);if(void 0===a)a=[];else if(Y(a,t)>=0)return"[Circular]";function H(t,r,n){if(r&&(a=I.call(a)).push(r),n){var o={depth:l.depth};return V(l,"quoteStyle")&&(o.quoteStyle=l.quoteStyle),e(t,o,i+1,a)}return e(t,l,i+1,a)}if("function"==typeof t&&!q(t)){var ee=function(e){if(e.name)return e.name;var t=m.call(y.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),et=J(t,H);return"[Function"+(ee?": "+ee:" (anonymous)")+"]"+(et.length>0?" { "+T.call(et,", ")+" }":"")}if(W(t)){var er=A?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(t);return"object"!=typeof t||A?er:K(er)}if(t&&"object"==typeof t&&("undefined"!=typeof HTMLElement&&t instanceof HTMLElement||"string"==typeof t.nodeName&&"function"==typeof t.getAttribute)){for(var en,ei="<"+_.call(String(t.nodeName)),eo=t.attributes||[],es=0;es<eo.length;es++)ei+=" "+eo[es].name+"="+F((en=eo[es].value,b.call(String(en),/"/g,"&quot;")),"double",l);return ei+=">",t.childNodes&&t.childNodes.length&&(ei+="..."),ei+="</"+_.call(String(t.nodeName))+">"}if(z(t)){if(0===t.length)return"[]";var ea=J(t,H);return L&&!function(e){for(var t=0;t<e.length;t++)if(Y(e[t],"\n")>=0)return!1;return!0}(ea)?"["+Z(ea,L)+"]":"[ "+T.call(ea,", ")+" ]"}if("[object Error]"===$(t)&&(!M||!("object"==typeof t&&M in t))){var el=J(t,H);return"cause"in Error.prototype||!("cause"in t)||O.call(t,"cause")?0===el.length?"["+String(t)+"]":"{ ["+String(t)+"] "+T.call(el,", ")+" }":"{ ["+String(t)+"] "+T.call(E.call("[cause]: "+H(t.cause),el),", ")+" }"}if("object"==typeof t&&g){if(U&&"function"==typeof t[U]&&D)return D(t,{depth:x-i});if("symbol"!==g&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var eu=[];return s&&s.call(t,function(e,r){eu.push(H(r,t,!0)+" => "+H(e,t))}),G("Map",o.call(t),eu,L)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ec=[];return c&&c.call(t,function(e){ec.push(H(e,t))}),G("Set",u.call(t),ec,L)}if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Q("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Q("WeakSet");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{return d.call(e),!0}catch(e){}return!1}(t))return Q("WeakRef");if("[object Number]"===$(t)&&(!M||!("object"==typeof t&&M in t)))return K(H(Number(t)));if(function(e){if(!e||"object"!=typeof e||!R)return!1;try{return R.call(e),!0}catch(e){}return!1}(t))return K(H(R.call(t)));if("[object Boolean]"===$(t)&&(!M||!("object"==typeof t&&M in t)))return K(p.call(t));if("[object String]"===$(t)&&(!M||!("object"==typeof t&&M in t)))return K(H(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||void 0!==r.g&&t===r.g)return"{ [object globalThis] }";if(!("[object Date]"===$(t)&&(!M||!("object"==typeof t&&M in t)))&&!q(t)){var ef=J(t,H),eh=C?C(t)===Object.prototype:t instanceof Object||t.constructor===Object,ed=t instanceof Object?"":"null prototype",ep=!eh&&M&&Object(t)===t&&M in t?v.call($(t),8,-1):ed?"Object":"",eg=(eh||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ep||ed?"["+T.call(E.call([],ep||[],ed||[]),": ")+"] ":"");return 0===ef.length?eg+"{}":L?eg+"{"+Z(ef,L)+"}":eg+"{ "+T.call(ef,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function V(e,t){return H.call(e,t)}function $(e){return g.call(e)}function Y(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}function X(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function K(e){return"Object("+e+")"}function Q(e){return e+" { ? }"}function G(e,t,r,n){return e+" ("+t+") {"+(n?Z(r,n):T.call(r,", "))+"}"}function Z(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+T.call(e,","+r)+"\n"+t.prev}function J(e,t){var r,n=z(e),i=[];if(n){i.length=e.length;for(var o=0;o<e.length;o++)i[o]=V(e,o)?t(e[o],e):""}var s="function"==typeof x?x(e):[];if(A){r={};for(var a=0;a<s.length;a++)r["$"+s[a]]=s[a]}for(var l in e)V(e,l)&&(!n||String(Number(l))!==l||!(l<e.length))&&(A&&r["$"+l]instanceof Symbol||(S.call(/[^\w$]/,l)?i.push(t(l,e)+": "+t(e[l],e)):i.push(l+": "+t(e[l],e))));if("function"==typeof x)for(var u=0;u<s.length;u++)O.call(e,s[u])&&i.push("["+t(s[u])+"]: "+t(e[s[u]],e));return i}},8241:(e,t,r)=>{"use strict";let{Deflate:n,deflate:i,deflateRaw:o,gzip:s}=r(1163),{Inflate:a,inflate:l,inflateRaw:u,ungzip:c}=r(524),f=r(1474);e.exports.Deflate=n,e.exports.deflate=i,e.exports.deflateRaw=o,e.exports.gzip=s,e.exports.Inflate=a,e.exports.inflate=l,e.exports.inflateRaw=u,e.exports.ungzip=c,e.exports.constants=f},1163:(e,t,r)=>{"use strict";let n=r(7982),i=r(942),o=r(6143),s=r(5404),a=r(3824),l=Object.prototype.toString,{Z_NO_FLUSH:u,Z_SYNC_FLUSH:c,Z_FULL_FLUSH:f,Z_FINISH:h,Z_OK:d,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:y,Z_DEFLATED:m}=r(1474);function v(e){this.options=i.assign({level:g,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:y},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==d)throw Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,e))!==d)throw Error(s[r]);this._dict_set=!0}}function b(e,t){let r=new v(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}v.prototype.push=function(e,t){let r,i;let s=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(i=t===~~t?t:!0===t?h:u,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){if(0===s.avail_out&&(s.output=new Uint8Array(a),s.next_out=0,s.avail_out=a),(i===c||i===f)&&s.avail_out<=6){this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;continue}if((r=n.deflate(s,i))===p)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===d;if(0===s.avail_out){this.onData(s.output);continue}if(i>0&&s.next_out>0){this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;continue}if(0===s.avail_in)break}return!0},v.prototype.onData=function(e){this.chunks.push(e)},v.prototype.onEnd=function(e){e===d&&(this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Deflate=v,e.exports.deflate=b,e.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,b(e,t)},e.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,b(e,t)},e.exports.constants=r(1474)},524:(e,t,r)=>{"use strict";let n=r(5180),i=r(942),o=r(6143),s=r(5404),a=r(3824),l=r(4741),u=Object.prototype.toString,{Z_NO_FLUSH:c,Z_FINISH:f,Z_OK:h,Z_STREAM_END:d,Z_NEED_DICT:p,Z_STREAM_ERROR:g,Z_DATA_ERROR:y,Z_MEM_ERROR:m}=r(1474);function v(e){this.options=i.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let r=n.inflateInit2(this.strm,t.windowBits);if(r!==h||(this.header=new l,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=n.inflateSetDictionary(this.strm,t.dictionary))!==h)))throw Error(s[r])}function b(e,t){let r=new v(t);if(r.push(e),r.err)throw r.msg||s[r.err];return r.result}v.prototype.push=function(e,t){let r,i,s;let a=this.strm,l=this.options.chunkSize,v=this.options.dictionary;if(this.ended)return!1;for(i=t===~~t?t:!0===t?f:c,"[object ArrayBuffer]"===u.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(l),a.next_out=0,a.avail_out=l),(r=n.inflate(a,i))===p&&v&&((r=n.inflateSetDictionary(a,v))===h?r=n.inflate(a,i):r===y&&(r=p));a.avail_in>0&&r===d&&a.state.wrap>0&&0!==e[a.next_in];)n.inflateReset(a),r=n.inflate(a,i);switch(r){case g:case y:case p:case m:return this.onEnd(r),this.ended=!0,!1}if(s=a.avail_out,a.next_out&&(0===a.avail_out||r===d)){if("string"===this.options.to){let e=o.utf8border(a.output,a.next_out),t=a.next_out-e,r=o.buf2string(a.output,e);a.next_out=t,a.avail_out=l-t,t&&a.output.set(a.output.subarray(e,e+t),0),this.onData(r)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out))}if(r!==h||0!==s){if(r===d)return r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},v.prototype.onData=function(e){this.chunks.push(e)},v.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Inflate=v,e.exports.inflate=b,e.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,b(e,t)},e.exports.ungzip=b,e.exports.constants=r(1474)},942:e=>{"use strict";let t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);e.exports.assign=function(e){let r=Array.prototype.slice.call(arguments,1);for(;r.length;){let n=r.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(let r in n)t(n,r)&&(e[r]=n[r])}}return e},e.exports.flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;let r=new Uint8Array(t);for(let t=0,n=0,i=e.length;t<i;t++){let i=e[t];r.set(i,n),n+=i.length}return r}},6143:e=>{"use strict";let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){t=!1}let r=new Uint8Array(256);for(let e=0;e<256;e++)r[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;r[254]=r[254]=1,e.exports.string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,s=e.length,a=0;for(i=0;i<s;i++)(64512&(r=e.charCodeAt(i)))==55296&&i+1<s&&(64512&(n=e.charCodeAt(i+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),i++),a+=r<128?1:r<2048?2:r<65536?3:4;for(o=0,t=new Uint8Array(a),i=0;o<a;i++)(64512&(r=e.charCodeAt(i)))==55296&&i+1<s&&(64512&(n=e.charCodeAt(i+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t};let n=(e,r)=>{if(r<65534&&e.subarray&&t)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let n="";for(let t=0;t<r;t++)n+=String.fromCharCode(e[t]);return n};e.exports.buf2string=(e,t)=>{let i,o;let s=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let a=Array(2*s);for(o=0,i=0;i<s;){let t=e[i++];if(t<128){a[o++]=t;continue}let n=r[t];if(n>4){a[o++]=65533,i+=n-1;continue}for(t&=2===n?31:3===n?15:7;n>1&&i<s;)t=t<<6|63&e[i++],n--;if(n>1){a[o++]=65533;continue}t<65536?a[o++]=t:(t-=65536,a[o++]=55296|t>>10&1023,a[o++]=56320|1023&t)}return n(a,o)},e.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(192&e[n])==128;)n--;return n<0||0===n?t:n+r[e[n]]>t?n:t}},9446:e=>{"use strict";e.exports=(e,t,r,n)=>{let i=65535&e|0,o=e>>>16&65535|0,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do o=o+(i=i+t[n++]|0)|0;while(--s)i%=65521,o%=65521}return i|o<<16|0}},1474:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},8627:e=>{"use strict";let t=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());e.exports=(e,r,n,i)=>{let o=i+n;e^=-1;for(let n=i;n<o;n++)e=e>>>8^t[(e^r[n])&255];return -1^e}},7982:(e,t,r)=>{"use strict";let{_tr_init:n,_tr_stored_block:i,_tr_flush_block:o,_tr_tally:s,_tr_align:a}=r(6101),l=r(9446),u=r(8627),c=r(5404),{Z_NO_FLUSH:f,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:d,Z_FINISH:p,Z_BLOCK:g,Z_OK:y,Z_STREAM_END:m,Z_STREAM_ERROR:v,Z_DATA_ERROR:b,Z_BUF_ERROR:w,Z_DEFAULT_COMPRESSION:_,Z_FILTERED:S,Z_HUFFMAN_ONLY:E,Z_RLE:T,Z_FIXED:I,Z_DEFAULT_STRATEGY:k,Z_UNKNOWN:R,Z_DEFLATED:x}=r(1474),P=(e,t)=>(e.msg=c[t],t),A=e=>2*e-(e>4?9:0),M=e=>{let t=e.length;for(;--t>=0;)e[t]=0},O=e=>{let t,r,n;let i=e.w_size;n=t=e.hash_size;do r=e.head[--n],e.head[n]=r>=i?r-i:0;while(--t)n=t=i;do r=e.prev[--n],e.prev[n]=r>=i?r-i:0;while(--t)},C=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,B=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},D=(e,t)=>{o(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,B(e.strm)},L=(e,t)=>{e.pending_buf[e.pending++]=t},U=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},N=(e,t,r,n)=>{let i=e.avail_in;return(i>n&&(i=n),0===i)?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=l(e.adler,t,i,r):2===e.state.wrap&&(e.adler=u(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},j=(e,t)=>{let r,n,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,u=e.window,c=e.w_mask,f=e.prev,h=e.strstart+258,d=u[o+s-1],p=u[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(u[(r=t)+s]!==p||u[r+s-1]!==d||u[r]!==u[o]||u[++r]!==u[o+1])continue;o+=2,r++;do;while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<h)if(n=258-(h-o),o=h-258,n>s){if(e.match_start=t,s=n,n>=a)break;d=u[o+s-1],p=u[o+s]}}while((t=f[t&c])>l&&0!=--i)return s<=e.lookahead?s:e.lookahead},F=e=>{let t,r,n;let i=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-262)&&(e.window.set(e.window.subarray(i,i+i-r),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),O(e),r+=i),0===e.strm.avail_in)break;if(t=N(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=C(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=C(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},z=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,o,s,a=0,l=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,n>(o=e.strstart-e.block_start)+e.strm.avail_in&&(n=o+e.strm.avail_in),n>s&&(n=s),n<r&&(0===n&&t!==p||t===f||n!==o+e.strm.avail_in)))break;a=t===p&&n===o+e.strm.avail_in?1:0,i(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,B(e.strm),o&&(o>n&&(o=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+o),e.strm.next_out),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o,e.block_start+=o,n-=o),n&&(N(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a)return((l-=e.strm.avail_in)&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a)?4:t!==f&&t!==p&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(N(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,r=(s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s)>e.w_size?e.w_size:s,((o=e.strstart-e.block_start)>=r||(o||t===p)&&t!==f&&0===e.strm.avail_in&&o<=s)&&(n=o>s?s:o,a=t===p&&0===e.strm.avail_in&&n===o?1:0,i(e,e.block_start,n,a),e.block_start+=n,B(e.strm)),a?3:1)},q=(e,t)=>{let r,n;for(;;){if(e.lookahead<262){if(F(e),e.lookahead<262&&t===f)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=C(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=j(e,r)),e.match_length>=3){if(n=s(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=C(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=C(e,e.ins_h,e.window[e.strstart+1])}else n=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(D(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===p)?(D(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(D(e,!1),0===e.strm.avail_out)?1:2},W=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<262){if(F(e),e.lookahead<262&&t===f)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=C(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=j(e,r),e.match_length<=5&&(e.strategy===S||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=s(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=C(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,n&&(D(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=s(e,0,e.window[e.strstart-1]))&&D(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(n=s(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===p)?(D(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(D(e,!1),0===e.strm.avail_out)?1:2},H=(e,t)=>{let r,n,i,o;let a=e.window;for(;;){if(e.lookahead<=258){if(F(e),e.lookahead<=258&&t===f)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){o=e.strstart+258;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o)e.match_length=258-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=s(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(D(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===p)?(D(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(D(e,!1),0===e.strm.avail_out)?1:2},V=(e,t)=>{let r;for(;;){if(0===e.lookahead&&(F(e),0===e.lookahead)){if(t===f)return 1;break}if(e.match_length=0,r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(D(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===p)?(D(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(D(e,!1),0===e.strm.avail_out)?1:2};function $(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}let Y=[new $(0,0,0,0,z),new $(4,4,8,4,q),new $(4,5,16,8,q),new $(4,6,32,32,q),new $(4,4,16,16,W),new $(8,16,32,32,W),new $(8,16,128,128,W),new $(8,32,128,256,W),new $(32,128,258,1024,W),new $(32,258,258,4096,W)],X=e=>{e.window_size=2*e.w_size,M(e.head),e.max_lazy_match=Y[e.level].max_lazy,e.good_match=Y[e.level].good_length,e.nice_match=Y[e.level].nice_length,e.max_chain_length=Y[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0};function K(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),M(this.dyn_ltree),M(this.dyn_dtree),M(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),M(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),M(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Q=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1},G=e=>{if(Q(e))return P(e,v);e.total_in=e.total_out=0,e.data_type=R;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,n(t),y},Z=e=>{let t=G(e);return t===y&&X(e.state),t},J=(e,t,r,n,i,o)=>{if(!e)return v;let s=1;if(t===_&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>9||r!==x||n<8||n>15||t<0||t>9||o<0||o>I||8===n&&1!==s)return P(e,v);8===n&&(n=9);let a=new K;return e.state=a,a.strm=e,a.status=42,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=o,a.method=r,Z(e)};e.exports.deflateInit=(e,t)=>J(e,t,x,15,8,k),e.exports.deflateInit2=J,e.exports.deflateReset=Z,e.exports.deflateResetKeep=G,e.exports.deflateSetHeader=(e,t)=>Q(e)||2!==e.state.wrap?v:(e.state.gzhead=t,y),e.exports.deflate=(e,t)=>{if(Q(e)||t>g||t<0)return e?P(e,v):v;let r=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===r.status&&t!==p)return P(e,0===e.avail_out?w:v);let n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(B(e),0===e.avail_out)return r.last_flush=-1,y}else if(0===e.avail_in&&A(t)<=A(n)&&t!==p)return P(e,w);if(666===r.status&&0!==e.avail_in)return P(e,w);if(42===r.status&&0===r.wrap&&(r.status=113),42===r.status){let t=x+(r.w_bits-8<<4)<<8;if(t|=(r.strategy>=E||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(t|=32),U(r,t+=31-t%31),0!==r.strstart&&(U(r,e.adler>>>16),U(r,65535&e.adler)),e.adler=1,r.status=113,B(e),0!==r.pending)return r.last_flush=-1,y}if(57===r.status){if(e.adler=0,L(r,31),L(r,139),L(r,8),r.gzhead)L(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),L(r,255&r.gzhead.time),L(r,r.gzhead.time>>8&255),L(r,r.gzhead.time>>16&255),L(r,r.gzhead.time>>24&255),L(r,9===r.level?2:r.strategy>=E||r.level<2?4:0),L(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(L(r,255&r.gzhead.extra.length),L(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=u(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(L(r,0),L(r,0),L(r,0),L(r,0),L(r,0),L(r,9===r.level?2:r.strategy>=E||r.level<2?4:0),L(r,3),r.status=113,B(e),0!==r.pending)return r.last_flush=-1,y}if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=u(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=i,B(e),0!==r.pending)return r.last_flush=-1,y;t=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=u(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=u(e.adler,r.pending_buf,r.pending-n,n)),B(e),0!==r.pending)return r.last_flush=-1,y;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,L(r,t)}while(0!==t)r.gzhead.hcrc&&r.pending>n&&(e.adler=u(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=u(e.adler,r.pending_buf,r.pending-n,n)),B(e),0!==r.pending)return r.last_flush=-1,y;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,L(r,t)}while(0!==t)r.gzhead.hcrc&&r.pending>n&&(e.adler=u(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(B(e),0!==r.pending))return r.last_flush=-1,y;L(r,255&e.adler),L(r,e.adler>>8&255),e.adler=0}if(r.status=113,B(e),0!==r.pending)return r.last_flush=-1,y}if(0!==e.avail_in||0!==r.lookahead||t!==f&&666!==r.status){let n=0===r.level?z(r,t):r.strategy===E?V(r,t):r.strategy===T?H(r,t):Y[r.level].func(r,t);if((3===n||4===n)&&(r.status=666),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),y;if(2===n&&(t===h?a(r):t!==g&&(i(r,0,0,!1),t===d&&(M(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),B(e),0===e.avail_out))return r.last_flush=-1,y}return t!==p?y:r.wrap<=0?m:(2===r.wrap?(L(r,255&e.adler),L(r,e.adler>>8&255),L(r,e.adler>>16&255),L(r,e.adler>>24&255),L(r,255&e.total_in),L(r,e.total_in>>8&255),L(r,e.total_in>>16&255),L(r,e.total_in>>24&255)):(U(r,e.adler>>>16),U(r,65535&e.adler)),B(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?y:m)},e.exports.deflateEnd=e=>{if(Q(e))return v;let t=e.state.status;return e.state=null,113===t?P(e,b):y},e.exports.deflateSetDictionary=(e,t)=>{let r=t.length;if(Q(e))return v;let n=e.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return v;if(1===i&&(e.adler=l(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(M(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}let o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,F(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do n.ins_h=C(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++;while(--t)n.strstart=e,n.lookahead=2,F(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,n.wrap=i,y},e.exports.deflateInfo="pako deflate (from Nodeca project)"},4741:e=>{"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},1288:e=>{"use strict";e.exports=function(e,t){let r,n,i,o,s,a,l,u,c,f,h,d,p,g,y,m,v,b,w,_,S,E,T,I;let k=e.state;r=e.next_in,T=e.input,n=r+(e.avail_in-5),i=e.next_out,I=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),a=k.dmax,l=k.wsize,u=k.whave,c=k.wnext,f=k.window,h=k.hold,d=k.bits,p=k.lencode,g=k.distcode,y=(1<<k.lenbits)-1,m=(1<<k.distbits)-1;e:do for(d<15&&(h+=T[r++]<<d,d+=8,h+=T[r++]<<d,d+=8),v=p[h&y];;){if(h>>>=b=v>>>24,d-=b,0==(b=v>>>16&255))I[i++]=65535&v;else if(16&b)for(w=65535&v,(b&=15)&&(d<b&&(h+=T[r++]<<d,d+=8),w+=h&(1<<b)-1,h>>>=b,d-=b),d<15&&(h+=T[r++]<<d,d+=8,h+=T[r++]<<d,d+=8),v=g[h&m];;){if(h>>>=b=v>>>24,d-=b,16&(b=v>>>16&255)){if(_=65535&v,d<(b&=15)&&(h+=T[r++]<<d,(d+=8)<b&&(h+=T[r++]<<d,d+=8)),(_+=h&(1<<b)-1)>a){e.msg="invalid distance too far back",k.mode=16209;break e}if(h>>>=b,d-=b,_>(b=i-o)){if((b=_-b)>u&&k.sane){e.msg="invalid distance too far back",k.mode=16209;break e}if(S=0,E=f,0===c){if(S+=l-b,b<w){w-=b;do I[i++]=f[S++];while(--b)S=i-_,E=I}}else if(c<b){if(S+=l+c-b,(b-=c)<w){w-=b;do I[i++]=f[S++];while(--b)if(S=0,c<w){w-=b=c;do I[i++]=f[S++];while(--b)S=i-_,E=I}}}else if(S+=c-b,b<w){w-=b;do I[i++]=f[S++];while(--b)S=i-_,E=I}for(;w>2;)I[i++]=E[S++],I[i++]=E[S++],I[i++]=E[S++],w-=3;w&&(I[i++]=E[S++],w>1&&(I[i++]=E[S++]))}else{S=i-_;do I[i++]=I[S++],I[i++]=I[S++],I[i++]=I[S++],w-=3;while(w>2)w&&(I[i++]=I[S++],w>1&&(I[i++]=I[S++]))}}else if((64&b)==0){v=g[(65535&v)+(h&(1<<b)-1)];continue}else{e.msg="invalid distance code",k.mode=16209;break e}break}else if((64&b)==0){v=p[(65535&v)+(h&(1<<b)-1)];continue}else if(32&b){k.mode=16191;break e}else{e.msg="invalid literal/length code",k.mode=16209;break e}break}while(r<n&&i<s)r-=w=d>>3,d-=w<<3,h&=(1<<d)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?5+(n-r):5-(r-n),e.avail_out=i<s?257+(s-i):257-(i-s),k.hold=h,k.bits=d}},5180:(e,t,r)=>{"use strict";let n,i;let o=r(9446),s=r(8627),a=r(1288),l=r(8702),{Z_FINISH:u,Z_BLOCK:c,Z_TREES:f,Z_OK:h,Z_STREAM_END:d,Z_NEED_DICT:p,Z_STREAM_ERROR:g,Z_DATA_ERROR:y,Z_MEM_ERROR:m,Z_BUF_ERROR:v,Z_DEFLATED:b}=r(1474),w=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function _(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let S=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<16180||t.mode>16211?1:0},E=e=>{if(S(e))return g;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,h},T=e=>{if(S(e))return g;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,E(e)},I=(e,t)=>{let r;if(S(e))return g;let n=e.state;return(t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?g:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,T(e))},k=(e,t)=>{if(!e)return g;let r=new _;e.state=r,r.strm=e,r.window=null,r.mode=16180;let n=I(e,t);return n!==h&&(e.state=null),n},R=!0,x=e=>{if(R){n=new Int32Array(512),i=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(l(1,e.lens,0,288,n,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;l(2,e.lens,0,32,i,0,e.work,{bits:5}),R=!1}e.lencode=n,e.lenbits=9,e.distcode=i,e.distbits=5},P=(e,t,r,n)=>{let i;let o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};e.exports.inflateReset=T,e.exports.inflateReset2=I,e.exports.inflateResetKeep=E,e.exports.inflateInit=e=>k(e,15),e.exports.inflateInit2=k,e.exports.inflate=(e,t)=>{let r,n,i,_,E,T,I,k,R,A,M,O,C,B,D,L,U,N,j,F,z,q,W,H;let V=0,$=new Uint8Array(4),Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(S(e)||!e.output||!e.input&&0!==e.avail_in)return g;16191===(r=e.state).mode&&(r.mode=16192),E=e.next_out,i=e.output,I=e.avail_out,_=e.next_in,n=e.input,T=e.avail_in,k=r.hold,R=r.bits,A=T,M=I,q=h;t:for(;;)switch(r.mode){case 16180:if(0===r.wrap){r.mode=16192;break}for(;R<16;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}if(2&r.wrap&&35615===k){0===r.wbits&&(r.wbits=15),r.check=0,$[0]=255&k,$[1]=k>>>8&255,r.check=s(r.check,$,2,0),k=0,R=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&k)<<8)+(k>>8))%31){e.msg="incorrect header check",r.mode=16209;break}if((15&k)!==b){e.msg="unknown compression method",r.mode=16209;break}if(k>>>=4,R-=4,z=(15&k)+8,0===r.wbits&&(r.wbits=z),z>15||z>r.wbits){e.msg="invalid window size",r.mode=16209;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&k?16189:16191,k=0,R=0;break;case 16181:for(;R<16;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}if(r.flags=k,(255&r.flags)!==b){e.msg="unknown compression method",r.mode=16209;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=16209;break}r.head&&(r.head.text=k>>8&1),512&r.flags&&4&r.wrap&&($[0]=255&k,$[1]=k>>>8&255,r.check=s(r.check,$,2,0)),k=0,R=0,r.mode=16182;case 16182:for(;R<32;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}r.head&&(r.head.time=k),512&r.flags&&4&r.wrap&&($[0]=255&k,$[1]=k>>>8&255,$[2]=k>>>16&255,$[3]=k>>>24&255,r.check=s(r.check,$,4,0)),k=0,R=0,r.mode=16183;case 16183:for(;R<16;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}r.head&&(r.head.xflags=255&k,r.head.os=k>>8),512&r.flags&&4&r.wrap&&($[0]=255&k,$[1]=k>>>8&255,r.check=s(r.check,$,2,0)),k=0,R=0,r.mode=16184;case 16184:if(1024&r.flags){for(;R<16;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}r.length=k,r.head&&(r.head.extra_len=k),512&r.flags&&4&r.wrap&&($[0]=255&k,$[1]=k>>>8&255,r.check=s(r.check,$,2,0)),k=0,R=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((O=r.length)>T&&(O=T),O&&(r.head&&(z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(_,_+O),z)),512&r.flags&&4&r.wrap&&(r.check=s(r.check,n,O,_)),T-=O,_+=O,r.length-=O),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===T)break t;O=0;do z=n[_+O++],r.head&&z&&r.length<65536&&(r.head.name+=String.fromCharCode(z));while(z&&O<T)if(512&r.flags&&4&r.wrap&&(r.check=s(r.check,n,O,_)),T-=O,_+=O,z)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===T)break t;O=0;do z=n[_+O++],r.head&&z&&r.length<65536&&(r.head.comment+=String.fromCharCode(z));while(z&&O<T)if(512&r.flags&&4&r.wrap&&(r.check=s(r.check,n,O,_)),T-=O,_+=O,z)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;R<16;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}if(4&r.wrap&&k!==(65535&r.check)){e.msg="header crc mismatch",r.mode=16209;break}k=0,R=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=16191;break;case 16189:for(;R<32;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}e.adler=r.check=w(k),k=0,R=0,r.mode=16190;case 16190:if(0===r.havedict)return e.next_out=E,e.avail_out=I,e.next_in=_,e.avail_in=T,r.hold=k,r.bits=R,p;e.adler=r.check=1,r.mode=16191;case 16191:if(t===c||t===f)break t;case 16192:if(r.last){k>>>=7&R,R-=7&R,r.mode=16206;break}for(;R<3;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}switch(r.last=1&k,R-=1,3&(k>>>=1)){case 0:r.mode=16193;break;case 1:if(x(r),r.mode=16199,t===f){k>>>=2,R-=2;break t}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=16209}k>>>=2,R-=2;break;case 16193:for(k>>>=7&R,R-=7&R;R<32;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}if((65535&k)!=(k>>>16^65535)){e.msg="invalid stored block lengths",r.mode=16209;break}if(r.length=65535&k,k=0,R=0,r.mode=16194,t===f)break t;case 16194:r.mode=16195;case 16195:if(O=r.length){if(O>T&&(O=T),O>I&&(O=I),0===O)break t;i.set(n.subarray(_,_+O),E),T-=O,_+=O,I-=O,E+=O,r.length-=O;break}r.mode=16191;break;case 16196:for(;R<14;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}if(r.nlen=(31&k)+257,k>>>=5,R-=5,r.ndist=(31&k)+1,k>>>=5,R-=5,r.ncode=(15&k)+4,k>>>=4,R-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=16209;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;R<3;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}r.lens[Y[r.have++]]=7&k,k>>>=3,R-=3}for(;r.have<19;)r.lens[Y[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,W={bits:r.lenbits},q=l(0,r.lens,0,19,r.lencode,0,r.work,W),r.lenbits=W.bits,q){e.msg="invalid code lengths set",r.mode=16209;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;D=(V=r.lencode[k&(1<<r.lenbits)-1])>>>24,L=V>>>16&255,U=65535&V,!(D<=R);){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}if(U<16)k>>>=D,R-=D,r.lens[r.have++]=U;else{if(16===U){for(H=D+2;R<H;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}if(k>>>=D,R-=D,0===r.have){e.msg="invalid bit length repeat",r.mode=16209;break}z=r.lens[r.have-1],O=3+(3&k),k>>>=2,R-=2}else if(17===U){for(H=D+3;R<H;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}k>>>=D,R-=D,z=0,O=3+(7&k),k>>>=3,R-=3}else{for(H=D+7;R<H;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}k>>>=D,R-=D,z=0,O=11+(127&k),k>>>=7,R-=7}if(r.have+O>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=16209;break}for(;O--;)r.lens[r.have++]=z}}if(16209===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=16209;break}if(r.lenbits=9,W={bits:r.lenbits},q=l(1,r.lens,0,r.nlen,r.lencode,0,r.work,W),r.lenbits=W.bits,q){e.msg="invalid literal/lengths set",r.mode=16209;break}if(r.distbits=6,r.distcode=r.distdyn,W={bits:r.distbits},q=l(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,W),r.distbits=W.bits,q){e.msg="invalid distances set",r.mode=16209;break}if(r.mode=16199,t===f)break t;case 16199:r.mode=16200;case 16200:if(T>=6&&I>=258){e.next_out=E,e.avail_out=I,e.next_in=_,e.avail_in=T,r.hold=k,r.bits=R,a(e,M),E=e.next_out,i=e.output,I=e.avail_out,_=e.next_in,n=e.input,T=e.avail_in,k=r.hold,R=r.bits,16191===r.mode&&(r.back=-1);break}for(r.back=0;D=(V=r.lencode[k&(1<<r.lenbits)-1])>>>24,L=V>>>16&255,U=65535&V,!(D<=R);){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}if(L&&(240&L)==0){for(N=D,j=L,F=U;D=(V=r.lencode[F+((k&(1<<N+j)-1)>>N)])>>>24,L=V>>>16&255,U=65535&V,!(N+D<=R);){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}k>>>=N,R-=N,r.back+=N}if(k>>>=D,R-=D,r.back+=D,r.length=U,0===L){r.mode=16205;break}if(32&L){r.back=-1,r.mode=16191;break}if(64&L){e.msg="invalid literal/length code",r.mode=16209;break}r.extra=15&L,r.mode=16201;case 16201:if(r.extra){for(H=r.extra;R<H;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}r.length+=k&(1<<r.extra)-1,k>>>=r.extra,R-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;D=(V=r.distcode[k&(1<<r.distbits)-1])>>>24,L=V>>>16&255,U=65535&V,!(D<=R);){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}if((240&L)==0){for(N=D,j=L,F=U;D=(V=r.distcode[F+((k&(1<<N+j)-1)>>N)])>>>24,L=V>>>16&255,U=65535&V,!(N+D<=R);){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}k>>>=N,R-=N,r.back+=N}if(k>>>=D,R-=D,r.back+=D,64&L){e.msg="invalid distance code",r.mode=16209;break}r.offset=U,r.extra=15&L,r.mode=16203;case 16203:if(r.extra){for(H=r.extra;R<H;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}r.offset+=k&(1<<r.extra)-1,k>>>=r.extra,R-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=16209;break}r.mode=16204;case 16204:if(0===I)break t;if(O=M-I,r.offset>O){if((O=r.offset-O)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=16209;break}O>r.wnext?(O-=r.wnext,C=r.wsize-O):C=r.wnext-O,O>r.length&&(O=r.length),B=r.window}else B=i,C=E-r.offset,O=r.length;O>I&&(O=I),I-=O,r.length-=O;do i[E++]=B[C++];while(--O)0===r.length&&(r.mode=16200);break;case 16205:if(0===I)break t;i[E++]=r.length,I--,r.mode=16200;break;case 16206:if(r.wrap){for(;R<32;){if(0===T)break t;T--,k|=n[_++]<<R,R+=8}if(M-=I,e.total_out+=M,r.total+=M,4&r.wrap&&M&&(e.adler=r.check=r.flags?s(r.check,i,M,E-M):o(r.check,i,M,E-M)),M=I,4&r.wrap&&(r.flags?k:w(k))!==r.check){e.msg="incorrect data check",r.mode=16209;break}k=0,R=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;R<32;){if(0===T)break t;T--,k+=n[_++]<<R,R+=8}if(4&r.wrap&&k!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=16209;break}k=0,R=0}r.mode=16208;case 16208:q=d;break t;case 16209:q=y;break t;case 16210:return m;default:return g}return(e.next_out=E,e.avail_out=I,e.next_in=_,e.avail_in=T,r.hold=k,r.bits=R,(r.wsize||M!==e.avail_out&&r.mode<16209&&(r.mode<16206||t!==u))&&P(e,e.output,e.next_out,M-e.avail_out))?(r.mode=16210,m):(A-=e.avail_in,M-=e.avail_out,e.total_in+=A,e.total_out+=M,r.total+=M,4&r.wrap&&M&&(e.adler=r.check=r.flags?s(r.check,i,M,e.next_out-M):o(r.check,i,M,e.next_out-M)),e.data_type=r.bits+(r.last?64:0)+(16191===r.mode?128:0)+(16199===r.mode||16194===r.mode?256:0),(0===A&&0===M||t===u)&&q===h&&(q=v),q)},e.exports.inflateEnd=e=>{if(S(e))return g;let t=e.state;return t.window&&(t.window=null),e.state=null,h},e.exports.inflateGetHeader=(e,t)=>{if(S(e))return g;let r=e.state;return(2&r.wrap)==0?g:(r.head=t,t.done=!1,h)},e.exports.inflateSetDictionary=(e,t)=>{let r;let n=t.length;return S(e)||0!==(r=e.state).wrap&&16190!==r.mode?g:16190===r.mode&&o(1,t,n,0)!==r.check?y:P(e,t,n,n)?(r.mode=16210,m):(r.havedict=1,h)},e.exports.inflateInfo="pako inflate (from Nodeca project)"},8702:e=>{"use strict";let t=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),i=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);e.exports=(e,o,s,a,l,u,c,f)=>{let h,d,p,g,y,m,v,b,w;let _=f.bits,S=0,E=0,T=0,I=0,k=0,R=0,x=0,P=0,A=0,M=0,O=null,C=new Uint16Array(16),B=new Uint16Array(16),D=null;for(S=0;S<=15;S++)C[S]=0;for(E=0;E<a;E++)C[o[s+E]]++;for(I=15,k=_;I>=1&&0===C[I];I--);if(k>I&&(k=I),0===I)return l[u++]=20971520,l[u++]=20971520,f.bits=1,0;for(T=1;T<I&&0===C[T];T++);for(k<T&&(k=T),P=1,S=1;S<=15;S++)if(P<<=1,(P-=C[S])<0)return -1;if(P>0&&(0===e||1!==I))return -1;for(S=1,B[1]=0;S<15;S++)B[S+1]=B[S]+C[S];for(E=0;E<a;E++)0!==o[s+E]&&(c[B[o[s+E]]++]=E);if(0===e?(O=D=c,m=20):1===e?(O=t,D=r,m=257):(O=n,D=i,m=0),M=0,E=0,S=T,y=u,R=k,x=0,p=-1,g=(A=1<<k)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){v=S-x,c[E]+1<m?(b=0,w=c[E]):c[E]>=m?(b=D[c[E]-m],w=O[c[E]-m]):(b=96,w=0),h=1<<S-x,T=d=1<<R;do l[y+(M>>x)+(d-=h)]=v<<24|b<<16|w|0;while(0!==d)for(h=1<<S-1;M&h;)h>>=1;if(0!==h?(M&=h-1,M+=h):M=0,E++,0==--C[S]){if(S===I)break;S=o[s+c[E]]}if(S>k&&(M&g)!==p){for(0===x&&(x=k),y+=T,P=1<<(R=S-x);R+x<I&&!((P-=C[R+x])<=0);)R++,P<<=1;if(A+=1<<R,1===e&&A>852||2===e&&A>592)return 1;l[p=M&g]=k<<24|R<<16|y-u|0}}return 0!==M&&(l[y+M]=S-x<<24|4194304),f.bits=k,0}},5404:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},6101:e=>{"use strict";let t,r,n;function i(e){let t=e.length;for(;--t>=0;)e[t]=0}let o=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),s=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=Array(576);i(u);let c=Array(60);i(c);let f=Array(512);i(f);let h=Array(256);i(h);let d=Array(29);i(d);let p=Array(30);function g(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}i(p);let m=e=>e<256?f[e]:f[256+(e>>>7)],v=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},b=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,v(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},w=(e,t,r)=>{b(e,r[2*t],r[2*t+1])},_=(e,t)=>{let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0)return r>>>1},S=e=>{16===e.bi_valid?(v(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},E=(e,t)=>{let r,n,i,o,s,a;let l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=15;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(o=l[2*l[2*(n=e.heap[r])+1]+1]+1)>p&&(o=p,g++),l[2*n+1]=o,!(n>u)&&(e.bl_count[o]++,s=0,n>=d&&(s=h[n-d]),a=l[2*n],e.opt_len+=a*(o+s),f&&(e.static_len+=a*(c[2*n+1]+s)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0)for(o=p;0!==o;o--)for(n=e.bl_count[o];0!==n;)!((i=e.heap[--r])>u)&&(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),n--)}},T=(e,t,r)=>{let n,i;let o=Array(16),s=0;for(n=1;n<=15;n++)s=s+r[n-1]<<1,o[n]=s;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=_(o[t]++,t))}},I=()=>{let e,i,l,y,m;let v=Array(16);for(y=0,l=0;y<28;y++)for(e=0,d[y]=l;e<1<<o[y];e++)h[l++]=y;for(h[l-1]=y,m=0,y=0;y<16;y++)for(e=0,p[y]=m;e<1<<s[y];e++)f[m++]=y;for(m>>=7;y<30;y++)for(e=0,p[y]=m<<7;e<1<<s[y]-7;e++)f[256+m++]=y;for(i=0;i<=15;i++)v[i]=0;for(e=0;e<=143;)u[2*e+1]=8,e++,v[8]++;for(;e<=255;)u[2*e+1]=9,e++,v[9]++;for(;e<=279;)u[2*e+1]=7,e++,v[7]++;for(;e<=287;)u[2*e+1]=8,e++,v[8]++;for(T(u,287,v),e=0;e<30;e++)c[2*e+1]=5,c[2*e]=_(e,5);t=new g(u,o,257,286,15),r=new g(c,s,0,30,15),n=new g([],a,0,19,7)},k=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},R=e=>{e.bi_valid>8?v(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},x=(e,t,r,n)=>{let i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},P=(e,t,r)=>{let n=e.heap[r],i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&x(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!x(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},A=(e,t,r)=>{let n,i,a,l;let u=0;if(0!==e.sym_next)do n=(255&e.pending_buf[e.sym_buf+u++])+((255&e.pending_buf[e.sym_buf+u++])<<8),i=e.pending_buf[e.sym_buf+u++],0===n?w(e,i,t):(w(e,(a=h[i])+256+1,t),0!==(l=o[a])&&b(e,i-=d[a],l),w(e,a=m(--n),r),0!==(l=s[a])&&b(e,n-=p[a],l));while(u<e.sym_next)w(e,256,t)},M=(e,t)=>{let r,n,i;let o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(r=0,e.heap_len=0,e.heap_max=573;r<l;r++)0!==o[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)P(e,o,r);i=l;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,P(e,o,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],E(e,t),T(o,u,e.bl_count)},O=(e,t,r)=>{let n,i;let o=-1,s=t[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)i=s,s=t[(n+1)*2+1],++a<l&&i===s||(a<u?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4))},C=(e,t,r)=>{let n,i;let o=-1,s=t[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),n=0;n<=r;n++)if(i=s,s=t[(n+1)*2+1],!(++a<l)||i!==s){if(a<u)do w(e,i,e.bl_tree);while(0!=--a)else 0!==i?(i!==o&&(w(e,i,e.bl_tree),a--),w(e,16,e.bl_tree),b(e,a-3,2)):a<=10?(w(e,17,e.bl_tree),b(e,a-3,3)):(w(e,18,e.bl_tree),b(e,a-11,7));a=0,o=i,0===s?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4)}},B=e=>{let t;for(O(e,e.dyn_ltree,e.l_desc.max_code),O(e,e.dyn_dtree,e.d_desc.max_code),M(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},D=(e,t,r,n)=>{let i;for(b(e,t-257,5),b(e,r-1,5),b(e,n-4,4),i=0;i<n;i++)b(e,e.bl_tree[2*l[i]+1],3);C(e,e.dyn_ltree,t-1),C(e,e.dyn_dtree,r-1)},L=e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0},U=!1,N=(e,t,r,n)=>{b(e,0+(n?1:0),3),R(e),v(e,r),v(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};e.exports._tr_init=e=>{U||(I(),U=!0),e.l_desc=new y(e.dyn_ltree,t),e.d_desc=new y(e.dyn_dtree,r),e.bl_desc=new y(e.bl_tree,n),e.bi_buf=0,e.bi_valid=0,k(e)},e.exports._tr_stored_block=N,e.exports._tr_flush_block=(e,t,r,n)=>{let i,o;let s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=L(e)),M(e,e.l_desc),M(e,e.d_desc),s=B(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t?N(e,t,r,n):4===e.strategy||o===i?(b(e,2+(n?1:0),3),A(e,u,c)):(b(e,4+(n?1:0),3),D(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),A(e,e.dyn_ltree,e.dyn_dtree)),k(e),n&&R(e)},e.exports._tr_tally=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[(h[r]+256+1)*2]++,e.dyn_dtree[2*m(t)]++),e.sym_next===e.sym_end),e.exports._tr_align=e=>{b(e,2,3),w(e,256,u),S(e)}},3824:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},4224:e=>{var t,r,n,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l=[],u=!1,c=-1;function f(){u&&n&&(u=!1,n.length?l=n.concat(l):c=-1,l.length&&h())}function h(){if(!u){var e=a(f);u=!0;for(var t=l.length;t;){for(n=l,l=[];++c<t;)n&&n[c].run();c=-1,t=l.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||u||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}},2382:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,n={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports={default:n.RFC3986,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:n.RFC1738,RFC3986:n.RFC3986}},9787:(e,t,r)=>{"use strict";var n=r(977),i=r(2106),o=r(2382);e.exports={formats:o,parse:i,stringify:n}},2106:(e,t,r)=>{"use strict";var n=r(471),i=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},l=function(e,t){var r={__proto__:null},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,u=t.parameterLimit===1/0?void 0:t.parameterLimit,c=l.split(t.delimiter,u),f=-1,h=t.charset;if(t.charsetSentinel)for(d=0;d<c.length;++d)0===c[d].indexOf("utf8=")&&("utf8=%E2%9C%93"===c[d]?h="utf-8":"utf8=%26%2310003%3B"===c[d]&&(h="iso-8859-1"),f=d,d=c.length);for(d=0;d<c.length;++d)if(d!==f){var d,p,g,y=c[d],m=y.indexOf("]="),v=-1===m?y.indexOf("="):m+1;-1===v?(p=t.decoder(y,s.decoder,h,"key"),g=t.strictNullHandling?null:""):(p=t.decoder(y.slice(0,v),s.decoder,h,"key"),g=n.maybeMap(a(y.slice(v+1),t),function(e){return t.decoder(e,s.decoder,h,"value")})),g&&t.interpretNumericEntities&&"iso-8859-1"===h&&(g=g.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),y.indexOf("[]=")>-1&&(g=o(g)?[g]:g),i.call(r,p)?r[p]=n.combine(r[p],g):r[p]=g}return r},u=function(e,t,r,n){for(var i=n?t:a(t,r),o=e.length-1;o>=0;--o){var s,l=e[o];if("[]"===l&&r.parseArrays)s=[].concat(i);else{s=r.plainObjects?Object.create(null):{};var u="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,c=parseInt(u,10);r.parseArrays||""!==u?!isNaN(c)&&l!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(s=[])[c]=i:"__proto__"!==u&&(s[u]=i):s={0:i}}i=s}return i},c=function(e,t,r,n){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(o),l=a?o.slice(0,a.index):o,c=[];if(l){if(!r.plainObjects&&i.call(Object.prototype,l)&&!r.allowPrototypes)return;c.push(l)}for(var f=0;r.depth>0&&null!==(a=s.exec(o))&&f<r.depth;){if(f+=1,!r.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+o.slice(a.index)+"]"),u(c,t,r,n)}},f=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset;return{allowDots:void 0===e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}};e.exports=function(e,t){var r=f(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var i="string"==typeof e?l(e,r):e,o=r.plainObjects?Object.create(null):{},s=Object.keys(i),a=0;a<s.length;++a){var u=s[a],h=c(u,i[u],r,"string"==typeof e);o=n.merge(o,h,r)}return!0===r.allowSparse?o:n.compact(o)}},977:(e,t,r)=>{"use strict";var n=r(316),i=r(471),o=r(2382),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,l(t)?t:[t])},f=Date.prototype.toISOString,h=o.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:h,formatter:o.formatters[h],indices:!1,serializeDate:function(e){return f.call(e)},skipNulls:!1,strictNullHandling:!1},p={},g=function e(t,r,o,s,a,u,f,h,g,y,m,v,b,w,_,S){for(var E,T,I=t,k=S,R=0,x=!1;void 0!==(k=k.get(p))&&!x;){var P=k.get(t);if(R+=1,void 0!==P){if(P===R)throw RangeError("Cyclic object value");x=!0}void 0===k.get(p)&&(R=0)}if("function"==typeof h?I=h(r,I):I instanceof Date?I=m(I):"comma"===o&&l(I)&&(I=i.maybeMap(I,function(e){return e instanceof Date?m(e):e})),null===I){if(a)return f&&!w?f(r,d.encoder,_,"key",v):r;I=""}if("string"==typeof(E=I)||"number"==typeof E||"boolean"==typeof E||"symbol"==typeof E||"bigint"==typeof E||i.isBuffer(I))return f?[b(w?r:f(r,d.encoder,_,"key",v))+"="+b(f(I,d.encoder,_,"value",v))]:[b(r)+"="+b(String(I))];var A=[];if(void 0===I)return A;if("comma"===o&&l(I))w&&f&&(I=i.maybeMap(I,f)),T=[{value:I.length>0?I.join(",")||null:void 0}];else if(l(h))T=h;else{var M=Object.keys(I);T=g?M.sort(g):M}for(var O=s&&l(I)&&1===I.length?r+"[]":r,C=0;C<T.length;++C){var B=T[C],D="object"==typeof B&&void 0!==B.value?B.value:I[B];if(!u||null!==D){var L=l(I)?"function"==typeof o?o(O,B):O:O+(y?"."+B:"["+B+"]");S.set(t,R);var U=n();U.set(p,S),c(A,e(D,L,o,s,a,u,"comma"===o&&w&&l(I)?null:f,h,g,y,m,v,b,w,_,U))}}return A},y=function(e){if(!e)return d;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!s.call(o.formatters,e.format))throw TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],i=d.filter;return("function"==typeof e.filter||l(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,delimiter:void 0===e.delimiter?d.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:d.encode,encoder:"function"==typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}};e.exports=function(e,t){var r,i,o=e,s=y(t);"function"==typeof s.filter?o=(0,s.filter)("",o):l(s.filter)&&(r=s.filter);var u=[];if("object"!=typeof o||null===o)return"";i=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=a[i];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var h="comma"===f&&t&&t.commaRoundTrip;r||(r=Object.keys(o)),s.sort&&r.sort(s.sort);for(var d=n(),p=0;p<r.length;++p){var m=r[p];s.skipNulls&&null===o[m]||c(u,g(o[m],m,f,h,s.strictNullHandling,s.skipNulls,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,d))}var v=u.join(s.delimiter),b=!0===s.addQueryPrefix?"?":"";return s.charsetSentinel&&("iso-8859-1"===s.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),v.length>0?b+v:""}},471:(e,t,r)=>{"use strict";var n=r(2382),i=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}},l=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:l,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],o=i.obj[i.prop],s=Object.keys(o),l=0;l<s.length;++l){var u=s[l],c=o[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:o,prop:u}),r.push(c))}return a(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,i,o){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var l="",u=0;u<a.length;++u){var c=a.charCodeAt(u);if(45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===n.RFC1738&&(40===c||41===c)){l+=a.charAt(u);continue}if(c<128){l+=s[c];continue}if(c<2048){l+=s[192|c>>6]+s[128|63&c];continue}if(c<55296||c>=57344){l+=s[224|c>>12]+s[128|c>>6&63]+s[128|63&c];continue}u+=1,l+=s[240|(c=65536+((1023&c)<<10|1023&a.charCodeAt(u)))>>18]+s[128|c>>12&63]+s[128|c>>6&63]+s[128|63&c]}return l},isBuffer:function(e){return!!e&&"object"==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return(o(t)&&!o(r)&&(s=l(t,n)),o(t)&&o(r))?(r.forEach(function(r,o){if(i.call(t,o)){var s=t[o];s&&"object"==typeof s&&r&&"object"==typeof r?t[o]=e(s,r,n):t.push(r)}else t[o]=r}),t):Object.keys(r).reduce(function(t,o){var s=r[o];return i.call(t,o)?t[o]=e(t[o],s,n):t[o]=s,t},s)}}},2746:(e,t,r)=>{/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let n;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:r.g):e=>(n||(n=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))},7350:(e,t,r)=>{"use strict";var n=r(4224),i=r(1874).Buffer,o=r.g.crypto||r.g.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw RangeError("requested too many random bytes");var r=i.allocUnsafe(e);if(e>0){if(e>65536)for(var s=0;s<e;s+=65536)o.getRandomValues(r.slice(s,s+65536));else o.getRandomValues(r)}return"function"==typeof t?n.nextTick(function(){t(null,r)}):r}:e.exports=function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},981:e=>{"use strict";var t={};function r(e,r,n){n||(n=Error);var i=function(e){function t(t,n,i){return e.call(this,"string"==typeof r?r:r(t,n,i))||this}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e,t}(n);i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(!Array.isArray(e))return"of ".concat(t," ").concat(String(e));var r=e.length;return(e=e.map(function(e){return String(e)}),r>2)?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,r){if("string"==typeof t&&(i="not ",t.substr(0,i.length)===i)?(l="must not be",t=t.replace(/^not /,"")):l="must be",o=" argument",(void 0===s||s>e.length)&&(s=e.length),e.substring(s-o.length,s)===o)u="The ".concat(e," ").concat(l," ").concat(n(t,"type"));else{var i,o,s,a,l,u,c=("number"!=typeof a&&(a=0),a+1>e.length||-1===e.indexOf(".",a))?"argument":"property";u='The "'.concat(e,'" ').concat(c," ").concat(l," ").concat(n(t,"type"))}return u+". Received type ".concat(typeof r)},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},3337:(e,t,r)=>{"use strict";var n=r(4224),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var o=r(5294),s=r(6481);r(2937)(c,o);for(var a=i(s.prototype),l=0;l<a.length;l++){var u=a[l];c.prototype[u]||(c.prototype[u]=s.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},8797:(e,t,r)=>{"use strict";e.exports=i;var n=r(1683);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(2937)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},5294:(e,t,r)=>{"use strict";var n,i,o,s,a,l=r(4224);e.exports=I,I.ReadableState=T,r(2100).EventEmitter;var u=function(e,t){return e.listeners(t).length},c=r(6922),f=r(5872).Buffer,h=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},d=r(2880);i=d&&d.debuglog?d.debuglog("stream"):function(){};var p=r(6292),g=r(3591),y=r(6084).getHighWaterMark,m=r(981).q,v=m.ERR_INVALID_ARG_TYPE,b=m.ERR_STREAM_PUSH_AFTER_EOF,w=m.ERR_METHOD_NOT_IMPLEMENTED,_=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(2937)(I,c);var S=g.errorOrDestroy,E=["error","close","destroy","pause","resume"];function T(e,t,i){n=n||r(3337),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o||(o=r(2699).s),this.decoder=new o(e.encoding),this.encoding=e.encoding)}function I(e){if(n=n||r(3337),!(this instanceof I))return new I(e);var t=this instanceof n;this._readableState=new T(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function k(e,t,r,n,o){i("readableAddChunk",t);var s,a,l,u,c,d=e._readableState;if(null===t)d.reading=!1,function(e,t){if(i("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}}(e,d);else{if(o||(s=d,a=t,f.isBuffer(a)||a instanceof h||"string"==typeof a||void 0===a||s.objectMode||(l=new v("chunk",["string","Buffer","Uint8Array"],a)),c=l),c)S(e,c);else if(d.objectMode||t&&t.length>0){if("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===f.prototype||(u=t,t=f.from(u)),n)d.endEmitted?S(e,new _):R(e,d,t,!0);else if(d.ended)S(e,new b);else{if(d.destroyed)return!1;d.reading=!1,d.decoder&&!r?(t=d.decoder.write(t),d.objectMode||0!==t.length?R(e,d,t,!1):M(e,d)):R(e,d,t,!1)}}else n||(d.reading=!1,M(e,d))}return!d.ended&&(d.length<d.highWaterMark||0===d.length)}function R(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&P(e)),M(e,t)}function x(e,t){if(e<=0||0===t.length&&t.ended)return 0;if(t.objectMode)return 1;if(e!=e)return t.flowing&&t.length?t.buffer.head.data.length:t.length;if(e>t.highWaterMark){var r;t.highWaterMark=((r=e)>=1073741824?r=1073741824:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r)}return e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)}function P(e){var t=e._readableState;i("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(i("emitReadable",t.flowing),t.emittedReadable=!0,l.nextTick(A,e))}function A(e){var t=e._readableState;i("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function M(e,t){t.readingMore||(t.readingMore=!0,l.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(i("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function C(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function B(e){i("readable nexttick read 0"),e.read(0)}function D(e,t){i("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(i("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function N(e){var t=e._readableState;i("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,l.nextTick(j,t,e))}function j(e,t){if(i("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),I.prototype.destroy=g.destroy,I.prototype._undestroy=g.undestroy,I.prototype._destroy=function(e,t){t(e)},I.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=f.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},I.prototype.unshift=function(e){return k(this,e,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(e){o||(o=r(2699).s);var t=new o(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this},I.prototype.read=function(e){i("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return i("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?N(this):P(this),null;if(0===(e=x(e,r))&&r.ended)return 0===r.length&&N(this),null;var o=r.needReadable;return i("need readable",o),(0===r.length||r.length-e<r.highWaterMark)&&i("length less than watermark",o=!0),r.ended||r.reading?i("reading or ended",o=!1):o&&(i("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=x(n,r))),null===(t=e>0?U(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==e&&r.ended&&N(this)),null!==t&&this.emit("data",t),t},I.prototype._read=function(e){S(this,new w("_read()"))},I.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,i("pipe count=%d opts=%j",n.pipesCount,t);var o=t&&!1===t.end||e===l.stdout||e===l.stderr?g:s;function s(){i("onend"),e.end()}n.endEmitted?l.nextTick(o):r.once("end",o),e.on("unpipe",function t(o,l){i("onunpipe"),o===r&&l&&!1===l.hasUnpiped&&(l.hasUnpiped=!0,i("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",a),e.removeListener("error",h),e.removeListener("unpipe",t),r.removeListener("end",s),r.removeListener("end",g),r.removeListener("data",f),c=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&a())});var a=function(){var e=r._readableState;i("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&u(r,"data")&&(e.flowing=!0,L(r))};e.on("drain",a);var c=!1;function f(t){i("ondata");var o=e.write(t);i("dest.write",o),!1===o&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==F(n.pipes,e))&&!c&&(i("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function h(t){i("onerror",t),g(),e.removeListener("error",h),0===u(e,"error")&&S(e,t)}function d(){e.removeListener("finish",p),g()}function p(){i("onfinish"),e.removeListener("close",d),g()}function g(){i("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",d),e.once("finish",p),e.emit("pipe",r),n.flowing||(i("pipe resume"),r.resume()),e},I.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=F(t.pipes,e);return -1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},I.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"!==e||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,i("on readable",n.length,n.reading),n.length?P(this):n.reading||l.nextTick(B,this)),r},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(e,t){var r=c.prototype.removeListener.call(this,e,t);return"readable"===e&&l.nextTick(C,this),r},I.prototype.removeAllListeners=function(e){var t=c.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&l.nextTick(C,this),t},I.prototype.resume=function(){var e=this._readableState;return e.flowing||(i("resume"),e.flowing=!e.readableListening,e.resumeScheduled||(e.resumeScheduled=!0,l.nextTick(D,this,e))),e.paused=!1,this},I.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",function(){if(i("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(o){i("wrapped data"),r.decoder&&(o=r.decoder.write(o)),(!r.objectMode||null!=o)&&(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var s=0;s<E.length;s++)e.on(E[s],this.emit.bind(this,E[s]));return this._read=function(t){i("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===s&&(s=r(9954)),s(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),I._fromList=U,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(I.from=function(e,t){return void 0===a&&(a=r(2037)),a(I,e,t)})},1683:(e,t,r)=>{"use strict";e.exports=c;var n=r(981).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,l=r(3337);function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush(function(t,r){h(e,t,r)})}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(2937)(c,l),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,r){r(new i("_transform()"))},c.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})}},6481:(e,t,r)=>{"use strict";var n,i,o=r(4224);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){(function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(void 0),n=n.next}t.corkedRequestsFree.next=e})(t,e)}}e.exports=I,I.WritableState=T;var a={deprecate:r(8863)},l=r(6922),u=r(5872).Buffer,c=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},f=r(3591),h=r(6084).getHighWaterMark,d=r(981).q,p=d.ERR_INVALID_ARG_TYPE,g=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_MULTIPLE_CALLBACK,m=d.ERR_STREAM_CANNOT_PIPE,v=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,S=f.errorOrDestroy;function E(){}function T(e,t,i){n=n||r(3337),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){(function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new y;if(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t)--r.pendingcb,n?(o.nextTick(i,t),o.nextTick(M,e,r),e._writableState.errorEmitted=!0,S(e,t)):(i(t),e._writableState.errorEmitted=!0,S(e,t),M(e,r));else{var s=P(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||x(e,r),n?o.nextTick(R,e,r,s,i):R(e,r,s,i)}})(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function I(e){var t=this instanceof(n=n||r(3337));if(!t&&!i.call(I,this))return new I(e);this._writableState=new T(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function k(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function R(e,t,r,n){r||0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain")),t.pendingcb--,n(),M(e,t)}function x(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=Array(t.bufferedRequestCount),i=t.corkedRequestsFree;i.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,k(e,t,!0,t.length,n,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,c=r.callback,f=t.objectMode?1:l.length;if(k(e,t,!1,f,l,u,c),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final(function(r){t.pendingcb--,r&&S(e,r),t.prefinished=!0,e.emit("prefinish"),M(e,t)})}function M(e,t){var r=P(t);if(r&&(t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,o.nextTick(A,e,t))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(2937)(I,l),T.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(T.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===I&&e&&e._writableState instanceof T}})):i=function(e){return e instanceof this},I.prototype.pipe=function(){S(this,new m)},I.prototype.write=function(e,t,r){var n,i,s,a,l,f,h,d=this._writableState,g=!1,y=!d.objectMode&&(n=e,u.isBuffer(n)||n instanceof c);return y&&!u.isBuffer(e)&&(i=e,e=u.from(i)),("function"==typeof t&&(r=t,t=null),y?t="buffer":t||(t=d.defaultEncoding),"function"!=typeof r&&(r=E),d.ending)?(s=r,S(this,a=new w),o.nextTick(s,a)):(y||(l=e,f=r,null===l?h=new b:"string"==typeof l||d.objectMode||(h=new p("chunk",["string","Buffer"],l)),!h||(S(this,h),o.nextTick(f,h),0)))&&(d.pendingcb++,g=function(e,t,r,n,i,o){if(!r){var s,a,l=(s=n,a=i,t.objectMode||!1===t.decodeStrings||"string"!=typeof s||(s=u.from(s,a)),s);n!==l&&(r=!0,i="buffer",n=l)}var c=t.objectMode?1:n.length;t.length+=c;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,c,n,i,o);return f}(this,d,y,e,t,r)),g},I.prototype.cork=function(){this._writableState.corked++},I.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||x(this,e))},I.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),I.prototype._write=function(e,t,r){r(new g("_write()"))},I.prototype._writev=null,I.prototype.end=function(e,t,r){var n,i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||(n=r,i.ending=!0,M(this,i),n&&(i.finished?o.nextTick(n):this.once("finish",n)),i.ended=!0,this.writable=!1),this},Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),I.prototype.destroy=f.destroy,I.prototype._undestroy=f.undestroy,I.prototype._destroy=function(e,t){t(e)}},9954:(e,t,r)=>{"use strict";var n,i=r(4224);function o(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(3675),a=Symbol("lastResolve"),l=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),f=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return{value:e,done:t}}function g(e){var t=e[a];if(null!==t){var r=e[d].read();null!==r&&(e[f]=null,e[a]=null,e[l]=null,t(p(r,!1)))}}function y(e){i.nextTick(g,e)}var m=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((o(n={get stream(){return this[d]},next:function(){var e,t,r=this,n=this[u];if(null!==n)return Promise.reject(n);if(this[c])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise(function(e,t){i.nextTick(function(){r[u]?t(r[u]):e(p(void 0,!0))})});var o=this[f];if(o)t=new Promise((e=this,function(t,r){o.then(function(){if(e[c]){t(p(void 0,!0));return}e[h](t,r)},r)}));else{var s=this[d].read();if(null!==s)return Promise.resolve(p(s,!1));t=new Promise(this[h])}return this[f]=t,t}},Symbol.asyncIterator,function(){return this}),o(n,"return",function(){var e=this;return new Promise(function(t,r){e[d].destroy(null,function(e){if(e){r(e);return}t(p(void 0,!0))})})}),n),m);e.exports=function(e){var t,r=Object.create(v,(o(t={},d,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,c,{value:e._readableState.endEmitted,writable:!0}),o(t,h,{value:function(e,t){var n=r[d].read();n?(r[f]=null,r[a]=null,r[l]=null,e(p(n,!1))):(r[a]=e,r[l]=t)},writable:!0}),t));return r[f]=null,s(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[l];null!==t&&(r[f]=null,r[a]=null,r[l]=null,t(e)),r[u]=e;return}var n=r[a];null!==n&&(r[f]=null,r[a]=null,r[l]=null,n(p(void 0,!0))),r[c]=!0}),e.on("readable",y.bind(null,r)),r}},6292:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=o(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var s=r(5872).Buffer,a=r(7942).inspect,l=a&&a.custom||"inspect";e.exports=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return e=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n=s.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=i.data,r=o,s.prototype.copy.call(t,n,r),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:l,value:function(e,t){return a(this,i(i({},t),{},{depth:0,customInspect:!1}))}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}()},3591:(e,t,r)=>{"use strict";var n=r(4224);function i(e,t){s(e,t),o(e)}function o(e){(!e._writableState||e._writableState.emitClose)&&(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(s,this,e)):n.nextTick(s,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?n.nextTick(o,r):(r._writableState.errorEmitted=!0,n.nextTick(i,r,e)):n.nextTick(i,r,e):t?(n.nextTick(o,r),t(e)):n.nextTick(o,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},3675:(e,t,r)=>{"use strict";var n=r(981).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),s=o||i,a=!1,o=function(){if(!a){a=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(this,t)}};var s,a,l=r.readable||!1!==r.readable&&t.readable,u=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||h()},f=t._writableState&&t._writableState.finished,h=function(){u=!1,f=!0,l||o.call(t)},d=t._readableState&&t._readableState.endEmitted,p=function(){l=!1,d=!0,u||o.call(t)},g=function(e){o.call(t,e)},y=function(){var e;return l&&!d?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):u&&!f?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},m=function(){t.req.on("finish",h)};return t.setHeader&&"function"==typeof t.abort?(t.on("complete",h),t.on("abort",y),t.req?m():t.on("request",m)):u&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",p),t.on("finish",h),!1!==r.error&&t.on("error",g),t.on("close",y),function(){t.removeListener("complete",h),t.removeListener("abort",y),t.removeListener("request",m),t.req&&t.req.removeListener("finish",h),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",g),t.removeListener("close",y)}}},2037:e=>{e.exports=function(){throw Error("Readable.from is not available in the browser")}},5597:(e,t,r)=>{"use strict";var n,i=r(981).q,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e,t,i=arguments.length,c=Array(i),f=0;f<i;f++)c[f]=arguments[f];var h=(e=c).length&&"function"==typeof e[e.length-1]?e.pop():a;if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new o("streams");var d=c.map(function(e,i){var o,a,u,f,p,g,y=i<c.length-1;return o=i>0,u=a=function(e){t||(t=e),e&&d.forEach(l),y||(d.forEach(l),h(t))},f=!1,a=function(){f||(f=!0,u.apply(void 0,arguments))},p=!1,e.on("close",function(){p=!0}),void 0===n&&(n=r(3675)),n(e,{readable:y,writable:o},function(e){if(e)return a(e);p=!0,a()}),g=!1,function(t){if(!p&&!g){if(g=!0,e.setHeader&&"function"==typeof e.abort)return e.abort();if("function"==typeof e.destroy)return e.destroy();a(t||new s("pipe"))}}});return c.reduce(u)}},6084:(e,t,r)=>{"use strict";var n=r(981).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=null!=t.highWaterMark?t.highWaterMark:i?t[r]:null;if(null!=o){if(!(isFinite(o)&&Math.floor(o)===o)||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},6922:(e,t,r)=>{e.exports=r(2100).EventEmitter},2981:(e,t,r)=>{(t=e.exports=r(5294)).Stream=t,t.Readable=t,t.Writable=r(6481),t.Duplex=r(3337),t.Transform=r(1683),t.PassThrough=r(8797),t.finished=r(3675),t.pipeline=r(5597)},8931:(e,t,r)=>{var n=r(4224);e.exports=function(e,t){var r,i,o,s=!0;function a(e){function i(){t&&t(e,r),t=null}s?n.nextTick(i):i()}function l(e,t,n){r[e]=n,(0==--i||t)&&a(t)}Array.isArray(e)?(r=[],i=e.length):(o=Object.keys(e),r={},i=o.length),i?o?o.forEach(function(t){e[t](function(e,r){l(t,e,r)})}):e.forEach(function(e,t){e(function(e,r){l(t,e,r)})}):a(null),s=!1}},1874:(e,t,r)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var n=r(5872),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},9793:(e,t,r)=>{"use strict";var n=r(2065),i=r(9837),o=function(e,t,r){for(var n,i=e;null!=(n=i.next);i=n)if(n.key===t)return i.next=n.next,r||(n.next=e.next,e.next=n),n},s=function(e,t){if(e){var r=o(e,t);return r&&r.value}},a=function(e,t,r){var n=o(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},l=function(e,t){if(e)return o(e,t,!0)};e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new i("Side channel does not contain "+n(e))},delete:function(t){var r=e&&e.next,n=l(e,t);return n&&r&&r===n&&(e=void 0),!!n},get:function(t){return s(e,t)},has:function(t){var r;return!!(r=e)&&!!o(r,t)},set:function(t,r){e||(e={next:void 0}),a(e,t,r)}};return t}},8373:(e,t,r)=>{"use strict";var n=r(2103),i=r(8350),o=r(2065),s=r(9837),a=n("%Map%",!0),l=i("Map.prototype.get",!0),u=i("Map.prototype.set",!0),c=i("Map.prototype.has",!0),f=i("Map.prototype.delete",!0),h=i("Map.prototype.size",!0);e.exports=!!a&&function(){var e,t={assert:function(e){if(!t.has(e))throw new s("Side channel does not contain "+o(e))},delete:function(t){if(e){var r=f(e,t);return 0===h(e)&&(e=void 0),r}return!1},get:function(t){if(e)return l(e,t)},has:function(t){return!!e&&c(e,t)},set:function(t,r){e||(e=new a),u(e,t,r)}};return t}},8511:(e,t,r)=>{"use strict";var n=r(2103),i=r(8350),o=r(2065),s=r(8373),a=r(9837),l=n("%WeakMap%",!0),u=i("WeakMap.prototype.get",!0),c=i("WeakMap.prototype.set",!0),f=i("WeakMap.prototype.has",!0),h=i("WeakMap.prototype.delete",!0);e.exports=l?function(){var e,t,r={assert:function(e){if(!r.has(e))throw new a("Side channel does not contain "+o(e))},delete:function(r){if(l&&r&&("object"==typeof r||"function"==typeof r)){if(e)return h(e,r)}else if(s&&t)return t.delete(r);return!1},get:function(r){return l&&r&&("object"==typeof r||"function"==typeof r)&&e?u(e,r):t&&t.get(r)},has:function(r){return l&&r&&("object"==typeof r||"function"==typeof r)&&e?f(e,r):!!t&&t.has(r)},set:function(r,n){l&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new l),c(e,r,n)):s&&(t||(t=s()),t.set(r,n))}};return r}:s},316:(e,t,r)=>{"use strict";var n=r(9837),i=r(2065),o=r(9793),s=r(8373),a=r(8511)||s||o;e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new n("Side channel does not contain "+i(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,r){e||(e=a()),e.set(t,r)}};return t}},8852:(e,t,r)=>{/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let n=r(5269)("simple-peer"),i=r(8835),o=r(7350),s=r(2981),a=r(2746),l=r(6693),{Buffer:u}=r(5872);function c(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}class f extends s.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=o(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||o(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||f.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},f.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:i(),!this._wrtc){if("undefined"==typeof window)throw l(Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT");throw l(Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT")}this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){this.destroy(l(e,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(e=>{this.destroy(l(e,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw l(Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(l(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(l(Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){let t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")||this.destroy(l(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw l(Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw l(Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(l(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw l(Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw l(Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let r=this._senderMap.get(e)||new Map,n=r.get(t);if(n){if(n.removed)throw l(Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED");throw l(Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}n=this._pc.addTrack(e,t),r.set(t,n),this._senderMap.set(e,r),this._needsNegotiation()}replaceTrack(e,t,r){if(this.destroying)return;if(this.destroyed)throw l(Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let n=this._senderMap.get(e),i=n?n.get(r):null;if(!i)throw l(Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,n),null!=i.replaceTrack?i.replaceTrack(t):this.destroy(l(Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw l(Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let r=this._senderMap.get(e),n=r?r.get(t):null;if(!n)throw l(Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{n.removed=!0,this._pc.removeTrack(n)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(n):this.destroy(l(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw l(Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw l(Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),a(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}))}_setupData(e){if(!e.channel)return this.destroy(l(Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=65536),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{this.destroy(l(e,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5e3)}_read(){}_write(e,t,r){if(this.destroyed)return r(l(Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(l(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=r):r(null)}else this._debug("write before connect"),this._chunk=e,this._cb=r}_onFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){!this.destroyed&&(this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout)))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=c(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let t=()=>{if(this.destroyed)return;let t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(l(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(l(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=c(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let t=()=>{if(this.destroyed)return;let t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(l(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(l(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"!==this._pc.connectionState||this.destroy(l(Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(l(Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(l(Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){let t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(r=>{let n=[];r.forEach(e=>{n.push(t(e))}),e(null,n)},t=>e(t)):this._pc.getStats.length>0?this._pc.getStats(r=>{if(this.destroyed)return;let n=[];r.result().forEach(e=>{let r={};e.names().forEach(t=>{r[t]=e.stat(t)}),r.id=e.id,r.type=e.type,r.timestamp=e.timestamp,n.push(t(r))}),e(null,n)},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let e=()=>{this.destroyed||this.getStats((t,r)=>{if(this.destroyed)return;t&&(r=[]);let n={},i={},o={},s=!1;r.forEach(e=>{("remotecandidate"===e.type||"remote-candidate"===e.type)&&(n[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(i[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(o[e.id]=e)});let a=e=>{s=!0;let t=i[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let r=n[e.remoteCandidateId];r&&(r.ip||r.address)?(this.remoteAddress=r.ip||r.address,this.remotePort=Number(r.port)):r&&r.ipAddress?(this.remoteAddress=r.ipAddress,this.remotePort=Number(r.portNumber)):"string"==typeof e.googRemoteAddress&&(r=e.googRemoteAddress.split(":"),this.remoteAddress=r[0],this.remotePort=Number(r[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(r.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)}),s||Object.keys(o).length&&!Object.keys(i).length)this._connecting=!1,this._connected=!0;else{setTimeout(e,100);return}if(this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(l(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>65536)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){!this.destroyed&&(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=u.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),a(()=>{this._debug("on stream"),this.emit("stream",t)}))})}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],n.apply(null,e)}}f.WEBRTC_SUPPORT=!!i(),f.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},f.channelConfig={},e.exports=f},497:(e,t,r)=>{var n=r(5872).Buffer;/*! simple-websocket. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let i=r(5269)("simple-websocket"),o=r(7350),s=r(2981),a=r(2746),l=r(5881),u="function"!=typeof l?WebSocket:l;class c extends s.Duplex{constructor(e={}){if("string"==typeof e&&(e={url:e}),super(e=Object.assign({allowHalfOpen:!1},e)),null==e.url&&null==e.socket)throw Error("Missing required `url` or `socket` option");if(null!=e.url&&null!=e.socket)throw Error("Must specify either `url` or `socket` option, not both");if(this._id=o(4).toString("hex").slice(0,7),this._debug("new websocket: %o",e),this.connected=!1,this.destroyed=!1,this._chunk=null,this._cb=null,this._interval=null,e.socket)this.url=e.socket.url,this._ws=e.socket,this.connected=e.socket.readyState===u.OPEN;else{this.url=e.url;try{"function"==typeof l?this._ws=new u(e.url,null,{...e,encoding:void 0}):this._ws=new u(e.url)}catch(e){a(()=>this.destroy(e));return}}this._ws.binaryType="arraybuffer",e.socket&&this.connected?a(()=>this._handleOpen()):this._ws.onopen=()=>this._handleOpen(),this._ws.onmessage=e=>this._handleMessage(e),this._ws.onclose=()=>this._handleClose(),this._ws.onerror=e=>this._handleError(e),this._handleFinishBound=()=>this._handleFinish(),this.once("finish",this._handleFinishBound)}send(e){this._ws.send(e)}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._handleFinishBound&&this.removeListener("finish",this._handleFinishBound),this._handleFinishBound=null,this._ws){let e=this._ws,t=()=>{e.onclose=null};if(e.readyState===u.CLOSED)t();else try{e.onclose=t,e.close()}catch(e){t()}e.onopen=null,e.onmessage=null,e.onerror=()=>{}}this._ws=null,e&&this.emit("error",e),this.emit("close"),t()}}_read(){}_write(e,t,r){if(this.destroyed)return r(Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(e){return this.destroy(e)}"function"!=typeof l&&this._ws.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=r):r(null)}else this._debug("write before connect"),this._chunk=e,this._cb=r}_handleOpen(){if(!this.connected&&!this.destroyed){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(e)}this._chunk=null,this._debug('sent chunk from "write before connect"');let e=this._cb;this._cb=null,e(null)}"function"!=typeof l&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_handleMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=n.from(t)),this.push(t)}_handleClose(){this.destroyed||(this._debug("on close"),this.destroy())}_handleError(e){this.destroy(Error(`Error connecting to ${this.url} (${e})`))}_handleFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?e():this.once("connect",e)}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>65536)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);let e=this._cb;this._cb=null,e(null)}_debug(){let e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],i.apply(null,e)}}c.WEBSOCKET_SUPPORT=!!u,e.exports=c},2699:(e,t,r)=>{"use strict";var n=r(1874).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:this.write=h,this.end=d;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,"�"}}(this,e,0);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=s(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=s(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},5319:function(e,t){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.BandwidthApproximator=void 0;var n=function(e,t){this.value=e,this.timeStamp=t};t.BandwidthApproximator=function(){var e=this;this.lastBytes=[],this.currentBytesSum=0,this.lastBandwidth=[],this.addBytes=function(t,r){for(e.lastBytes.push(new n(t,r)),e.currentBytesSum+=t;r-e.lastBytes[0].timeStamp>15e3;)e.currentBytesSum-=e.lastBytes.shift().value;var i=Math.min(15e3,r);e.lastBandwidth.push(new n(e.currentBytesSum/i,r))},this.getBandwidth=function(t){for(;0!==e.lastBandwidth.length&&t-e.lastBandwidth[0].timeStamp>6e4;)e.lastBandwidth.shift();var n,i,o=0;try{for(var s=r(e.lastBandwidth),a=s.next();!a.done;a=s.next()){var l=a.value;l.value>o&&(o=l.value)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o},this.getSmoothInterval=function(){return 15e3},this.getMeasureInterval=function(){return 6e4}}},6870:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(5269)),l=o(r(2100));r(6376),window.p2pml._shared={debug:a.default,events:l}},6376:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(270));window.p2pml||(window.p2pml={}),window.p2pml.core=s},3519:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpMediaManager=void 0;var u=r(4217),c=r(3502),f=r(8241),h=r(2793),d=r(3847),p=function(e){function t(t,r){var n=e.call(this)||this;return n.settings=t,n.metrics=r,n.xhrRequests=new Map,n.failedSegments=new Map,n.trackInfo=null,n.segments=[],n.requestHeaders={},n.setStreamSwarmId=function(e){n.streamSwarmId!==e&&(n.streamSwarmId=e,h.logUtils.log("[Download] set stream swarm ID",n.streamSwarmId))},n.getBaseUrl=function(){return n.baseUrl},n.setbaseUrl=function(e){n.baseUrl!==e&&(n.baseUrl=e,h.logUtils.log("[Download] CDN http baseUrl",n.baseUrl))},n.setupXhrRequestHeader=function(e){Object.keys(n.requestHeaders).forEach(function(t){e.setRequestHeader(t,n.requestHeaders[t])})},n.downloadRpdList=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",n.setupXhrRequestHeader(i),n.setupListXhrEvents(i,t,r),i.send()},n.setRequestHeaders=function(e,t){n.requestHeaders[e]=t},n.download=function(e,t){if(!n.isDownloading(e)){n.cleanTimedOutFailedSegments();var r,i,o=void 0!==n.baseUrl?n.baseUrl+"/"+e.url:e.url;n.segmentUriSuffix&&(o+=n.segmentUriSuffix),h.logUtils.log("[Download] http segment download",o),e.requestUrl=o;var s=new XMLHttpRequest;if(s.open("GET",o,!0),s.responseType="arraybuffer",n.setupXhrRequestHeader(s),void 0!==t&&n.settings.httpUseRanges){var a=0;try{for(var u=l(t),c=u.next();!c.done;c=u.next()){var f=c.value;a+=f.byteLength}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s.setRequestHeader("Range","bytes="+a+"-"),h.logUtils.log("[Download] http continue download from",a)}else t=void 0;n.setupXhrEvents(s,e,t),n.settings.xhrSetup&&n.settings.xhrSetup(s,o),n.xhrRequests.set(e.id,{xhr:s,segment:e}),s.send()}},n.abort=function(e){var t=n.xhrRequests.get(e.id);t&&(t.xhr.abort(),n.xhrRequests.delete(e.id),h.logUtils.warn("http segment abort",e.id))},n.isDownloading=function(e){return n.xhrRequests.has(e.id)},n.isFailed=function(e){var t=n.failedSegments.get(e.id);return void 0!==t&&t>n.now()},n.getActiveDownloads=function(){return n.xhrRequests},n.getActiveDownloadsCount=function(){return n.xhrRequests.size},n.destroy=function(){n.xhrRequests.forEach(function(e){return e.xhr.abort()}),n.xhrRequests.clear()},n.setSegmentUrlSuffix=function(e){n.segmentUriSuffix=e},n.setupListXhrEvents=function(e,t,r){void 0===r&&(r=!1),e.addEventListener("load",function(i){return s(n,void 0,void 0,function(){var n,i,o,s,l,u,p,g;return a(this,function(a){if(e.status<200||e.status>=300)return h.logUtils.error("http download segemnetlist error from cdn ",e.status),this.emit("segment-list-error",e.status),[2];if(n=e.response,this.metrics.recordStartupParams("first_index",Date.now()),i="",t?i=f.inflate(n,{to:"string"}):(o=new TextDecoder("utf-8"),s=new Uint8Array(n),i=o.decode(s)),r)u=(l=d.parsePlaylist(void 0!==this.streamSwarmId?this.streamSwarmId:"",i)).segments,p=l.byteSize,this.emit("segment-list",u),this.emit("segment-bytesize",p),this.metrics.recordStartupParams("stream_info",Date.now());else{if(void 0===(g=c.parsePlayListIndex(void 0!==this.streamSwarmId?this.streamSwarmId:"",i)))return h.logUtils.error("http parse rpdlist error ",i),[2];JSON.stringify(this.trackInfo)!=JSON.stringify(g.trackInfo)&&(this.trackInfo=g.trackInfo,this.emit("track-info",this.trackInfo)),JSON.stringify(this.segments)!=JSON.stringify(g.segments)&&(this.segments=g.segments,this.emit("segment-list",this.segments)),g.segments.find(function(e){return e.xFlag})&&this.emit("re-init",!0)}return[2]})})}),e.addEventListener("error",function(e){h.logUtils.error("http download segemnetlist error from cdn ",e),n.emit("segment-list-error",e)}),e.addEventListener("timeout",function(e){h.logUtils.error("http download segemnetlist timeout from cdn "),n.emit("segment-list-error","timeout")})},n.setupXhrEvents=function(e,t,r){var i=0;e.addEventListener("progress",function(e){var t=e.loaded-i;n.metrics.record("recv_ps_all_p",Number(n.metrics.getVariables("recv_ps_all_p")||0)+1),n.emit("bytes-downloaded",t),i=e.loaded}),e.addEventListener("load",function(i){return s(n,void 0,void 0,function(){var n,o,s,u,c,f,d,p,g,y,m,v,b;return a(this,function(a){switch(a.label){case 0:if(e.status<200||e.status>=300)return h.logUtils.error("http down load error ",t.url),this.segmentFailure(t,i,e),[2];if(n=e.response,void 0!==r&&206===e.status){o=0;try{for(u=(s=l(r)).next();!u.done;u=s.next())c=u.value,o+=c.byteLength}catch(e){y={error:e}}finally{try{u&&!u.done&&(m=s.return)&&m.call(s)}finally{if(y)throw y.error}}f=new Uint8Array(o+n.byteLength),d=0;try{for(g=(p=l(r)).next();!g.done;g=p.next())c=g.value,f.set(new Uint8Array(c),d),d+=c.byteLength}catch(e){v={error:e}}finally{try{g&&!g.done&&(b=p.return)&&b.call(p)}finally{if(v)throw v.error}}f.set(new Uint8Array(n),d),n=f.buffer}return[4,this.segmentDownloadFinished(t,n,e)];case 1:return a.sent(),[2]}})})}),e.addEventListener("error",function(r){h.logUtils.error("download segment error ",t.url),n.segmentFailure(t,r,e)}),e.addEventListener("timeout",function(r){h.logUtils.error("download segment timeout ",t.url),n.metrics.record("recv_ps_fail_p",Number(n.metrics.getVariables("recv_ps_fail_p")||0)+1),n.segmentFailure(t,r,e)})},n.segmentDownloadFinished=function(e,t,r){return s(n,void 0,void 0,function(){var n,i,s,l,u,c,f;return a(this,function(a){switch(a.label){case 0:if(e.responseUrl=null===r.responseURL?void 0:r.responseURL,n=(this.metrics.getVariables("recv_ts_ok_svr_p")||0)+1,null===(l=this.metrics)||void 0===l||l.record("recv_ts_ok_svr_p",n),!this.settings.segmentValidator)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.settings.segmentValidator(o(o({},e),{data:t}),"http")];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),h.logUtils.error("http segment validator failed",i),this.segmentFailure(e,i,r),[2];case 4:return h.logUtils.log("[Download] http download ok ",e.url),e.initSegment||(s=Date.now(),null===(u=this.metrics)||void 0===u||u.recordStartupParams("ts_use",s),null===(c=this.metrics)||void 0===c||c.recordStartupParams("first_gop",s),null===(f=this.metrics)||void 0===f||f.recordStartupParams("first_ts",s)),this.emit("segment-loaded",e,t),[2]}})})},n.segmentFailure=function(e,t,r){e.responseUrl=null===r.responseURL?void 0:r.responseURL,n.failedSegments.set(e.id,n.now()+n.settings.httpFailedSegmentTimeout),n.emit("segment-error",e,t)},n.cleanTimedOutFailedSegments=function(){var e=n.now(),t=[];n.failedSegments.forEach(function(r,n){r<e&&t.push(n)}),t.forEach(function(e){return n.failedSegments.delete(e)})},n.now=function(){return performance.now()},n}return i(t,e),t.prototype.segmentDealOk=function(e){this.xhrRequests.delete(e)},t}(u.STEEmitter);t.HttpMediaManager=p},5622:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},u=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HybridLoader=void 0;var h=r(2100),d=f(r(5200)),p=f(r(8852)),g=f(r(9787)),y=r(9205),m=r(7029),v=r(3519),b=r(236),w=r(1311),_=r(5319),S=r(4787),E=r(1815),T=r(6049),I=r(7921),k=r(2793),R=r(852),x=f(r(3795)),P=r(2615),A={cachedSegmentExpiration:3e5,cachedSegmentsCount:15,preloadSegmentsCount:6,useP2P:!0,consumeOnly:!1,requiredSegmentsPriority:2,simultaneousServerDownloads:2,serverDownloadProbability:.1,serverDownloadProbabilityInterval:1e3,serverDownloadProbabilitySkipIfNoPeers:!0,serverDownloadMaxPriority:20,serverDownloadInitialTimeout:0,serverDownloadInitialTimeoutPerSegment:4e3,httpFailedSegmentTimeout:1e4,httpUseRanges:!1,wrtFailedSegmentTimeout:18e4,simultaneousP2PDownloads:6,p2pDownloadMaxPriority:20,p2pSegmentDownloadTimeout:6e4,webRtcMaxMessageSize:65535,trackerAnnounce:["wss://tracker.novage.com.ua","wss://tracker.openwebtorrent.com"],params:{APKSN:"",APPVER:1,RELEASEID:""},player:null,reportPlayerStatus:!1,initSegmenNum:6,logReportHost:"https://dev-vod.wtracker.inner013.xyz",downloadPlayListIntervalms:2e3,rtcConfig:p.default.config},M=y.createBitField(y.ExceptionType.Player,y.ExceptionSubType.Unspecified),O=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;r.segmentsQueue=[],r.trimsegmentsQueue=[],r.bandwidthApproximator=new _.BandwidthApproximator,r.serverDownloadInitialTimeoutTimestamp=-1/0,r.cacheHeaderInfo=void 0,r.player=null,r.isInitPlay=!0,r.playerStartToPlayTime=0,r.playerBufferingTime=0,r.originalMediaId="",r.originalMediaIdMap={},r.downloadMap=new Map,r.downloadStatusMap=new Map,r.timeoutSegments=[],r.trackerClient=null,r.streamId="",r.isFirstDownLoadSegment=!0,r.downLoadSegmentBackwardsNum=-1,r.playerReadSegmentIdx=0,r.isRedboxes=!1,r.fileKey="",r.isLive=!0,r.isMPT=!1,r.isRpdVOD=!1,r.isPlayback=!1,r.initialOptions={},r.logTaskQueue=[],r.cachedSegmentsMap=new Map,r.segmentBytesMap=new Map,r.syncCacheToSegmentsMap=function(){return s(r,void 0,void 0,function(){var e,t,r;return a(this,function(n){switch(n.label){case 0:return[4,null===(r=null===(t=this.segmentsStorage)||void 0===t?void 0:t.syncCacheToSegmentsMap)||void 0===r?void 0:r.call(t)];case 1:return(e=n.sent())&&(this.cachedSegmentsMap=e),[2]}})})},r.setupLogReport=function(){var e=r.initialOptions.connectId,t=r.settings.logReportHost;k.logUtils.beforeLogTask.push(function(t,n,i){var o="["+t+"] ["+e+"] ["+n.toUpperCase()+"] "+i.join(" ");r.logTaskQueue.push(o)}),r.logIntervalId=setInterval(function(){if(r.logTaskQueue.length>20&&e&&t){var n=r.logTaskQueue.slice();r.logTaskQueue=[],fetch(t+"/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectId:e,logContent:k.base64Encode(n.join("\n"))})})}},5e3)},r.MP4Player=function(e,t){return s(r,void 0,void 0,function(){var r=this;return a(this,function(n){switch(n.label){case 0:if(n.trys.push([0,3,,4]),!this.isRedboxes)return[3,2];return[4,this.waitUntil(function(){return r.fileKey},1e5)];case 1:n.sent(),t.fileKey=this.fileKey,n.label=2;case 2:return[3,4];case 3:return n.sent(),[3,4];case 4:return this.player=R.MP4Player.call(this,e,t),this.reportPlayerStatus(),[2,this.player]}})})},r.reportPlayerStatus=function(){var e,t,n;if(r.player){var i=null===(n=null===(t=null===(e=r.player)||void 0===e?void 0:e.controlBar)||void 0===t?void 0:t.progressControl)||void 0===n?void 0:n.seekBar;r.player.on("ready",function(){null==i||i.on("mousedown",r.resetWaitUntilTimeID)}),r.player.on("error",function(){r.metrics.report(y.EVENT_TYPES.exception,{exp_type:M,exp_subtype:4097,exp_desc:"Player No Signal, timestamp: "+Date.now()})}),r.player.on("playing",function(){if(r.playerStartToPlayTime){var e=Date.now();if(e>r.playerBufferingTime){var t=Number(((e-r.playerStartToPlayTime)/1e3).toFixed(1)),n=Number(((e-r.playerBufferingTime)/1e3).toFixed(1));r.metrics.report(y.EVENT_TYPES.buffering,{player_type:100,extra:1001,play_dur:t,buf_dur:n}),r.playerBufferingTime=0}}else r.playerStartToPlayTime=Date.now()}),r.player.on("loadeddata",function(e){return s(r,void 0,void 0,function(){var e,t,r,n=this;return a(this,function(i){switch(i.label){case 0:e=this.metrics.getPublicParams("init_time"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.waitUntil(function(){return[n.metrics.getStartupParams("first_ts")>0,n.metrics.getStartupParams("stream_info")>0].every(function(e){return e})},18e4)];case 2:case 3:return i.sent(),[3,4];case 4:return r=(t=Date.now())-e,k.logUtils.log("[SDK] player 记录起播总耗时:",r),["total","dec_open","audec","videc","aurend","virend"].forEach(function(e){n.metrics.recordStartupParams(e,t)}),this.metrics.report(0),[2]}})})}),r.player.on("waiting",function(){r.playerBufferingTime=Date.now(),k.logUtils.log("[SDK] player waiting")})}},r.recordStartPlayTime=function(){r.metrics.recordPublicParams("init_time",Date.now())},r.setHttpAndWrtManagerStreamId=function(){r.streamId&&(r.wrtManager.setStreamSwarmId(r.streamId),r.httpManager.setStreamSwarmId(r.streamId))},r.getReportOptions=function(){return s(r,void 0,void 0,function(){var e,t,r,n,i,c,f=this;return a(this,function(h){switch(h.label){case 0:if(e={localMedias:[]},this.cdnUrl)return[2,e];return[4,null===(c=null===(i=this.segmentsStorage)||void 0===i?void 0:i.getAllKeys)||void 0===c?void 0:c.call(i)];case 1:return[4,Promise.all((r=u([],l(new Set((t=h.sent()||[]).map(function(e){return e.split("/")[0]}))))).map(function(e){var t,r;return null===(r=null===(t=f.segmentsStorage)||void 0===t?void 0:t.getVideoBasic)||void 0===r?void 0:r.call(t,e)}))];case 2:return n=h.sent(),r.forEach(function(r){return s(f,void 0,void 0,function(){var i,s,l;return a(this,function(a){return i=t.filter(function(e){return e.startsWith(r)}).length,s=null===(l=n.find(function(e){return e&&e.streamId===r}))||void 0===l?void 0:l.info,e.localMedias.push(o(o({mediaId:r},s||{}),{cachedCnt:i})),[2]})})}),[2,e]}})})},r.getTrackerAndWrtOptions=function(e){var t=r.initialOptions,n=t.cloudSource,i=t.extra,s=t.EXTRA,a=t.fileId,l=t.DURATION,u=t.STARTUTC,c=P(r.initialOptions,["connectId","playType","APKSN","RELEASEID","APPVER","ever","cid"]),f=o({},e),h=o({},c);if(r.isRpdVOD||r.isMPT){var p=["mediaId","fileId","fileKey","fileSize","cloudSource","cloudUserName","cloudPwd","cloudLoginType","playMode","vnoId","extra"];r.isMPT&&p.push("PLAYTYPE");var g=P(r.initialOptions,p);f=o(o(o({},f),{getReportOptions:r.getReportOptions}),g),h=o(o({},h),g);var y=encodeURIComponent(a),m=d.default.enc.Base64.stringify(d.default.enc.Utf8.parse(y));r.isMPT?(delete h.extra,delete h.playType,delete h.cloudSource,h.EXTRA=s||i,h.playSource=n,f.fileId=m):(f.fileId=m,h.fileId=m,h.EXTRA=s||i,h.playSource=n)}else r.isPlayback&&(f.startTime=u,f.range=l,f.getReportOptions=r.getReportOptions,h.PLAYTYPE=h.playType,delete h.playType,h=o(o(o({},h),P(r.initialOptions,["DURATION","STARTUTC","STREAM_ID"])),{FORMAT:r.settings.params.FORMAT||1}));return{trackerOptions:f,wrtOptions:h}},r.play=function(e){r.playerStartToPlayTime=0,r.reportPlayerStatus();var t,n,i,o=e.streamId,s=e.fileId,a=e.mediaId;k.logUtils.log("[SDK] PlayOptions streamId/fileId/mediaId:",o,s,a),r.recordStartPlayTime(),o&&(r.metrics.recordPublicParams("stream_id",o),r.streamId=o,r.masterSwarmId=o,null===(n=null===(t=r.segmentsStorage)||void 0===t?void 0:t.setStreamSwarmId)||void 0===n||n.call(t,o),r.setHttpAndWrtManagerStreamId(),r.p2pManager.setStreamSwarmId(r.streamId)),(s||a)&&(r.masterSwarmId=void 0,a&&(r.originalMediaId=a));var l=r.getTrackerAndWrtOptions(e),u=l.trackerOptions,c=l.wrtOptions;r.wrtManager.setOptions(c),null===(i=r.trackerClient)||void 0===i||i.startPlay(u),r.metrics.recordPublicParams("stream_id",o||a),r.initialOptions.vnoId&&r.metrics.recordPublicParams("vno_id",r.initialOptions.vnoId)},r.stop=function(){r.wrtManager.destroy(),r.httpManager.destroy(),r.metrics.clear(),r.segmentsQueue=[],r.resetWaitUntilTimeID(),void 0!==r.dataDownloadInterval&&(clearInterval(r.dataDownloadInterval),r.dataDownloadInterval=void 0),r.wrtDownloadInterval&&(clearInterval(r.wrtDownloadInterval),r.wrtDownloadInterval=void 0)},r.createWrtManager=function(){return new w.WrtMediaManager(r.settings,r.metrics)},r.createHttpManager=function(){return new v.HttpMediaManager(r.settings,r.metrics)},r.createP2PManager=function(){return new b.P2PMediaManager(r.segmentsStorage,r.settings,r.metrics)},r.onSegmentList=function(e){return s(r,void 0,void 0,function(){var t,r,n,i,o,s,l,u,f,h,d,p,g,y,v,b,w,_,S,E,T,I,k;return a(this,function(a){switch(a.label){case 0:void 0===this.serverRandomDownloadInterval&&this.isLive&&(this.serverRandomDownloadInterval=setInterval(this.downloadRandomSegmentOverServer,this.settings.serverDownloadProbabilityInterval),this.settings.serverDownloadInitialTimeout>0&&this.settings.serverDownloadInitialTimeoutPerSegment>0&&(this.serverDownloadInitialTimeoutTimestamp=this.now(),setTimeout(this.processInitialSegmentTimeout,this.settings.serverDownloadInitialTimeoutPerSegment+100))),e.length>0&&(this.masterSwarmId=e[0].masterSwarmId),t=!1,r=function(r){e.find(function(e){return e.url===r.url})||(n.wrtManager.isDownloading(r)?(t=!0,n.wrtManager.abort(r)):n.httpManager.isDownloading(r)?(t=!0,n.httpManager.abort(r)):n.p2pManager.abort(r),n.emit(m.Events.SegmentAbort,r))},n=this;try{for(o=(i=c(this.segmentsQueue)).next();!o.done;o=i.next())s=o.value,r(s)}catch(e){E={error:e}}finally{try{o&&!o.done&&(T=i.return)&&T.call(i)}finally{if(E)throw E.error}}if(!(this.isLive&&(!0===t||this.segmentsQueue.length<=0)))return[3,2];return l=this,[4,this.trimSegmentList(e)];case 1:if(l.trimsegmentsQueue=a.sent(),!0===t)try{for(f=(u=c(this.trimsegmentsQueue)).next();!f.done;f=u.next())s=f.value,this.wrtManager.isDownloading(s)?(t=!0,this.wrtManager.abort(s)):this.httpManager.isDownloading(s)?(t=!0,this.httpManager.abort(s)):this.p2pManager.abort(s),this.emit(m.Events.SegmentAbort,s)}catch(e){I={error:e}}finally{try{f&&!f.done&&(k=u.return)&&k.call(u)}finally{if(I)throw I.error}}return[3,3];case 2:if(this.trimsegmentsQueue.length>0)for(g=0,h=function(t){var r=d.trimsegmentsQueue[t];e.find(function(e){return e.url===r.url})||d.trimsegmentsQueue.splice(t--,1),p=t},d=this;g<this.trimsegmentsQueue.length;g++)h(g),g=p;a.label=3;case 3:for(g=0,y=function(t){var r=e[t];v.trimsegmentsQueue.find(function(e){return e.url===r.url})&&e.splice(t--,1),b=t},v=this;g<e.length;g++)y(g),g=b;if(e.forEach(function(e){delete e.data}),this.segmentsQueue=e,void 0===this.masterSwarmId)return[2];return[4,this.cleanSegmentsStorage()];case 4:return a.sent(),w=this.cachedSegmentsMap,[4,this.processSegmentsQueue(w)];case 5:return(a.sent()||t)&&!this.settings.consumeOnly&&this.p2pManager.sendSegmentsMapToAll(this.masterSwarmId,this.createSegmentsMap(w)),"LIVE"!==this.settings.params.playType&&(S=1e3*parseInt((null==(_=e.find(function(e){return!e.initSegment}))?void 0:_.videoDuration)||"")||4e3,void 0!==this.downLoadPlayListInterval&&clearInterval(this.downLoadPlayListInterval),this.dataDownloadInterval=setInterval(this.downloadData,S),void 0!==this.cleanSegmentsInterval&&clearInterval(this.cleanSegmentsInterval),this.cleanSegmentsInterval=setInterval(this.cleanSegmentsStorage,18e4)),[2]}})})},r.getWrtDownloadingInfo=function(){var e,t,n=[],i=r.wrtManager.peers;try{for(var o=c(i.values()),s=o.next();!s.done;s=o.next()){var a=s.value;a.isAvailable&&n.push(a.id)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return{wrtPeers:i,wrtAvailablePeers:n}},r.downloadData=function(){return s(r,void 0,void 0,function(){var e,t,r,n;return a(this,function(i){return this.cdnUrl||(t=(e=this.getWrtDownloadingInfo()).wrtPeers,r=e.wrtAvailablePeers,n=this.getDownloadSegments(),t.size&&k.logUtils.log("[Download] wrt data-channel counts: "+t.size+", available data-channel counts: "+r.length+", downloading segments: "+n.map(function(e){return l(e,1)[0]}).join(", ")+", playerReadSegmentIdx: "+this.playerReadSegmentIdx+", segment id: "+this.segmentsQueue[this.playerReadSegmentIdx].url),0===t.size&&k.logUtils.log("[Download] there is no any available wrt data-channel to download segments!")),void 0!==this.masterSwarmId&&this.processSegmentsQueue(),[2]})})},r.trimSegmentList=function(e){return s(r,void 0,void 0,function(){var t,r,n,i;return a(this,function(o){switch(o.label){case 0:t=void 0!==this.settings.initSegmenNum?this.settings.initSegmenNum+1:4,r=e.length-t,n=[],i=0,o.label=1;case 1:if(!(i<e.length))return[3,6];if(!0!==e[i].initSegment)return[3,2];return[3,5];case 2:return[4,this.segmentsStorage.getSegment(e[i].url,this.masterSwarmId||"")];case 3:void 0===o.sent()&&(n.push(e[i]),e.splice(i--,1)),o.label=4;case 4:if(--r<=0)return[3,6];o.label=5;case 5:return i++,[3,1];case 6:return[2,n]}})})},r.onHeaderInfo=function(e){return s(r,void 0,void 0,function(){return a(this,function(t){return this.cacheHeaderInfo?this.cacheHeaderInfo.sh!==e.sh&&(this.emit("header-info",e),this.cacheHeaderInfo=Object.assign({},e)):this.cacheHeaderInfo=e,[2]})})},r.onReInit=function(e){r.emit("re-init",e)},r.onTrackInfo=function(e){return s(r,void 0,void 0,function(){return a(this,function(t){return this.trackInfo=e,[2]})})},r.resetWaitUntilTimeID=function(){var e;(null===(e=r.waitUntilTimeIds)||void 0===e?void 0:e.length)&&(r.waitUntilTimeIds.forEach(function(e){return clearInterval(e)}),r.waitUntilTimeIds=[])},r.removeWaitUntilTimeID=function(e){var t;(null===(t=r.waitUntilTimeIds)||void 0===t?void 0:t.length)&&r.waitUntilTimeIds.splice(r.waitUntilTimeIds.indexOf(e),1)},r.waitUntil=function(e,t,n){void 0===t&&(t=1e4),void 0===n&&(n=150);var i,o,l,u=Date.now(),c=new Promise(function(e,t){o=e,l=t}),f=function(){return s(r,void 0,void 0,function(){var r;return a(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return(r=n.sent())?(clearInterval(i),this.removeWaitUntilTimeID(i),o(r)):t>0&&Date.now()-u>=t&&(clearInterval(i),this.removeWaitUntilTimeID(i),l(Error("waitUntil 超时："+e))),[2]}})})};return i=setInterval(f,n),r.waitUntilTimeIds||(r.waitUntilTimeIds=[]),r.waitUntilTimeIds.push(i),f(),c.catch(function(e){k.logUtils.log("[WaitUntil] timeout message: "+e.message)}),c},r.reconnectTracker=function(e){var t=r.generateAnnounceURL(e),n=t.trackerParams,i=t.announce;r.trackerClient.peerId=e,r.trackerClient._getAnnounceOpts=function(){return o({},n)},r.trackerClient.reconnect(i)},r.recordMetrics=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=r.metrics).record.apply(e,u([],l(t)))},r.reportMetrics=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=r.metrics).report.apply(e,u([],l(t)))},r.reportMetricsOne=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=r.metrics).reportOnce.apply(e,u([],l(t)))},r.getFirstFloorM3u8=function(){if(r.trackInfo)return r.metrics.recordStartupParams("stream_info",Date.now()),T.generateFirstFloorM3u8(r.trackInfo)},r.getRedboxFilekey=function(){return r.fileKey},r.getByteRangeByKey=function(e){var t=e.split("/")[1],r=Number(t.split("_")[0]),n=Number(t.split("_")[1]);return{segmentName:t,segmentStart:r,segmentEnd:n}},r.getVideoSegmentsM3u8=function(e){if(!(r.segmentsQueue.length<=0))return T.generateVideoSegmentsM3u8(r.segmentsQueue,r.isLive,r.trackInfo)},r.getAudioSegmentsM3u8=function(e){if(!(r.segmentsQueue.length<=0))return T.generateAudioSegmentsM3u8(r.segmentsQueue,r.isLive,r.trackInfo)},r.setPlayerReadIdx=function(e,t){var n,i;-1===t&&(t=0),r.playerReadSegmentIdx=t,!0===r.isFirstDownLoadSegment&&0!==t&&(r.downLoadSegmentBackwardsNum=r.segmentsQueue.length-r.playerReadSegmentIdx,r.isFirstDownLoadSegment=!1),null===(i=null===(n=r.segmentsStorage)||void 0===n?void 0:n.setVideoBasic)||void 0===i||i.call(n,{lastPlayCursor:t},e)},r.getSegmentBytesData=function(e,t,n){return s(r,void 0,void 0,function(){var r,i,o,s,f,h,d,p,g,y,m,v,b,w,_,S,E,T,I,R,x,P,A,M,O,C,B,D,L,U,N,j,F,z,q,W,H=this;return a(this,function(V){switch(V.label){case 0:if(t=Number(t)||0,n=Number(n)||0,!e||!this.settings.params.fileSize)return k.logUtils.warn("getSegmentBytesData mediaId or fileSize is empty"),[2,null];if(t>=n)return[2,null];return r=this.settings.params.fileSize-1,t<0&&(t=0),n>r&&(n=r),i=null,o=[],f=n-t+1,h=[],d=this.originalMediaIdMap[e],[4,null===(z=null===(F=this.segmentsStorage)||void 0===F?void 0:F.getAllKeys)||void 0===z?void 0:z.call(F,function(e){return e.filter(function(e){return e.startsWith(d)})})];case 1:if(!(p=V.sent()))return[2,i];for(p.sort(function(e,t){return H.getByteRangeByKey(e).segmentStart-H.getByteRangeByKey(t).segmentStart}),g=0;g<p.length&&(y=p[g],v=(m=this.getByteRangeByKey(y)).segmentStart,b=m.segmentEnd,w=v<=t&&b>=n,n<v||t>b||(_=Math.max(t,v)-v,S=Math.min(n,b)-v,h.push({key:y,i:g,originStart:v,originEnd:b,start:_,end:S,length:S-_+1}),!w));g++);if(T=(E=h.reduce(function(e,t){return e+t.length},0))<f,!E)return I=this.segmentsQueue.findIndex(function(e){return t>=e.videoRangeBegin&&t<=e.videoRangeEnd}),this.setPlayerReadIdx(d,I),[2,i];V.label=2;case 2:return V.trys.push([2,4,,5]),[4,this.waitUntil(function(){return H.segmentsQueue.length>0},18e4)];case 3:case 4:return V.sent(),[3,5];case 5:if(T)return R=0,x=h[0],P=h[h.length-1],x.originStart>t?R=t:x.originEnd>n?R=x.originEnd:P.originEnd<n?R=n:P.originEnd>n&&(R=P.originEnd),I=this.segmentsQueue.findIndex(function(e){return R>=e.videoRangeBegin&&R<=e.videoRangeEnd}),A=Math.ceil((f-E)/512/1024),M=this.segmentsQueue.slice(I,I+A+1).map(function(e){return e.url}),k.logUtils.log("[Download] wait to download segments: "+M.join(", ")),this.setPlayerReadIdx(d,I),[2,i];O=0,C=function(e){var t,r,n,i;return a(this,function(a){switch(a.label){case 0:return t=e.key,r=e.start,n=e.end,[4,B.segmentsStorage.getSegment(t,d)];case 1:return i=null===(W=null===(q=null==(s=a.sent())?void 0:s.data)||void 0===q?void 0:q.slice)||void 0===W?void 0:W.call(q,r,n+1),o.push(i),O===h.length-1&&B.setPlayerReadIdx(d,B.segmentsQueue.findIndex(function(e){return t.endsWith(e.id)})),O++,[2]}})},B=this,V.label=6;case 6:V.trys.push([6,11,12,13]),L=(D=c(h)).next(),V.label=7;case 7:if(L.done)return[3,10];return U=L.value,[5,C(U)];case 8:V.sent(),V.label=9;case 9:return L=D.next(),[3,7];case 10:return[3,13];case 11:return N={error:V.sent()},[3,13];case 12:try{L&&!L.done&&(j=D.return)&&j.call(D)}finally{if(N)throw N.error}return[7];case 13:return i=k.concatenate.apply(void 0,u([],l(o))),this.segmentBytesMap.has(t+"-"+n)?this.segmentBytesMap.set(t+"-"+n,Number(this.segmentBytesMap.get(t+"-"+n))+1):this.segmentBytesMap.set(t+"-"+n,1),[2,i||null]}})})},r.getSegmentData=function(e,t){return s(r,void 0,void 0,function(){var e,r,n,i,o;return a(this,function(s){switch(s.label){case 0:if(e=!1,r="",t.startsWith("audio_"))e=!0,r=t.substring(6);else{if(!t.startsWith("video_"))return[2,null];e=!1,r=t.substring(6)}if(r.length<=0||void 0===this.masterSwarmId)return[2,null];return this.playerReadSegmentIdx=this.segmentsQueue.findIndex(function(e){return e.id===r}),-1===this.playerReadSegmentIdx&&(this.playerReadSegmentIdx=0),[4,this.segmentsStorage.getSegment(r,this.masterSwarmId)];case 1:if((n=s.sent())&&n.data)return k.logUtils.log("[Player] get segment uri, data ok ",t," ",n.audioRangeBegin,"-",n.audioRangeEnd," ",n.videoRangeBegin,"-",n.videoRangeEnd,":",e),!0===this.isFirstDownLoadSegment&&!1===n.initSegment&&(this.downLoadSegmentBackwardsNum=this.segmentsQueue.length-this.playerReadSegmentIdx,this.isFirstDownLoadSegment=!1),null===(o=null===(i=this.segmentsStorage)||void 0===i?void 0:i.setVideoBasic)||void 0===o||o.call(i,{lastPlayCursor:this.playerReadSegmentIdx},this.streamId),[2,!1===e?n.data.slice(n.videoRangeBegin,n.videoRangeEnd):n.data.slice(n.audioRangeBegin,n.audioRangeEnd)];return[2,null]}})})},r.getSegment=function(e){return void 0===r.masterSwarmId?Promise.resolve(void 0):r.segmentsStorage.getSegment(e,r.masterSwarmId)},r.getSettings=function(){return r.settings},r.getDetails=function(){return{peerId:r.p2pManager.getPeerId()}},r.destroy=function(){return s(r,void 0,void 0,function(){return a(this,function(e){return k.logUtils.log("[SDK] destroy....."),void 0!==this.serverRandomDownloadInterval&&(clearInterval(this.serverRandomDownloadInterval),this.serverRandomDownloadInterval=void 0),void 0!==this.downLoadPlayListInterval&&(clearInterval(this.downLoadPlayListInterval),this.downLoadPlayListInterval=void 0,this.cdnUrl=void 0),void 0!==this.cleanSegmentsInterval&&(clearInterval(this.cleanSegmentsInterval),this.cleanSegmentsInterval=void 0),void 0!==this.dataDownloadInterval&&(clearInterval(this.dataDownloadInterval),this.dataDownloadInterval=void 0),this.wrtDownloadInterval&&(clearInterval(this.wrtDownloadInterval),this.wrtDownloadInterval=void 0),this.logIntervalId&&(clearInterval(this.logIntervalId),this.logIntervalId=void 0),this.trackerClient&&(this.trackerClient.stop(),this.trackerClient.destroy(),this.trackerClient=null),this.serverDownloadInitialTimeoutTimestamp=-1/0,this.segmentsQueue=[],this.resetWaitUntilTimeID(),this.wrtManager.destroy(),this.httpManager.destroy(),this.p2pManager.destroy(),this.metrics.destroy(),this.masterSwarmId=void 0,this.isLive&&this.segmentsStorage.destroy(),[2]})})},r.processInitialSegmentTimeout=function(){return s(r,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:if(void 0===this.serverRandomDownloadInterval)return[2];if(!(void 0!==this.masterSwarmId))return[3,2];return e=this.cachedSegmentsMap,[4,this.processSegmentsQueue(e)];case 1:t.sent()&&!this.settings.consumeOnly&&this.p2pManager.sendSegmentsMapToAll(this.masterSwarmId,this.createSegmentsMap(e)),t.label=2;case 2:return this.serverDownloadInitialTimeoutTimestamp!==-1/0&&setTimeout(this.processInitialSegmentTimeout,this.settings.serverDownloadInitialTimeoutPerSegment),[2]}})})},r.getDownloadSegments=function(){return Array.from(r.downloadStatusMap.entries()).filter(function(e){return 0===l(e,2)[1]})},r.processSegmentsQueue=function(e){return s(r,void 0,void 0,function(){var t,r,n,i,o,s,l,u,c,f,h,d,p,g,y,m,v;return a(this,function(a){if(void 0===this.masterSwarmId||0===this.segmentsQueue.length)return[2,!1];for(t=!1,r=!0,this.serverDownloadInitialTimeoutTimestamp!==-1/0&&(n=void 0,void 0!==e&&(n=null==(i=this.segmentsQueue.find(function(t){return!e.has(t.id)}))?void 0:i.priority),(r=(o=this.now()-this.serverDownloadInitialTimeoutTimestamp)>=this.settings.serverDownloadInitialTimeout||void 0!==n&&o>this.settings.serverDownloadInitialTimeoutPerSegment&&n<=0)&&(this.serverDownloadInitialTimeoutTimestamp=-1/0)),s=this.isLive?0:this.playerReadSegmentIdx,l=this.segmentsQueue,u=this.settings.preloadSegmentsCount,c=s;c<l.length&&(this.isLive||!(c>s+u)||0!==this.p2pManager.getPeers().size)&&(!(this.p2pManager.getPeers().size>0)||!(c>s+u));c++)if(f=l[c],!(this.cachedSegmentsMap.has(this.masterSwarmId+"/"+f.id)||this.wrtManager.isDownloading(f)||this.httpManager.isDownloading(f)||this.p2pManager.isDownloading(f))){if(h=this.p2pManager.getOverallSegmentsMap(),d=this.getWrtDownloadingInfo().wrtAvailablePeers,p=this.getDownloadSegments(),g=d.length,this.isLive&&(this.downLoadSegmentBackwardsNum<=l.length-c||0===this.p2pManager.getPeers().size||!h.has(f.id))||!this.isLive&&r&&(p.length<g||0===this.wrtManager.getPeers().size)&&(0===this.p2pManager.getPeers().size||!h.has(f.id)||this.timeoutSegments.includes(f.id))&&!this.httpManager.isFailed(f)){if(this.downloadStatusMap.has(f.url)||this.downloadStatusMap.set(f.url,0),this.wrtManager.getPeers().size>0){0===this.downloadMap.size&&0===c&&this.emit("start_download",Date.now()),this.downloadMap.has(f.url)||this.downloadMap.set(f.url,{start:Date.now()}),y=this.p2pManager.abort(f),this.wrtManager.download(f,y),t=!0;continue}if(this.wrtManager.getPeers().size<=0&&void 0!==this.httpManager.getBaseUrl()&&this.httpManager.getActiveDownloadsCount()<this.settings.simultaneousServerDownloads){y=this.p2pManager.abort(f),this.httpManager.download(f,y),k.logUtils.log("[Download] HTTP download (priority)",f.priority,f.url),t=!0;continue}}if(this.downLoadSegmentBackwardsNum<=l.length-c){if(h.get(f.id)!==E.MediaPeerSegmentStatus.Loaded)continue;if(this.p2pManager.getActiveDownloadsCount()>=this.settings.simultaneousP2PDownloads){for(m=l.length-1;m>c;m--)if(v=l[m],this.p2pManager.isDownloading(v)){k.logUtils.log("[Download] cancel P2P download",v.priority,v.url),this.p2pManager.abort(v);break}}this.p2pManager.getActiveDownloadsCount()<this.settings.simultaneousP2PDownloads&&this.p2pManager.download(f);continue}p.length<this.settings.simultaneousP2PDownloads&&this.p2pManager.download(f)&&(this.downloadStatusMap.has(f.url)||this.downloadStatusMap.set(f.url,0),k.logUtils.log("[Download] p2p download",f.priority,f.url))}return[2,t]})})},r.downloadRandomSegmentOverServer=function(){return s(r,void 0,void 0,function(){var e,t,r,n,i=this;return a(this,function(o){switch(o.label){case 0:if(void 0===this.masterSwarmId||void 0===this.serverRandomDownloadInterval||this.serverDownloadInitialTimeoutTimestamp!==-1/0||this.settings.serverDownloadProbabilitySkipIfNoPeers&&0===this.p2pManager.getPeers().size||this.settings.consumeOnly||this.httpManager.getActiveDownloadsCount()>=this.settings.simultaneousServerDownloads)return[2];return[4,this.getCacheSegmentsMap(this.masterSwarmId)];case 1:if(e=o.sent(),t=this.p2pManager.getOverallSegmentsMap(),0===(r=this.segmentsQueue.filter(function(r){return!i.p2pManager.isDownloading(r)&&!i.httpManager.isDownloading(r)&&!i.wrtManager.isDownloading(r)&&!t.has(r.id)&&!i.httpManager.isFailed(r)&&r.priority<=i.settings.serverDownloadMaxPriority&&!e.has(r.id)})).length||Math.random()>this.settings.serverDownloadProbability*r.length)return[2];return n=r[Math.floor(Math.random()*r.length)],this.wrtManager.getPeers().size>0?(k.logUtils.log("[Download] wrt download (random)",n.priority,n.url),this.wrtManager.download(n),this.p2pManager.sendSegmentsMapToAll(this.masterSwarmId,this.createSegmentsMap(e))):void 0!==this.httpManager.getBaseUrl()&&(k.logUtils.log("[Download] Http download (random)",n.priority,n.url),this.httpManager.download(n),this.p2pManager.sendSegmentsMapToAll(this.masterSwarmId,this.createSegmentsMap(e))),[2]}})})},r.onPieceBytesDownloaded=function(e,t,n){r.bandwidthApproximator.addBytes(t,r.now()),r.emit(m.Events.PieceBytesDownloaded,e,t,n);var i="p2p"===e?"recv_ts_ok_bytes_peer_p":"recv_ts_ok_bytes_svr_p";r.metrics.record(i,Number(r.metrics.getVariables(i)||0)+t)},r.onPieceBytesUploaded=function(e,t,n){r.emit(m.Events.PieceBytesUploaded,e,t,n)},r.onP2pSegmentRequest=function(e,t){return s(r,void 0,void 0,function(){var r,n,i,o,s,l;return a(this,function(a){switch(a.label){case 0:return k.logUtils.log("[P2PShare] segment:"+e.id+" share to peers"),[4,null===(o=null===(i=this.segmentsStorage)||void 0===i?void 0:i.getVideoBasic)||void 0===o?void 0:o.call(i,t)];case 1:return n=((null==(r=a.sent())?void 0:r.curShareCnt)||0)+1,null===(l=null===(s=this.segmentsStorage)||void 0===s?void 0:s.setVideoBasic)||void 0===l||l.call(s,{lastShareTs:Date.now(),curShareCnt:n},t),[2]}})})},r.onSegmentLoaded=function(e,t,n){return s(r,void 0,void 0,function(){var r,i,o,s,l;return a(this,function(a){switch(a.label){case 0:if(void 0===this.masterSwarmId)return[2];return e.data=t,e.downloadBandwidth=this.bandwidthApproximator.getBandwidth(this.now()),this.downloadMap.has(e.url)&&((r=this.downloadMap.get(e.url)||{}).end=Date.now(),i=r.end-r.start,k.logUtils.log("[Download] wrt-"+n+" segment loaded, "+e.url+", download cost time: "+i+" ms")),this.downloadStatusMap.has(e.url)&&this.downloadStatusMap.set(e.url,1),-1!==(o=this.timeoutSegments.findIndex(function(t){return t===e.id}))&&this.timeoutSegments.splice(o,1),s=JSON.parse(JSON.stringify(e)),"LIVE"!==this.settings.params.playType&&delete s.data,this.httpManager.segmentDealOk(s.id),this.wrtManager.segmentDealOk(s.id),this.p2pManager.segmentDealOk(s.id),[4,this.segmentsStorage.storeSegment(e)];case 1:if(a.sent(),this.cachedSegmentsMap&&this.cachedSegmentsMap.set(this.masterSwarmId+"/"+e.id,{segment:s}),"LIVE"!==this.settings.params.playType&&delete e.data,!(void 0!==this.masterSwarmId))return[3,3];return l=this.cachedSegmentsMap,[4,this.processSegmentsQueue(l)];case 2:a.sent()&&!this.settings.consumeOnly&&this.p2pManager.sendSegmentsMapToAll(this.masterSwarmId,this.createSegmentsMap(l)),a.label=3;case 3:return[2]}})})},r.onSegmentError=function(e,t,n){return s(r,void 0,void 0,function(){var r,i,o;return a(this,function(s){switch(s.label){case 0:for(k.logUtils.log("[Download] segment error",e.id,e.url,n,t),this.metrics.report(y.EVENT_TYPES.exception,{exp_type:M,exp_subtype:4097,exp_desc:"Download Segement Error - segment id: "+e.id+", segment url: "+e.url+", details: "+JSON.stringify(t)}),this.emit(m.Events.SegmentError,e,t,n),r=0;r<this.segmentsQueue.length;r++)if((i=this.segmentsQueue[r]).url==i.url){this.segmentsQueue.splice(r,1),this.trimsegmentsQueue.push(i);break}if(this.wrtManager.segmentDealOk(e.id),this.httpManager.segmentDealOk(e.id),this.p2pManager.segmentDealOk(e.id),!(void 0!==this.masterSwarmId))return[3,2];return o=this.cachedSegmentsMap,[4,this.processSegmentsQueue(o)];case 1:s.sent()&&!this.settings.consumeOnly&&this.p2pManager.sendSegmentsMapToAll(this.masterSwarmId,this.createSegmentsMap(o)),s.label=2;case 2:return[2]}})})},r.getCacheSegmentsMap=function(e){return s(r,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.segmentsStorage.getSegmentsMap(e)];case 1:return[2,t.sent()]}})})},r.onP2pSegmentTimeout=function(e,t){return s(r,void 0,void 0,function(){var t;return a(this,function(r){return(t=this.segmentsQueue.find(function(t){return t.id===e}))&&this.downloadStatusMap.has(t.url)&&this.downloadStatusMap.delete(t.url),this.timeoutSegments.includes(e)||this.timeoutSegments.push(e),[2]})})},r.onP2pSegmentError=function(e,t,n){return s(r,void 0,void 0,function(){var r;return a(this,function(i){switch(i.label){case 0:if(k.logUtils.log("[Download] p2p segment error",e.id,e.url,n,t),this.metrics.report(y.EVENT_TYPES.exception,{exp_type:M,exp_subtype:4097,exp_desc:"Download P2P Segement Error - segment id: "+e.id+", segment url: "+e.url+", details: "+JSON.stringify(t)}),this.downloadStatusMap.has(e.url)&&this.downloadStatusMap.delete(e.url),!(void 0!==this.masterSwarmId))return[3,2];return r=this.cachedSegmentsMap,[4,this.processSegmentsQueue(r)];case 1:i.sent()&&!this.settings.consumeOnly&&this.p2pManager.sendSegmentsMapToAll(this.masterSwarmId,this.createSegmentsMap(r)),i.label=2;case 2:return[2]}})})},r.getStreamSwarmId=function(e){return e.masterSwarmId},r.createSegmentsMap=function(e){var t,n,i,o,s,a,l={},u=function(e,t){var n=r.getStreamSwarmId(e),i=e.id,o=l[n];void 0===o&&(o=["",[]],l[n]=o);var s=o[1];o[0]+=0===s.length?i:"|"+i,s.push(t)};try{for(var f=c(e.values()),h=f.next();!h.done;h=f.next()){var d=h.value;u(d.segment,E.MediaPeerSegmentStatus.Loaded)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}try{for(var p=c(r.httpManager.getActiveDownloads().values()),g=p.next();!g.done;g=p.next()){var y=g.value;u(y.segment,E.MediaPeerSegmentStatus.LoadingByServer)}}catch(e){i={error:e}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}try{for(var m=c(r.wrtManager.getActiveDownloads().values()),v=m.next();!v.done;v=m.next()){var b=v.value;u(b.segment,E.MediaPeerSegmentStatus.LoadingByServer)}}catch(e){s={error:e}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}return l},r.onPeerConnect=function(e){return s(r,void 0,void 0,function(){var t,r,n,i;return a(this,function(o){switch(o.label){case 0:if(this.emit(m.Events.PeerConnect,e),!(!this.settings.consumeOnly&&void 0!==this.masterSwarmId))return[3,2];return r=(t=this.p2pManager).sendSegmentsMap,n=[e.streamId,e.id],i=this.createSegmentsMap,[4,this.getCacheSegmentsMap(e.streamId)];case 1:r.apply(t,n.concat([i.apply(this,[o.sent()])])),o.label=2;case 2:return[2]}})})},r.onPeerClose=function(e){r.emit(m.Events.PeerClose,e)},r.onTrackerUpdate=function(e){return s(r,void 0,void 0,function(){var t;return a(this,function(r){switch(r.label){case 0:if(!(this.serverDownloadInitialTimeoutTimestamp!==-1/0&&void 0!==e.incomplete&&e.incomplete<=1)||(this.serverDownloadInitialTimeoutTimestamp=-1/0,!(void 0!==this.masterSwarmId)))return[3,2];return t=this.cachedSegmentsMap,[4,this.processSegmentsQueue(t)];case 1:r.sent()&&!this.settings.consumeOnly&&this.p2pManager.sendSegmentsMapToAll(this.masterSwarmId,this.createSegmentsMap(t)),r.label=2;case 2:return[2]}})})},r.cleanSegmentsStorage=function(){return s(r,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:if(void 0===this.masterSwarmId)return[2,!1];return[4,this.segmentsStorage.clean(this.masterSwarmId,this.isLive?function(t){return void 0!==e.segmentsQueue.find(function(e){return e.id===t})}:void 0,this.isLive?void 0:function(t){var r,n;return(null===(n=(r=e.segmentsQueue).findIndex)||void 0===n?void 0:n.call(r,function(e){return e.id===t}))===0})];case 1:return t.sent().forEach(function(t){e.cachedSegmentsMap.has(e.masterSwarmId+"/"+t)&&e.cachedSegmentsMap.delete(e.masterSwarmId+"/"+t)}),[2,!0]}})})},r.now=function(){return performance.now()},r.generateAnnounceURL=function(e){var t=r.settings.params,n="LIVE"===t.playType?6e3:"VOD"===t.playType?7e3:8e3,i={connectId:e||t.connectId,protocol:t.protocol||0,msgType:n,releaseId:t.RELEASEID||100200,playType:t.playType,peerType:t.peerType||0,FORMAT:t.FORMAT||1,engineVer:t.ever||1},o=r.settings.trackerAnnounce+"?"+g.default.stringify(i);return{trackerParams:i,announce:o}},r.createClient=function(){var e=r.settings.params,t=r.generateAnnounceURL(),n=t.trackerParams,i=t.announce,s={infoHash:r.streamId,peerId:e.connectId,announce:i,rtcConfig:r.settings.rtcConfig,port:6881,useP2P:r.settings.useP2P,getAnnounceOpts:function(){return o({},n)}};r.trackerClient=new x.default(s,r.metrics),r.trackerClient.on("error",r.onTrackerError),r.trackerClient.on("warning",r.onTrackerWarning),r.trackerClient.on("update",r.onTrackerUpdate),r.trackerClient.on("peer",r.onTrackerPeer),r.trackerClient.on("peer-timeout",r.onTrackerPeerTimeout),r.trackerClient.on("peer-close",r.onTrackerPeerClose),r.trackerClient.on("cdn",r.onTrackerCdn),r.trackerClient.on("server-response",r.onTrackerServerResponse),r.trackerClient.on("connect",r.onTrackerConnect),r.trackerClient.on("reconnect",function(){return r.emit("reconnect-tracker")}),r.trackerClient.on("server-recieve",function(){}),r.trackerClient.on("indexName",r.onTrackerIndexName),r.trackerClient.on("recieveMediaId",r.onRecieveMediaId),r.trackerClient.on("report-response",r.onReportResponse),r.trackerClient.start()},r.onTrackerConnect=function(){var e,t;null===(e=r.metrics)||void 0===e||e.recordStartupParams("tr_rtt",Date.now()),null===(t=r.metrics)||void 0===t||t.record("tr_st",1),k.logUtils.log("[Tracker] tracker connected")},r.onTrackerError=function(e){var t,n;k.logUtils.log("[Tracker] tracker error",e),r.metrics.report(y.EVENT_TYPES.exception,{exp_type:M,exp_subtype:4097,exp_desc:"Tracker Error: "+e}),null===(t=r.metrics)||void 0===t||t.record("tr_st",0),null===(n=r.metrics)||void 0===n||n.record("ts_svr_st",0)},r.onTrackerIndexName=function(e){r.wrtManager.setIndxName(e)},r.onRecieveMediaId=function(e){var t,n;r.streamId=e,r.masterSwarmId=e,r.originalMediaIdMap[r.originalMediaId]=e,null===(n=null===(t=r.segmentsStorage)||void 0===t?void 0:t.setStreamSwarmId)||void 0===n||n.call(t,e),r.setHttpAndWrtManagerStreamId(),r.p2pManager.setStreamSwarmId(r.streamId),r.downloadData()},r.onReportResponse=function(e){return s(r,void 0,void 0,function(){var t,r,n=this;return a(this,function(i){switch(i.label){case 0:return[4,null===(r=null===(t=this.segmentsStorage)||void 0===t?void 0:t.removeSegments)||void 0===r?void 0:r.call(t,e.removeMedias||[],!1)];case 1:return(i.sent()||[]).forEach(function(e){n.cachedSegmentsMap.has(e)&&n.cachedSegmentsMap.delete(e)}),[2]}})})},r.onTrackerWarning=function(e){k.logUtils.log("[Tracker] warning",e)},r.onTrackerPeer=function(e){var t;"web"===e.peerType?(k.logUtils.log("[Tracker] try to add media peer(p2p peer)",e.id),r.p2pManager.addTrackerPeer(e)):"wrt"===e.peerType?(null===(t=r.metrics)||void 0===t||t.record("cdn",0),k.logUtils.log("[Tracker] try to add wm/wrt data-channel peer",e.id),r.metrics.report(y.EVENT_TYPES.status,"ts_svr_st",1),r.wrtManager.addTrackerPeer(e),void 0!==r.downLoadPlayListInterval&&(clearInterval(r.downLoadPlayListInterval),r.downLoadPlayListInterval=void 0,r.cdnUrl=void 0)):k.logUtils.log("[Tracker] error tracker peer type",e.peerType)},r.onTrackerPeerTimeout=function(e){r.wrtManager.cleanUpClosePeer(e)},r.onTrackerPeerClose=function(e){r.p2pManager.cleanUpClosePeer(e),r.onPeerClose(e.id)},r.onTrackerServerResponse=function(e){r.isMPT&&(r.settings.params["Proxy-AuthId"]=e.proxyAuthId),r.isRedboxes&&(r.fileKey=e.fileKey,r.emit("fileKey",e.fileKey)),1===e.serverType&&r.metrics.recordPublicParams("prt_sv_id",e.serverId)},r.onTrackerCdn=function(e,t,n,i){k.logUtils.log("[Tracker] add cdn",e),null===(o=r.metrics)||void 0===o||o.record("cdn",1),r.cdnUrl=e,r.wrtManager.getPeers().size>0&&r.wrtManager.destroy();var o,s=new URL(e),a=s.origin+s.pathname;r.httpManager.setbaseUrl(a.substring(0,a.lastIndexOf("/"))),t&&r.httpManager.setSegmentUrlSuffix("?resId="+t+"&authId="+n),r.isMPT||r.isRpdVOD?(r.httpManager.setRequestHeaders("Auth-Token",i.proxyAuthId),r.downloadPlayListFromCdn()):void 0===r.downLoadPlayListInterval&&(r.downLoadPlayListInterval=setInterval(r.downloadPlayListFromCdn,r.settings.downloadPlayListIntervalms))},r.downloadPlayListFromCdn=function(){return s(r,void 0,void 0,function(){var e,t;return a(this,function(r){return void 0!==this.cdnUrl&&(e=this.settings.params.playType,t=this.cdnUrl.includes(".gz.")||"LIVE"===e&&this.cdnUrl.endsWith(".rpd"),this.httpManager.downloadRpdList(this.cdnUrl,t,this.isMPT)),[2]})})},t=k.cleanObject(t),r.initialOptions=t.params||{};var n=r.initialOptions,i=n.connectId,f=n.playType,h=n.playMode,p=n.RELEASEID,O=n.cloudSource;if(!i||!p)throw Error("setting param is not enough");if(t.preloadSegmentsCount&&t.cachedSegmentsCount&&t.preloadSegmentsCount>t.cachedSegmentsCount)throw Error("preloadSegmentsCount can not greater than cachedSegmentsCount(maximum 1000)");var C=t.bufferedSegmentsCount;return r.isLive="LIVE"===f,r.isMPT="VOD"===f&&"MPT"===h,r.isRpdVOD="VOD"===f&&"RPD_PORTAL"===h,r.isPlayback="CRT"===f,r.isRedboxes="REDBOXES"===O,("VOD"===f||r.isPlayback)&&(A.cachedSegmentExpiration=18e5,A.cachedSegmentsCount=1e3,A.preloadSegmentsCount=20),r.settings=o(o({},A),t),"number"==typeof C&&(void 0===t.p2pDownloadMaxPriority&&(r.settings.p2pDownloadMaxPriority=C),void 0===t.serverDownloadMaxPriority&&(r.settings.p2pDownloadMaxPriority=C)),r.player=r.settings.player,r.setupLogReport(),r.metrics=new y.Metrics(t),r.metrics.recordPublicParams("cid",+i),r.createClient(),r.segmentsStorage=void 0===r.settings.segmentsStorage?"LIVE"===f?new S.SegmentsMemoryStorage(r.settings):new I.SegmentsIndexedDBStorage(r.settings):r.settings.segmentsStorage,r.isLive||r.cleanSegmentsStorage(),r.metrics.recordPublicParams("cid",+i),k.logUtils.log("[SDK] settings",k.stringify(r.settings)),r.wrtManager=r.createWrtManager(),r.wrtManager.on("segment-loaded",r.onSegmentLoaded),r.wrtManager.on("segment-error",r.onSegmentError),r.wrtManager.on("bytes-downloaded",function(e){return r.onPieceBytesDownloaded("wrt",e)}),r.wrtManager.on("segment-list",r.onSegmentList),r.wrtManager.on("re-init",r.onReInit),r.wrtManager.on("header-info",r.onHeaderInfo),r.wrtManager.on("track-info",r.onTrackInfo),r.httpManager=r.createHttpManager(),r.httpManager.on("segment-list",r.onSegmentList),r.httpManager.on("re-init",r.onReInit),r.httpManager.on("header-info",r.onHeaderInfo),r.httpManager.on("track-info",r.onTrackInfo),r.httpManager.on("segment-loaded",r.onSegmentLoaded),r.httpManager.on("segment-error",r.onSegmentError),r.httpManager.on("bytes-downloaded",function(e){return r.onPieceBytesDownloaded("http",e)}),r.p2pManager=r.createP2PManager(),r.p2pManager.on("segment-loaded",r.onSegmentLoaded),r.p2pManager.on("segment-timeout",r.onP2pSegmentTimeout),r.p2pManager.on("segment-error",r.onP2pSegmentError),r.p2pManager.on("segment-request",r.onP2pSegmentRequest),r.p2pManager.on("peer-data-updated",function(){return s(r,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:if(void 0===this.masterSwarmId)return[2];return e=this.cachedSegmentsMap,[4,this.processSegmentsQueue(e)];case 1:return t.sent()&&!this.settings.consumeOnly&&this.p2pManager.sendSegmentsMapToAll(this.masterSwarmId,this.createSegmentsMap(e)),[2]}})})}),r.p2pManager.on("bytes-downloaded",function(e,t){return r.onPieceBytesDownloaded("p2p",e,t)}),r.p2pManager.on("bytes-uploaded",function(e,t){return r.onPieceBytesUploaded("p2p",e,t)}),r.p2pManager.on("peer-connected",r.onPeerConnect),r.p2pManager.on("peer-closed",r.onPeerClose),r.p2pManager.on("tracker-update",r.onTrackerUpdate),r.isLive||r.syncCacheToSegmentsMap(),r}return i(t,e),t.isSupported=function(){return void 0!==window.RTCPeerConnection.prototype.createDataChannel},t}(h.EventEmitter);t.HybridLoader=O},270:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,/**
 * @license Apache-2.0
 * Copyright 2018 Novage LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.version="0.6.2",i(r(7029),t),i(r(5622),t)},7029:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0,function(e){e.SegmentLoaded="segment_loaded",e.SegmentError="segment_error",e.SegmentAbort="segment_abort",e.PeerConnect="peer_connect",e.PeerClose="peer_close",e.PieceBytesDownloaded="piece_bytes_downloaded",e.PieceBytesUploaded="piece_bytes_uploaded",e.FirstFloorM3u8Parsed="first_floor_m3u8_parsed",e.StartDownload="start_download"}(t.Events||(t.Events={}))},6049:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.generateAudioSegmentsM3u8=t.generateVideoSegmentsM3u8=t.generateFirstFloorM3u8=void 0;var o=r(2793);t.generateFirstFloorM3u8=function(e){var t=["#EXTM3U","#EXT-X-INDEPENDENT-SEGMENTS"],r=e.filter(function(e){return -1!==e.audioId}),s=e.filter(function(e){return -1!==e.videoId}),a=1===r.length,l=1===s.length,u=r.map(function(e){var t=a?"audio.m3u8":"audio_"+e.audioId+".m3u8",r=a?"audio":"audio-"+e.audioId;return a&&0===s.length?"#EXT-X-STREAM-INF:BANDWIDTH="+e.audioBandWidth+',CODECS="'+e.audioCodec+'"\naudio.m3u8':'#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="agroup",URI="'+t+'",NAME="'+r+'",AUTOSELECT=YES'}),c=s.map(function(e){var t=l?"video.m3u8":"video_"+e.videoId+".m3u8",r="";return e.videoFramRate&&(r=",FRAME-RATE="+e.videoFramRate),"#EXT-X-STREAM-INF:BANDWIDTH="+e.videoBandWidth+",RESOLUTION="+e.videoResolution+r+',CODECS="'+e.videoCodec+'",AUDIO="agroup"\n'+t});return t=u.length>0||c.length>0?(t=i(i(i([],n(t)),n(u)),n(c))).join("\n"):void 0,o.logUtils.log("[M3U8] index: "+t),t},t.generateVideoSegmentsM3u8=function(e,t,r){if(!(e.length<=0)){for(var n=0,i=0,o="",s=0;s<e.length;s++)if(!1===e[s].initSegment&&0===n&&(n=Number(e[s].sequence),i=parseInt(e[s].videoDuration)),!0===e[s].initSegment){var a=r.find(function(e){return -1!==e.videoId});o+='#EXT-X-KEY:METHOD=NONE\n#EXT-X-MAP:URI="video_'+e[s].url+'"\n',(null==a?void 0:a.keyInfo)&&(o+=a.keyInfo+"\n")}else o+="#EXTINF:"+e[s].videoDuration+",\nvideo_"+e[s].url+"\n",e[s].xFlag&&(o+="#EXT-X-DISCONTINUITY\n");return!1===t&&(o+="#EXT-X-ENDLIST"),"#EXTM3U\n#EXT-X-VERSION:6"+(t?"":"\n#EXT-X-PLAYLIST-TYPE:VOD")+"\n#EXT-X-TARGETDURATION:"+i+"\n#EXT-X-MEDIA-SEQUENCE:"+n+"\n"+o}},t.generateAudioSegmentsM3u8=function(e,t,r){if(!(e.length<=0)){for(var n=0,i=0,o="",s=0;s<e.length;s++)if(!1===e[s].initSegment&&0===n&&(n=Number(e[s].sequence),i=parseInt(e[s].audioDuration)),!0===e[s].initSegment){var a=r.find(function(e){return -1!==e.audioId});o+='#EXT-X-KEY:METHOD=NONE\n#EXT-X-MAP:URI="audio_'+e[s].url+'"\n',(null==a?void 0:a.keyInfo)&&(o+=a.keyInfo+"\n")}else o+="#EXTINF:"+e[s].audioDuration+",\naudio_"+e[s].url+"\n",e[s].xFlag&&(o+="#EXT-X-DISCONTINUITY\n");return!1===t&&(o+="#EXT-X-ENDLIST"),"#EXTM3U\n#EXT-X-VERSION:6"+(t?"":"\n#EXT-X-PLAYLIST-TYPE:VOD")+"\n#EXT-X-TARGETDURATION:"+i+"\n#EXT-X-MEDIA-SEQUENCE:"+n+"\n"+o}}},1815:function(e,t,r){"use strict";var n,i,o,s,a,l=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaPeer=t.MediaPeerSegmentStatus=void 0;var f=c(r(5343)),h=r(4217),d=r(9205),p=r(2793),g=d.createBitField(d.ExceptionType.Player,d.ExceptionSubType.Unspecified);(n=s||(s={}))[n.SegmentData=0]="SegmentData",n[n.SegmentAbsent=1]="SegmentAbsent",n[n.SegmentsMap=2]="SegmentsMap",n[n.SegmentRequest=3]="SegmentRequest",n[n.CancelSegmentRequest=4]="CancelSegmentRequest",(i=a=t.MediaPeerSegmentStatus||(t.MediaPeerSegmentStatus={}))[i.Loaded=0]="Loaded",i[i.LoadingByServer=1]="LoadingByServer";var y=function(e,t){this.id=e,this.size=t,this.bytesDownloaded=0,this.pieces=[]},m=function(e){function t(t,r,n,i){var o=e.call(this)||this;return o.streamId=t,o.peer=r,o.settings=n,o.metrics=i,o.remoteAddress="",o.downloadingSegmentId=null,o.downloadingSegment=null,o.segmentsMap=new Map,o.timer=null,o.onPeerConnect=function(){p.logUtils.log("[P2PShare] media peer connected",o.id),o.remoteAddress=o.peer.remoteAddress,o.emit("connect",o)},o.onPeerClose=function(){p.logUtils.log("[P2PShare] media peer closed",o.id),o.terminateSegmentRequest(),o.emit("close",o)},o.onPeerError=function(e){p.logUtils.log("[P2PShare] media peer error",o.id,e),o.metrics.report(d.EVENT_TYPES.exception,{exp_type:g,exp_subtype:4097,exp_desc:"media peer Error: Peer id: "+o.id+", "+e})},o.receiveSegmentPiece=function(e){if(!o.downloadingSegment){p.logUtils.log("[P2PShare] media peer segment not requested",o.id);return}o.downloadingSegment.bytesDownloaded+=e.byteLength,o.downloadingSegment.pieces.push(e),o.emit("bytes-downloaded",o,e.byteLength);var t,r,n=o.downloadingSegment.id;if(o.downloadingSegment.bytesDownloaded===o.downloadingSegment.size){var i=new Uint8Array(o.downloadingSegment.size),s=0;try{for(var a=u(o.downloadingSegment.pieces),l=a.next();!l.done;l=a.next()){var c=l.value;i.set(new Uint8Array(c),s),s+=c.byteLength}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}p.logUtils.log("[P2PShare] media peer segment download done",o.id,n),o.terminateSegmentRequest(),o.emit("segment-loaded",o,n,i.buffer)}else o.downloadingSegment.bytesDownloaded>o.downloadingSegment.size&&(p.logUtils.log("[P2PShare] media peer segment download bytes mismatch",o.id,n),o.terminateSegmentRequest(),o.emit("segment-error",o,n,"Too many bytes received for segment"))},o.getJsonCommand=function(e){var t=new Uint8Array(e);if(123===t[0]&&34===t[1]&&125===t[e.byteLength-1])try{return JSON.parse(new TextDecoder().decode(e))}catch(e){}return null},o.onPeerData=function(e){var t=o.getJsonCommand(e);if(null===t){o.receiveSegmentPiece(e);return}if(o.downloadingSegment){p.logUtils.log("[P2PShare] media peer segment download is interrupted by a command",o.id);var r=o.downloadingSegment.id;o.terminateSegmentRequest(),o.emit("segment-error",o,r,"Segment download is interrupted by a command");return}var n=["SegmentData","SegmentAbsent","SegmentsMap","SegmentRequest","CancelSegmentRequest"][t.c];switch(t.c){case s.SegmentsMap:o.streamId&&o.streamId===t.d&&(o.segmentsMap=o.createSegmentsMap(t.m),p.logUtils.log("[P2PShare] media peer receive command:",n),o.emit("data-updated"));break;case s.SegmentRequest:o.emit("segment-request",o,t.i,t.d),p.logUtils.log("[P2PShare] media peer receive command:",n,t.i);break;case s.SegmentData:o.streamId&&o.streamId===t.d&&o.downloadingSegmentId&&o.downloadingSegmentId===t.i&&"number"==typeof t.s&&t.s>=0&&(o.downloadingSegment=new y(t.i,t.s),p.logUtils.log("[P2PShare] media peer receive command:",n,t.i));break;case s.SegmentAbsent:o.streamId&&o.streamId===t.d&&o.downloadingSegmentId&&o.downloadingSegmentId===t.i&&(o.terminateSegmentRequest(),o.segmentsMap.delete(t.i),o.emit("segment-absent",o,t.i));case s.CancelSegmentRequest:}},o.createSegmentsMap=function(e){if(!(e instanceof Object))return new Map;var t,r,n=new Map;try{for(var i=u(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=e[o.value];if(!(s instanceof Array)||2!==s.length||"string"!=typeof s[0]||!(s[1]instanceof Array))return new Map;var l=s[0].split("|"),c=s[1];if(l.length!==c.length)return new Map;for(var f=0;f<l.length;f++){var h=c[f];if("number"!=typeof h||void 0===a[h])return new Map;n.set(l[f],h)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},o.sendCommand=function(e){var t=["SegmentData","SegmentAbsent","SegmentsMap","SegmentRequest","CancelSegmentRequest"][e.c]||"";p.logUtils.log("[P2PShare] media peer send command",t),o.peer.write(JSON.stringify(e))},o.destroy=function(){p.logUtils.log("media peer destroy",o.id),o.terminateSegmentRequest(),o.peer.destroy()},o.getPeer=function(){return o.peer},o.getDownloadingSegmentId=function(){return o.downloadingSegmentId},o.getSegmentsMap=function(){return o.segmentsMap},o.sendSegmentsMap=function(e,t){o.sendCommand({c:s.SegmentsMap,d:e,m:t})},o.sendSegmentData=function(e,t,r){if(!o.peer.destroyed){o.sendCommand({c:s.SegmentData,d:e,i:t,s:r.byteLength});for(var n=r.byteLength;n>0;){var i=n>=o.settings.webRtcMaxMessageSize?o.settings.webRtcMaxMessageSize:n,a=f.default.wrap(r,r.byteLength-n,i).view;o.peer.write(a),n-=i}o.emit("bytes-uploaded",o,r.byteLength)}},o.sendSegmentAbsent=function(e,t){null!==o.streamId&&o.sendCommand({c:s.SegmentAbsent,i:t,d:e})},o.requestSegment=function(e){if(null!==o.streamId){if(o.downloadingSegmentId){p.logUtils.warn("A segment is already downloading: "+o.downloadingSegmentId,"request segment id:",e);return}o.sendCommand({c:s.SegmentRequest,i:e,d:o.streamId}),o.downloadingSegmentId=e,o.runResponseTimeoutTimer()}},o.cancelSegmentRequest=function(){if(null!==o.streamId){if(o.downloadingSegmentId){var e,t=o.downloadingSegmentId;e=o.downloadingSegment?o.downloadingSegment.pieces:void 0,o.terminateSegmentRequest(),o.sendCommand({c:s.CancelSegmentRequest,i:t,d:o.streamId})}return e}},o.runResponseTimeoutTimer=function(){o.cancelResponseTimeoutTimer(),o.timer=setTimeout(function(){if(o.timer=null,p.logUtils.warn("[P2PShare] download segment timeout:",o.downloadingSegmentId),o.downloadingSegmentId){var e=o.downloadingSegmentId;o.cancelSegmentRequest(),o.emit("segment-timeout",o,e)}},o.settings.p2pSegmentDownloadTimeout)},o.cancelResponseTimeoutTimer=function(){o.timer&&(clearTimeout(o.timer),o.timer=null)},o.terminateSegmentRequest=function(){o.downloadingSegmentId=null,o.downloadingSegment=null,o.cancelResponseTimeoutTimer()},o.peer.on("connect",o.onPeerConnect),o.peer.on("close",o.onPeerClose),o.peer.on("error",o.onPeerError),o.peer.on("data",o.onPeerData),o.id=r.id,o}return l(t,e),t}(h.STEEmitter);t.MediaPeer=m},9205:function(e,t,r){"use strict";var n,i,o,s,a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createBitField=t.ExceptionSubType=t.ExceptionType=t.EVENT_TYPES=t.Metrics=void 0;var u=l(r(8241)),c=l(r(5200)),f=r(2793),h=l(r(5343)),d={appId:"web-engine-app-id",appKey:"web-engine-app-key",value:""},p={tr_st:0,ts_svr_st:1,conn_peers:0,peer_num:0,cdn:0,index_total_times:0,index_fail_times:0,recv_ps_all_p:0,recv_ps_fail_p:0,recv_ps_try_p:0,recv_ts_fail:0,total_lost_rtt:0,play_dur:0,recv_ts_ok_svr_p:0,recv_ts_ok_peer_p:0,recv_ts_ok_bytes_svr_p:0,recv_ts_ok_bytes_peer_p:0,recv_ts_ok_bytes_turbo_p:0,m_play_ok_1min:99999,m_play_rate:1,dec_rate:0,ren_rate:0,engine_delay:0,play_delay:0},g={tr_rtt:0,first_tr:0,prt_rtt:0,first_index:0,first_gop:0,ts_use:0,first_ts:0,stream_info:0,dec_open:0,audec:0,videc:0,aurend:0,virend:0,total:0,player_type:100};function y(e,t){return Object.keys(e).forEach(function(r){Reflect.has(t,r)&&(e[r]=t[r]||0)}),e}var m=function(){function e(e){var t;void 0===e&&(e={}),this.publicParams={vno_id:"unknown",app_name:"unknown",vno_uid:"unknown",did:"unknown",cid:12313213,aver:0xed847e5d05,ever:12323,pver:1,sver:123444,brand:"unknown",model:"unknown",cpu:"unknown",stream_id:"",stream_type:0,prt_sv_id:"unknown",tr_sv_id:"unknown",platform:3,init_time:0,ref_time:0},this.startupParams=f.jsonClone(g),this._variableMap={},this._cacheMap=new Map,this.paramsList=[],this.setStreamTypeByPlayType(null===(t=e.params)||void 0===t?void 0:t.playType),y(this.publicParams,e.params||{}),this.reportHost=null==e?void 0:e.reportHost,this._cacheMap=new Map,this.reportRealtimeStatus(),this.debounceSendReport=f.debounce(this.sendReport,1e3)}return e.prototype.setStreamTypeByPlayType=function(e){var t=-1;switch(e){case"LIVE":t=0;break;case"CRT":t=1;break;case"VOD":t=2}this.publicParams.stream_type=t},e.prototype.recordPublicParams=function(e,t){this.publicParams[e]=t},e.prototype.recordStartupParams=function(e,t){this.startupParams[e]<=0&&(this.startupParams[e]=t)},e.prototype.getVariables=function(e){return e?this._variableMap[e]:this._variableMap},e.prototype.getPublicParams=function(e){return e?this.publicParams[e]:this.publicParams},e.prototype.getStartupParams=function(e){return e?this.startupParams[e]:this.startupParams},e.prototype.record=function(e,t){this._variableMap[e]=t},e.prototype.recordOnce=function(e,t){Reflect.has(this._variableMap,e)||(this._variableMap[e]=t)},e.prototype.generateParamsToBase64=function(e){void 0===e&&(e=this.paramsList);var t=JSON.stringify(e),r=u.default.deflate(h.default.wrap(t).view,{level:9}),n=c.default.lib.WordArray.create(r);return{isEmpty:0===e.length,valueStr:t,value:encodeURIComponent(c.default.enc.Base64.stringify(n))}},e.prototype.generateParams=function(e,t){var r=this.paramsList.find(function(t){return t.name===e});if(r)r.fieldsMap=a(a({},r.fieldsMap),t);else{var n=Date.now()-Number(this.publicParams.init_time);this.publicParams.ref_time=n,this.paramsList.push({name:e,fieldsMap:a(a({},this.publicParams),t)})}},e.prototype.sendReport=function(e){var t=this.generateParamsToBase64(),r=t.isEmpty,n=t.value,i=t.valueStr;r||(f.logUtils.log("[Metrics] report params: "+i),f.xhrRequest({url:(this.reportHost||"http://15.204.22.126:2082")+"/metric/batchpost/v1",method:"POST",data:a(a({},d),{value:n}),success:e}))},e.prototype.reportRealtimeStatus=function(){var e=this;this._intervalId=setInterval(function(){var t,r=y(f.jsonClone(p),e._variableMap),n=r.recv_ts_ok_bytes_svr_p,i=r.recv_ts_ok_bytes_peer_p,o=r.recv_ps_fail_p,a=r.recv_ps_all_p,l=function(e){return e<0||e>100663296};(l(n)||l(i))&&(r.recv_ts_ok_bytes_svr_p=0,r.recv_ts_ok_bytes_peer_p=0),r.play_dur=Number(((Date.now()-(null===(t=e.publicParams)||void 0===t?void 0:t.init_time))/1e3).toFixed(1)),r.total_lost_rtt=Number((o/(a+o)*100).toFixed(2)),e.generateParams(s.status,r),e.debounceSendReport(function(){var t=e.paramsList.findIndex(function(e){return e.name===s.status});-1!==t&&e.paramsList.splice(t,1),y(e._variableMap,{index_total_times:0,index_fail_times:0,recv_ps_all_p:0,recv_ps_fail_p:0,recv_ps_try_p:0,recv_ts_fail:0,total_lost_rtt:0,play_dur:0,recv_ts_ok_svr_p:0,recv_ts_ok_peer_p:0,recv_ts_ok_bytes_svr_p:0,recv_ts_ok_bytes_peer_p:0,recv_ts_ok_bytes_turbo_p:0})})},12e4)},e.prototype.report=function(e,t,r){var n=this;if(this.publicParams.init_time){switch(e){case 0:case s.startup:var i=f.jsonClone(g);Object.keys(this.startupParams).forEach(function(e){"player_type"===e?i[e]=n.startupParams[e]:i[e]=n.startupParams[e]-n.publicParams.init_time}),this.generateParams(s.startup,i);break;case 1:case s.exception:this.generateParams(s.exception,t);break;case 2:case s.buffering:this.generateParams(s.buffering,t)}this.debounceSendReport(function(){n.paramsList=[]})}},e.prototype.reportOnce=function(e,t,r){this._cacheMap.has(t)||(this.report(e,t,r),this._cacheMap.set(t,!0))},e.prototype.destroy=function(){clearInterval(this._intervalId),this._intervalId=void 0,this._cacheMap=new Map,this._variableMap={}},e.prototype.clear=function(){this._cacheMap=new Map,this._variableMap={}},e}();t.Metrics=m,(n=s=t.EVENT_TYPES||(t.EVENT_TYPES={})).startup="rapid_agent_startup",n.status="rapid_agent_status",n.buffering="rapid_agent_buffering",n.exception="rapid_agent_exception",n.common="rapid_agent_common",(i=t.ExceptionType||(t.ExceptionType={}))[i.Unspecified=0]="Unspecified",i[i.SDK=1]="SDK",i[i.Engine=2]="Engine",i[i.Player=3]="Player",(o=t.ExceptionSubType||(t.ExceptionSubType={}))[o.Unspecified=0]="Unspecified",o[o.Login=1]="Login",o[o.Startup=2]="Startup",t.createBitField=function(e,t){if(e<0||e>3)throw Error("Exception Type must be between 0 and 3");if(t<0||t>2)throw Error("Exception SubType must be between 0 and 2");return e<<29|t<<21}},7203:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.channel=t.Receiver=t.Sender=t.once=t.OnceReceiver=t.OnceSender=void 0;var i=function(){function e(e){this.waker=e}return e.prototype.send=function(e){this.waker(e)},e}();t.OnceSender=i;var o=function(){function e(e){var t=this;this.promise=e.then(function(e){return t.data=e,e})}return e.prototype.recv=function(){return this.promise},e.prototype.tryRecv=function(){return this.data},e}();t.OnceReceiver=o,t.once=function(){var e,t=new Promise(function(t,r){e=t});return{sender:new i(e),receiver:new o(t)}};var s=function(){function e(e,t){this.queue=e,this.wakers=t}return e.prototype.send=function(e){this.queue.push(e),this.wakeAll()},e.prototype.wakeAll=function(){for(;this.queue.length&&this.wakers.length;)this.wakers.shift()(this.queue.shift())},e}();t.Sender=s;var a=function(){function e(e,t){this.queue=e,this.wakers=t}return e.prototype.recv=function(){return r(this,void 0,void 0,function(){var e=this;return n(this,function(t){return this.queue.length?[2,this.queue.shift()]:[2,new Promise(function(t,r){e.wakers.push(t)})]})})},e.prototype.tryRecv=function(){return this.queue.shift()},e}();t.Receiver=a,t.channel=function(){var e=[],t=[];return{sender:new s(e,t),receiver:new a(e,t)}}},852:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.MP4Player=void 0;var o=r(5877),s=r(1653),a=r(2793);t.MP4Player=function(e,t){var r=this,l=this,u=t.fileId,c=t.fileKey,f=t.fileSize,h=t.chunkSize,d=t.waitTimeout,p=t.waitInterval,g=new s.MegaDecryptor(c);return window.mp4Player=new o.Mp4Player(e,{chunkSize:1024*h},function(e){return n(r,void 0,void 0,function(){var t,r,o=this;return i(this,function(c){switch(c.label){case 0:return t=1024*(h||512),r=null==e.end?Math.min(e.start+t,f):e.end,[4,s.requestPlain(g,function(e,t){return n(o,void 0,void 0,function(){var r,o,s=this;return i(this,function(c){switch(c.label){case 0:return[4,null===(o=null==l?void 0:l.waitUntil)||void 0===o?void 0:o.call(l,function(){return n(s,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:return[4,null===(r=null==l?void 0:l.getSegmentBytesData)||void 0===r?void 0:r.call(l,u,e,t-1)];case 1:return[2,n.sent()]}})})},d||18e4,p||1e3)];case 1:return r=c.sent(),a.logUtils.log("startPos: "+e+", endPos: "+t+", bufferLen: "+r.byteLength),[2,r]}})})},e.start,r,f)];case 1:return[2,{buffer:c.sent().buffer,totalLength:Number(f)}]}})})})}},1653:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.chooseFile=t.MegaDecryptor=t.requestPlain=void 0;var s=o(r(5200));function a(e){return 16777216*e[0]+65536*e[1]+256*e[2]+e[3]}function l(e){for(var t=[0,0,0,0],r=[],n=0;n<e.length;n++){var i=n%4;t[i]=e[n],3==i&&(r.push(a(t)),t=[0,0,0,0])}return 0!=e.length%4&&r.push(a(t)),s.default.lib.WordArray.create(r,e.length)}function u(e){for(var t=e.sigBytes,r=new Uint8Array(t),n=0;n<t;n++){var i=e.words[n>>>2]>>>24-n%4*8&255;r[n]=i}return r}t.requestPlain=function(e,t,r,o,s){return n(this,void 0,void 0,function(){var n,a,l,u,c;return i(this,function(i){switch(i.label){case 0:return[4,t(16*(n=Math.floor(r/16)),Math.min(16*Math.ceil(o/16),s))];case 1:return a=i.sent(),l=e.decryptBlock(n,new Uint8Array(a)),u=r%16,c=o-r,[2,l.slice(u,u+c)]}})})};var c=function(){function e(e){var t=u(s.default.enc.Base64url.parse(e));this.fileKey=t;var r=function(e){for(var t=[],r=0;r<16;r++)t[r]=e[r]^e[r+16];return t}(t);this.key=l(r)}return e.prototype.decryptBlock=function(e,t){var r,n,i=l((r=this.fileKey,n=function(e,t){for(var r=[],n=0;n<8;n++)r.unshift(e%256),e=Math.floor(e/256);return r}(e,0),Array.from(r.slice(16,24)).concat(n)));return u(s.default.AES.decrypt(s.default.lib.CipherParams.create({ciphertext:l(t)}),this.key,{iv:i,mode:s.default.mode.CTR,padding:s.default.pad.NoPadding}))},e}();function f(e,t){t=t||{},f.lastDom&&(document.body.removeChild(f.lastDom),f.lastDom=void 0);var r=document.createElement("input");r.style.display="none",r.setAttribute("type","file"),t.accept&&r.setAttribute("accept",t.accept),r.addEventListener("change",function(){f.lastDom=void 0,"function"==typeof e&&e(r.files),document.body.removeChild(r)}),document.body.appendChild(r),f.lastDom=r,r.click()}t.MegaDecryptor=c,f.lastDom=void 0,t.chooseFile=f},5877:function(e,t,r){"use strict";var n,i,o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Mp4Player=t.ErrorType=void 0;var l=r(778),u=r(7203),c=r(2793);function f(e){return o(this,void 0,void 0,function(){return s(this,function(t){return"open"==e.readyState?[2]:[2,new Promise(function(t,r){e.addEventListener("sourceopen",function r(){e.removeEventListener("sourceopen",r),t()})})]})})}function h(e){return o(this,void 0,void 0,function(){return s(this,function(t){return e.updating?[2,new Promise(function(t,r){e.addEventListener("updateend",function r(){e.removeEventListener("updateend",r),t()})})]:[2]})})}function d(e,t){return o(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:if(!("open"!=e.readyState||t.updating))return[3,2];return[4,Promise.all([f(e),h(t)])];case 1:return r.sent(),[3,0];case 2:return[2]}})})}function p(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:if(!("open"!=e.readyState||Array.prototype.some.call(e.sourceBuffers,function(e){return e.updating})))return[3,2];return[4,Promise.all(Array.prototype.map.call(e.sourceBuffers,function(e){return h(e)}).concat([f(e)]))];case 1:return t.sent(),[3,0];case 2:return[2]}})})}function g(e){for(var t=0;t<e.buffered.length;t++){var r=e.buffered.start(t),n=e.buffered.end(t);if(e.currentTime>=r&&e.currentTime<=n)return n}}function y(e){for(var t=void 0,r=0;r<e.buffered.length;r++){var n=e.buffered.start(r);void 0==t?t=n:n<t&&(t=n)}return t}function m(e){return'video/mp4; codecs="'+e+'"'}(n=i=t.ErrorType||(t.ErrorType={})).FormatError="FormatError",n.CodecNotSupported="CodecNotSupported",n.ParseError="ParseError";var v={chunkSize:1048576,lackTime:3,enoughTime:60,remainTime:25,remainCheckTime:30},b=function(){function e(e,t,r){var n=this;this.playerConfig=r,this.loading=!0,this.isSeeking=!1,this.startPos=0,this.totalLength=0,this.pendingSegments={},this.fetch=e,this.key=t,this.mp4FileReady=!1,this.bufferMap={},this.cleanTasks=[],this.cleanTasks.push(function(){n.stopWait&&(n.stopWait(),n.stopWait=void 0)});var i=u.once(),o=i.sender,s=i.receiver;this.mediaSourceDestroyed=s,this.stopPlay=function(){o.send(!0)},this.cleanTasks.push(this.stopPlay);var a=u.once(),l=a.sender,c=a.receiver;this.destroyed=c,this.downloading=!1,this.cleanTasks.push(function(){l.send(!0)})}return e.prototype.setupMP4File=function(){var e,t;return o(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,this.loadMp4box()];case 1:return r.sent(),this.mp4File=null===(t=null===(e=window.MP4Box)||void 0===e?void 0:e.createFile)||void 0===t?void 0:t.call(e),this.mp4File.onError=console.error,[2]}})})},e.prototype.loadMp4box=function(){return new Promise(function(e,t){if(window.MP4Box)return e(window.MP4Box);var r=document.createElement("script");r.src="https://cdn.jsdelivr.net/npm/mp4box/dist/mp4box.all.min.js",r.onload=function(){return e(window.MP4Box)},r.onerror=function(){return t(Error("Failed to load MP4Box.js"))},document.head.appendChild(r)})},e.prototype.initSegmentation=function(e){var t,r;try{for(var n=a(e),i=n.next();!i.done;i=n.next()){var o=i.value;this.mp4File.setSegmentOptions(o.id,null,{nbSamples:100})}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this.initSegs=this.mp4File.initializeSegmentation()},e.prototype.handleSeeking=function(e){var t=this;if(this.mediaSourceDestroyed.tryRecv()){this.cleanTasks=this.cleanTasks.filter(function(e){return e!==t.stopPlay});var r=u.once(),n=r.sender,i=r.receiver;this.mediaSourceDestroyed=i,this.stopPlay=function(){n.send(!0)},this.cleanTasks.push(this.stopPlay),this.startToPlay(e,e.currentTime)}else this.stopWait&&(this.stopWait(),this.stopWait=void 0);this.isSeeking=!1,this.startDownload(e)},e.prototype.addVideoListener=function(e){var t=this,r=function(e){t.loading&&(t.loading=!1,t.playerConfig.handleLoading&&t.playerConfig.handleLoading(!1))};e.addEventListener("playing",r),this.cleanTasks.push(function(){e.removeEventListener("playing",r)});var n=function(r){t.startDownload(e)};e.addEventListener("timeupdate",n),this.cleanTasks.push(function(){e.removeEventListener("timeupdate",n)});var i=function(r){t.handleSeeking(e)};e.addEventListener("seeking",i),this.cleanTasks.push(function(){e.removeEventListener("seeking",i)});var a=function(r){return o(t,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:if(!this.loading&&(this.loading=!0,this.playerConfig.handleLoading&&this.playerConfig.handleLoading(!0)),!(this.minDuration&&e.currentTime+.5>=this.minDuration)||!this.mediaSource)return[3,2];return[4,p(this.mediaSource)];case 1:return t.sent(),this.mediaSource.endOfStream(),this.stopPlay(),[2];case 2:return this.isSeeking=!0,this.startDownload(e),[2]}})})};e.addEventListener("waiting",a),this.cleanTasks.push(function(){e.removeEventListener("waiting",a)})},e.prototype.getMinDuration=function(){return this.minDuration},e.prototype.start=function(e,t){return o(this,void 0,void 0,function(){var r,n=this;return s(this,function(o){switch(o.label){case 0:return this.loading=!0,this.video=e,this.playerConfig.handleLoading&&this.playerConfig.handleLoading(!0),[4,this.setupMP4File()];case 1:return o.sent(),(r=this.mp4File).onReady=function(o){if(!o.tracks.every(function(e){var t=m(e.codec);return MediaSource.isTypeSupported(t)})){n.loading&&(n.loading=!1,n.playerConfig.handleLoading&&n.playerConfig.handleLoading(!1)),n.playerConfig.handleError&&n.playerConfig.handleError({type:i.CodecNotSupported,message:"Your browser does not support playing this mp4 file!"}),n.destroy();return}var s,a=(s=o.isFragmented?o.fragment_duration/o.timescale:o.duration/o.timescale,o.tracks.map(function(e){return e.duration/e.timescale}).reduce(function(e,t){return Math.min(e,t)},s));n.minDuration=a,n.initSegmentation(o.tracks),n.tracks=o.tracks,n.addVideoListener(e),n.mp4FileReady=!0,n.startToPlay(e,t),r.start()},r.onSegment=function(e,t,i,o,s){n.pendingSegments[e].push({data:i,done:s}),r.releaseUsedSamples(e,o)},r.onError=function(e){n.playerConfig.handleError&&n.playerConfig.handleError({type:i.ParseError,message:"Parse mp4 file failed, "+e})},this.startDownload(e),[2]}})})},e.prototype.startToPlay=function(e,t){var r=this.createMediaSource(e,t);e.src=URL.createObjectURL(r),e.play()},e.prototype.handleSourceBufferError=function(e){},e.prototype.createMediaSource=function(e,t){this.bufferMap={},this.pendingSegments={};try{for(var r,n,i=a(this.initSegs),l=i.next();!l.done;l=i.next()){var u=l.value;this.pendingSegments[u.id]=[{data:u.buffer,done:!1}]}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}var f=new MediaSource,h=this;return f.addEventListener("sourceopen",function r(){return o(this,void 0,void 0,function(){var n,i,o,l,u,c;return s(this,function(s){f.duration=h.minDuration,f.removeEventListener("sourceopen",r),n=function(e){var t=m(e.codec),r=f.addSourceBuffer(t);h.bufferMap[e.id]=r,r.addEventListener("error",function(e){h.handleSourceBufferError(r)})};try{for(o=(i=a(h.tracks)).next();!o.done;o=i.next())l=o.value,n(l)}catch(e){u={error:e}}finally{try{o&&!o.done&&(c=i.return)&&c.call(i)}finally{if(u)throw u.error}}return t&&(e.currentTime=t,h.isSeeking=!0,h.startDownload(e)),[2]})})}),f.addEventListener("error",function(e){c.logUtils.error("MediaSource error:",e)}),this.mediaSource=f,f},e.prototype.waitMediaSourceReady=function(){return o(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:if(!this.mediaSource)return[3,2];return e=!1,[4,Promise.race([p(this.mediaSource).then(function(){e=!0}),this.mediaSourceDestroyed.recv()])];case 1:return t.sent(),[2,e];case 2:return[2,!0]}})})},e.prototype.waitSourceAndBufferReady=function(e){return o(this,void 0,void 0,function(){var t;return s(this,function(r){switch(r.label){case 0:return t=!1,[4,Promise.race([d(this.mediaSource,e).then(function(){t=!0}),this.mediaSourceDestroyed.recv()])];case 1:return r.sent(),[2,t]}})})},e.prototype.startDownload=function(e){return o(this,void 0,void 0,function(){var t,r;return s(this,function(n){switch(n.label){case 0:if(this.downloading)return[2];this.downloading=!0,n.label=1;case 1:n.trys.push([1,,5,6]),t=function(){var t,n,o,a,c,f,h,d,p,m,v,b,w,_,S,E,T,I,k;return s(this,function(s){var R,x,P,A,M,O,C;switch(s.label){case 0:return[4,r.waitMediaSourceReady()];case 1:if(!s.sent())return[2,"break"];if(t=r.startPos,r.mp4FileReady){if(R=r.playerConfig.lackTime,x=e.currentTime,void 0!=(n=(P=g(e))?R>P-x&&P<e.duration?P:void 0:x)&&r.isSeeking)t=r.mp4File.seek(n,!0).offset,r.isSeeking=!1;else if(A=r.playerConfig.enoughTime,M=e.currentTime,(O=g(e))&&A<O-M)return[2,"break"]}o=void 0,a=r.playerConfig.chunkSize,t+a<1/0&&(o=t+a,0<r.totalLength&&(o=Math.min(o,r.totalLength))),c=!1,0<r.totalLength&&(o&&r.totalLength<=o&&(c=!0),r.totalLength<=t&&(t-=1)),f=void 0,s.label=2;case 2:return s.trys.push([2,4,,5]),[4,Promise.resolve(r.fetch({key:r.key,start:t,end:o}))];case 3:return f=s.sent(),[3,5];case 4:return s.sent(),f=void 0,[3,5];case 5:if(!f||(r.totalLength||(r.totalLength=f.totalLength),!(h=f.buffer)))return[3,10];if(h.fileStart=t,d=h.byteLength,0==t&&8<=d&&(C=r.playerConfig.handleError,"66747970"!=Array.prototype.map.call(new Uint8Array(h.slice(4,8)),function(e){return e.toString(16)}).join("").toLowerCase()&&(C&&C({type:i.FormatError,message:"Media file is not a mp4 file, This player can not play it."}),1)))return r.loading&&(r.loading=!1,r.playerConfig.handleLoading&&r.playerConfig.handleLoading(!1)),r.destroy(),[2,"break"];if(p=t+d>=r.totalLength,r.startPos=r.mp4File.appendBuffer(h,p),p&&r.mp4File.flush(),!(void 0!=(m=y(e)))||!(r.playerConfig.remainCheckTime<e.currentTime-m))return[3,7];return[4,r.removePastBuffer(e,r.playerConfig.remainTime)];case 6:s.sent(),s.label=7;case 7:return[4,r.removeSourceBuffer(e)];case 8:return s.sent(),[4,r.pushPendingSegments()];case 9:s.sent(),r.playerConfig.handleBufferChange&&r.playerConfig.handleBufferChange(),s.label=10;case 10:return[4,r.waitMediaSourceReady()];case 11:if(!s.sent())return[2,"break"];return v=0,c?v=1e3:(b=r.bufferMap["1"],w=r.bufferMap["2"],(_=g(e))&&b&&w&&(S=Math.max(_,r.getBufferedDuration(b,e),r.getBufferedDuration(w,e))-e.currentTime,r.playerConfig.lackTime<S&&(v=1e3*Math.min(S/10,1)))),T=(E=u.once()).sender,I=E.receiver,r.stopWait=function(){T.send()},k=!1,[4,Promise.race([l.wait(v).then(function(){k=!0}),I.recv().then(function(){k=!0}),r.mediaSourceDestroyed.recv()])];case 12:if(s.sent(),T.send(),r.stopWait=void 0,!k)return[2,"break"];return[2]}})},r=this,n.label=2;case 2:return[5,t()];case 3:if("break"===n.sent())return[3,4];return[3,2];case 4:return[3,6];case 5:return this.downloading=!1,[7];case 6:return[2]}})})},e.prototype.getBufferedDuration=function(e,t){for(var r=0;r<e.buffered.length;r++){var n=e.buffered.start(r),i=e.buffered.end(r);if(t.currentTime>=n&&t.currentTime<=i)return i}},e.prototype.pushPendingSegments=function(){return o(this,void 0,void 0,function(){var e,t,r,n,i,o,l,u,c,f,h;return s(this,function(s){switch(s.label){case 0:for(t in e=[],this.pendingSegments)e.push(t);r=0,s.label=1;case 1:if(!(r<e.length))return[3,10];if(n=e[r],!(i=this.bufferMap[n])||!(o=this.pendingSegments[n]).length)return[3,9];this.pendingSegments[n]=[],s.label=2;case 2:s.trys.push([2,7,8,9]),f=void 0,u=(l=a(o)).next(),s.label=3;case 3:if(u.done)return[3,6];return c=u.value,[4,this.waitSourceAndBufferReady(i)];case 4:if(!s.sent())return[2];try{i.appendBuffer(c.data)}catch(e){}s.label=5;case 5:return u=l.next(),[3,3];case 6:return[3,9];case 7:return f={error:s.sent()},[3,9];case 8:try{u&&!u.done&&(h=l.return)&&h.call(l)}finally{if(f)throw f.error}return[7];case 9:return r++,[3,1];case 10:return[2]}})})},e.prototype.removePastBuffer=function(e,t){return o(this,void 0,void 0,function(){var r,n,i,o,l,u,c,f,h;return s(this,function(p){switch(p.label){case 0:if(!(r=this.mediaSource)||!r.sourceBufferList)return[2];if(n=e.currentTime,!e.buffered.length)return[3,8];i=function(e){var i;return s(this,function(s){switch(s.label){case 0:return i=!1,[4,Promise.race([d(r,e).then(function(){i=!0}),o.mediaSourceDestroyed.recv()])];case 1:if(s.sent(),!i)return[2,"break"];return[4,d(r,e)];case 2:return s.sent(),e.remove(0,Math.max(0,n-t)),[2]}})},o=this,p.label=1;case 1:p.trys.push([1,6,7,8]),u=(l=a(r.sourceBufferList)).next(),p.label=2;case 2:if(u.done)return[3,5];return c=u.value,[5,i(c)];case 3:if("break"===p.sent())return[3,5];p.label=4;case 4:return u=l.next(),[3,2];case 5:return[3,8];case 6:return f={error:p.sent()},[3,8];case 7:try{u&&!u.done&&(h=l.return)&&h.call(l)}finally{if(f)throw f.error}return[7];case 8:return[2]}})})},e.prototype.removeSourceBuffer=function(e){return o(this,void 0,void 0,function(){var t,r,n,i,o,l,u,c,f;return s(this,function(h){switch(h.label){case 0:if(!(t=this.mediaSource)||!t.sourceBufferList)return[2];r=e.currentTime,n=function(n){var o,a;return s(this,function(s){switch(s.label){case 0:return o=!1,[4,Promise.race([d(t,n).then(function(){o=!0}),i.mediaSourceDestroyed.recv()])];case 1:if(s.sent(),!o)return[2,"break"];return[4,d(t,n)];case 2:return s.sent(),void 0!==(a=y(n))&&i.playerConfig.remainCheckTime<e.currentTime-a&&n.remove(a,Math.max(0,r-15)),[2]}})},i=this,h.label=1;case 1:h.trys.push([1,6,7,8]),l=(o=a(t.sourceBufferList)).next(),h.label=2;case 2:if(l.done)return[3,5];return u=l.value,[5,n(u)];case 3:if("break"===h.sent())return[3,5];h.label=4;case 4:return l=o.next(),[3,2];case 5:return[3,8];case 6:return c={error:h.sent()},[3,8];case 7:try{l&&!l.done&&(f=o.return)&&f.call(o)}finally{if(c)throw c.error}return[7];case 8:return[2]}})})},e.prototype.destroy=function(){for(this.mp4File.stop();;){var e=this.cleanTasks.shift();if(e)e();else break}},e}(),w=function(){function e(e,t,r){this.video=e,this.fetch=r,this.playerConfig=Object.assign(Object.create(v),t),this.listeners=[]}return e.prototype.startPlay=function(e,t,r){var n;(t||this.key&&e!=this.key)&&(null===(n=this.player)||void 0===n||n.destroy()),(t||e!=this.key)&&(this.player=new b(this.fetch,e,this.playerConfig),this.key=e,this.player.start(this.video,r))},e.prototype.onLoading=function(e){this.playerConfig.handleLoading=e},e.prototype.onBufferChange=function(e){this.playerConfig.handleBufferChange=e},e.prototype.onError=function(e){this.playerConfig.handleError=e},e.prototype.setChunkSize=function(e){this.playerConfig.chunkSize=Math.max(e,8)},e.prototype.setRemainTime=function(e){this.playerConfig.remainTime=e},e.prototype.duration=function(){var e;return null===(e=this.player)||void 0===e?void 0:e.getMinDuration()},e.prototype.currentTime=function(){return this.video.currentTime},e.prototype.play=function(){this.video.play()},e.prototype.pause=function(){this.video.pause()},e.prototype.seek=function(e){var t;this.video.currentTime=e,null===(t=this.player)||void 0===t||t.handleSeeking(this.video)},e.prototype.seekFront=function(e){if(this.player){var t=this.player.getMinDuration();if(t){var r=Math.min(t,this.video.currentTime+e);this.seek(r)}}},e.prototype.seekBack=function(e){var t=Math.max(0,this.video.currentTime-e);this.seek(t)},e.prototype.on=function(e,t){this.video.addEventListener(e,t),this.listeners.push({type:e,listener:t})},e.prototype.off=function(e,t){this.video.removeEventListener(e,t),this.listeners=this.listeners.filter(function(r){return e!=r.type||t!==r.listener})},e.prototype.destroy=function(){var e;for(null===(e=this.player)||void 0===e||e.destroy(),this.playerConfig.handleBufferChange=void 0,this.playerConfig.handleLoading=void 0,this.playerConfig.handleError=void 0;;){var t=this.listeners.pop();if(t)this.video.removeEventListener(t.type,t.listener);else break}},e}();t.Mp4Player=w},778:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.wait=t.waitUntil=void 0,t.waitUntil=function e(t,r){return t()?Promise.resolve():(r=r||25,new Promise(function(n,i){setTimeout(function(){n(e(t,r))},r)}))},t.wait=function(e){return r(this,void 0,void 0,function(){return n(this,function(t){return[2,new Promise(function(t){setTimeout(t,e)})]})})}},3847:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePlaylist=void 0;var r=/#EXTINF:(\d+),\s*(.*)/g;t.parsePlaylist=function(e,t){for(var n,i=[],o=0,s=0,a=0,l=0;null!==(n=r.exec(t));){n.index===r.lastIndex&&r.lastIndex++;var u=parseInt(n[1],10);0===s&&(a=u),l=u;var c=n[2],f=l===a,h=f?s*a:i[s-1].videoRangeEnd+1,d=f?h+a-1:h+l-1;s++,i.push({id:h+"_"+d+"_block.data",url:c,masterSwarmId:e,masterManifestUri:"",streamId:e,sequence:""+o++,range:"bytes="+h+"-"+d,priority:0,downloadBandwidth:0,requestUrl:"",responseUrl:"",initSegment:!1,xFlag:!1,audioDuration:"",videoDuration:"",audioRangeBegin:0,audioRangeEnd:0,videoRangeBegin:h,videoRangeEnd:d})}return{segments:i,byteSize:a}}},236:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.P2PMediaManager=void 0;var f=c(r(5269)),h=c(r(5343)),d=r(4217),p=r(1815),g=r(270),y=r(9205),m=r(2793),v=y.createBitField(y.ExceptionType.Player,y.ExceptionSubType.Unspecified),b="-WW"+g.version.replace(/\d*./g,function(e){return("0"+parseInt(e,10)%100).slice(-2)}).slice(0,4)+"-",w=function(e,t){this.peerId=e,this.segment=t},_=function(e){function t(t,r,n){var i=e.call(this)||this;return i.segmentsStorage=t,i.settings=r,i.metrics=n,i.peers=new Map,i.peerCandidates=new Map,i.peerSegmentRequests=new Map,i.peerSegmentTimeouts=new Map,i.streamSwarmId=null,i.debug=f.default("p2pml:p2p-media-manager"),i.getPeers=function(){return i.peers},i.getPeerId=function(){return h.default.wrap(i.peerId).toBuffer().toString("hex")},i.setStreamSwarmId=function(e){i.streamSwarmId!==e&&(i.streamSwarmId=e,i.debug("stream swarm ID",i.streamSwarmId))},i.addTrackerPeer=function(e){if(i.debug("tracker peer",e.id,e),i.peers.has(e.id)){i.debug("peer-already connected",e.id,e),e.destroy();return}var t=new p.MediaPeer(i.streamSwarmId,e,i.settings,i.metrics);t.on("connect",i.onPeerConnect),t.on("close",i.onPeerClose),t.on("data-updated",i.onPeerDataUpdated),t.on("segment-request",i.onSegmentRequest),t.on("segment-loaded",i.onSegmentLoaded),t.on("segment-absent",i.onSegmentAbsent),t.on("segment-error",i.onSegmentError),t.on("segment-timeout",i.onSegmentTimeout),t.on("bytes-downloaded",i.onPieceBytesDownloaded),t.on("bytes-uploaded",i.onPieceBytesUploaded);var r=i.peerCandidates.get(t.id);r||(r=[],i.peerCandidates.set(t.id,r)),r.push(t)},i.download=function(e){if(null===i.streamSwarmId||i.isDownloading(e))return!1;var t,r,n=[];try{for(var o=l(i.peers.values()),s=o.next();!s.done;s=o.next()){var a=s.value;null===a.getDownloadingSegmentId()&&a.getSegmentsMap().get(e.id)===p.MediaPeerSegmentStatus.Loaded&&n.push(a)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}if(0===n.length)return!1;var u=n[Math.floor(Math.random()*n.length)];return i.peerSegmentRequests.has(e.id)||u.requestSegment(e.id),i.peerSegmentRequests.set(e.id,new w(u.id,e)),!0},i.abort=function(e){var t,r=i.peerSegmentRequests.get(e.id);if(r){var n=i.peers.get(r.peerId);n&&(t=n.cancelSegmentRequest()),i.peerSegmentRequests.delete(e.id)}return t},i.isDownloading=function(e){return i.peerSegmentRequests.has(e.id)},i.getActiveDownloadsCount=function(){return i.peerSegmentRequests.size},i.destroy=function(e){var t,r,n,o;void 0===e&&(e=!1),i.streamSwarmId=null,i.peers.forEach(function(e){return e.destroy()}),i.peers.clear(),m.logUtils.warn("peer-destory"),i.peerSegmentRequests.clear();try{for(var s=l(i.peerCandidates.values()),a=s.next();!a.done;a=s.next()){var u=a.value;try{for(var c=(n=void 0,l(u)),f=c.next();!f.done;f=c.next())f.value.destroy()}catch(e){n={error:e}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}i.peerCandidates.clear()},i.sendSegmentsMapToAll=function(e,t){var r,n;try{for(var o=l(i.peers.values()),s=o.next();!s.done;s=o.next()){var a=s.value;a.peer.streamId===e&&a.sendSegmentsMap(e,t)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},i.sendSegmentsMap=function(e,t,r){var n=i.peers.get(t);n&&n.sendSegmentsMap(e,r)},i.getOverallSegmentsMap=function(){var e,t,r,n,o=new Map;try{for(var s=l(i.peers.values()),a=s.next();!a.done;a=s.next()){var c=a.value;try{for(var f=(r=void 0,l(c.getSegmentsMap())),h=f.next();!h.done;h=f.next()){var d=u(h.value,2),g=d[0];d[1]===p.MediaPeerSegmentStatus.Loaded?o.set(g,p.MediaPeerSegmentStatus.Loaded):o.get(g)||o.set(g,p.MediaPeerSegmentStatus.LoadingByServer)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return o},i.onPieceBytesDownloaded=function(e,t){i.emit("bytes-downloaded",t,e.id)},i.onPieceBytesUploaded=function(e,t){i.emit("bytes-uploaded",t,e.id)},i.onPeerConnect=function(e){if(i.peers.get(e.id)){m.logUtils.log("[P2PShare] peer-already connected (in peer connect)",e.id),e.destroy();return}i.peers.set(e.id,e),null===(n=i.metrics)||void 0===n||n.record("conn_peers",i.peers.size);var t,r,n,o=i.peerCandidates.get(e.id);if(o){try{for(var s=l(o),a=s.next();!a.done;a=s.next()){var u=a.value;u!==e&&u.destroy()}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}i.peerCandidates.delete(e.id)}m.logUtils.log("[P2PShare] peer-connected,",e.id," ",e.remoteAddress,"size: ",i.peers.size),i.emit("peer-connected",{id:e.id,streamId:e.peer.streamId})},i.cleanUpClosePeer=function(e){i.onPeerClose(e)},i.onPeerClose=function(e){m.logUtils.log("[P2PShare] peer-closed",e.id);var t,r,n=i.peers.get(e.id);if(!n){var o=i.peerCandidates.get(e.id);if(!o)return;var s=o.indexOf(e);-1!==s&&o.splice(s,1),0===o.length&&i.peerCandidates.delete(e.id);return}n.cancelSegmentRequest();try{for(var a=l(i.peerSegmentRequests),c=a.next();!c.done;c=a.next()){var f=u(c.value,2),h=f[0];f[1].peerId===e.id&&i.peerSegmentRequests.delete(h)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}i.peers.delete(e.id),i.emit("peer-data-updated"),m.logUtils.log("[P2PShare] peer-closed ",e.id,"size: ",i.peers.size),i.emit("peer-closed",e.id)},i.onPeerDataUpdated=function(){i.emit("peer-data-updated")},i.onSegmentRequest=function(e,t,r){return s(i,void 0,void 0,function(){var n;return a(this,function(i){switch(i.label){case 0:return[4,this.segmentsStorage.getSegment(t,r)];case 1:return n=i.sent(),m.logUtils.log("[P2PShare] other peer request segment:",null==n?void 0:n.id,null==n?void 0:n.url,e.id),n&&n.data?(this.emit("segment-request",n,r),e.sendSegmentData(r,t,n.data)):e.sendSegmentAbsent(r,t),[2]}})})},i.onSegmentLoaded=function(e,t,r){return s(i,void 0,void 0,function(){var n,i,s,l,u;return a(this,function(a){switch(a.label){case 0:if(!(n=this.peerSegmentRequests.get(t)))return[2];if(i=(this.metrics.getVariables("recv_ts_ok_peer_p")||0)+1,null===(u=this.metrics)||void 0===u||u.record("recv_ts_ok_peer_p",i),s=n.segment,m.logUtils.log("[P2PShare] p2p segment loaded ","segmentId:",s.url,"download from peer id:",e.id),this.peerSegmentTimeouts.has(s.id)&&this.peerSegmentTimeouts.delete(s.id),!this.settings.segmentValidator)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.settings.segmentValidator(o(o({},s),{data:r}),"p2p",e.id)];case 2:return a.sent(),[3,4];case 3:return l=a.sent(),this.debug("segment validator failed",l),this.emit("segment-error",s,l,e.id),this.onPeerClose(e),[2];case 4:return this.emit("segment-loaded",s,r,e.id),[2]}})})},i.onSegmentAbsent=function(e,t){i.peerSegmentRequests.delete(t),i.emit("peer-data-updated")},i.onSegmentError=function(e,t,r){i.metrics.report(y.EVENT_TYPES.exception,{exp_type:v,exp_subtype:7,exp_desc:"Download Segement Error - segment id: "+t+", description: "+r});var n=i.peerSegmentRequests.get(t);n&&(i.emit("segment-error",n.segment,r,e.id),i.peerSegmentRequests.delete(t))},i.onSegmentTimeout=function(e,t){var r=i.peerSegmentRequests.get(t);if(r){i.peerSegmentRequests.delete(t),m.logUtils.log("[P2PShare] peer-timeout ",e.id),i.emit("segment-timeout",t,e.id);var n=i.peerSegmentTimeouts.has(t),o=Number(i.peerSegmentTimeouts.get(t));o<3?i.peerSegmentTimeouts.set(t,n?o+1:0):(e.destroy(),i.peers.delete(r.peerId)&&i.emit("peer-data-updated"))}},i.peerId=r.useP2P?function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=b,r=0;r<20-b.length;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return new TextEncoder().encode(t).buffer}():new ArrayBuffer(0),i.debug.enabled&&i.debug("peer ID",i.getPeerId(),new TextDecoder().decode(i.peerId)),i}return i(t,e),t.prototype.segmentDealOk=function(e){this.peerSegmentRequests.delete(e)},t}(d.STEEmitter);t.P2PMediaManager=_},3502:function(e,t){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.stringTosegmentRange=t.segmentRangeToString=t.parsePlayListSegment=t.parsePlayListTrack=t.parsePlayListHeader=t.parsePlayListIndex=void 0;var i="";function o(e){if(null!==e&&!(e.length<=0)){var t=e.split(",");if(!(t.length<1)){for(var r={version:0,type:"live",targetduration:0,sequence:0,sh:0,ts:0},n=0;n<t.length;n++){var i=t[n].split("=");r[i[0].toLowerCase()]=i[1]}return r}}}function s(e,t){if(null!==e&&!(e.length<=0)){var i=e.split(";");if(!(i.length<1)){var o=[],s=function(e){var t,i,o="#EXT-X-KEY:METHOD=NONE",s=e.find(function(e){return e.startsWith("KEY:METHOD")});if(s){var a=s.split(","),l="",u="",c="";try{for(var f=r(a),h=f.next();!h.done;h=f.next()){var d=h.value,p=n(d.split("="),2),g=p[0],y=p[1];switch(g){case"KEY:METHOD":l=y;break;case"KEYID":c=y;break;case"WV":u=decodeURIComponent(y)}}}catch(e){t={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(t)throw t.error}}"SAMPLE-AES"===l?o="#EXT-X-KEY:METHOD="+l+',URI="data:text/plain;base64,'+u+'",KEYID="0x'+c+'",KEYFORMAT="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",KEYFORMATVERSION="1"\n#EXT-X-KEY:METHOD='+l+',URI="skd://'+c+'",KEYFORMATVERSIONS="1",KEYFORMAT="com.apple.streamingkeydelivery"':"AES-128"===l&&(o=("#EXT-X-"+s).replace(/KEYID=([A-Z0-9]+)/,'URI="http://127.0.0.2/$1"'))}return o}(t),a={audioParams:i.filter(function(e){return e.includes("TYPE=audio")})||"",videoParams:i.filter(function(e){return e.includes("TYPE=video")})||""},l=function(){var e={audioId:-1,audioCodec:"string",audioChannel:0,audioBandWidth:0,audioSampleRate:0,videoId:-1,videoCodec:"string",videoResolution:"string",videoBandWidth:0,videoFramRate:"",keyInfo:""};return e.keyInfo=s,e};if(a.audioParams||a.videoParams)return["audio","video"].forEach(function(e){for(var t=a[e+"Params"],r=0;r<t.length;r++){for(var n=t[r].split(","),i=l(),s=0;s<n.length;s++)n[s].startsWith("ID=")?i[e+"Id"]=Number(n[s].substring(3)):n[s].startsWith("CODECS=")?i[e+"Codec"]=n[s].substring(7):n[s].startsWith("CHANNELS=")?i[e+"Channel"]=Number(n[s].substring(9)):n[s].startsWith("BANDWIDTH=")?i[e+"BandWidth"]=Number(n[s].substring(10)):n[s].startsWith("SAMPLE-RATE=")?i[e+"SampleRate"]=Number(n[s].substring(12)):n[s].startsWith("RESOLUTION=")?i[e+"Resolution"]=n[s].substring(11):n[s].startsWith("FRAME-RATE")&&(i[e+"FramRate"]=n[s].substring(11));o.push(i)}}),o}}}function a(e,t,r,n){if(null!==r&&!(r.length<=0)&&null!==n&&!(n.length<=0)){var o,s,a={id:"",url:"",masterSwarmId:e,masterManifestUri:"",streamId:e,sequence:"",range:void 0,priority:0,downloadBandwidth:0,requestUrl:"",responseUrl:"",initSegment:!1,xFlag:!1,audioDuration:"",videoDuration:"",audioRangeBegin:0,audioRangeEnd:0,videoRangeBegin:0,videoRangeEnd:0},l=!1,u="";-1!==r.indexOf(",")&&(u=r.substring(0,r.indexOf(",")),l=r.split(",").includes("X=1")&&(""===i||i!==u),r=u),l&&(i=r),a.url=r,a.id=r,a.xFlag=l;var c=r.lastIndexOf("_"),f=r.lastIndexOf(".");-1!==c&&-1!==f&&c+1<f&&(a.sequence=r.substring(c+1,f));var h=n.split(";");if(!(h.length<1)){var d=null===(o=t.filter(function(e){return -1!==e.audioId}))||void 0===o?void 0:o.map(function(e){return e.audioId}),p=null===(s=t.filter(function(e){return -1!==e.videoId}))||void 0===s?void 0:s.map(function(e){return e.videoId});return[h.filter(function(e){var t=e.split(",").find(function(e){return e.startsWith("ID=")});return t=(null==t?void 0:t.split("=")[1])||"",d.includes(+t)}),h.filter(function(e){var t=e.split(",").find(function(e){return e.startsWith("ID=")});return t=(null==t?void 0:t.split("=")[1])||"",p.includes(+t)})].forEach(function(e,t){for(var r=0===t?"audio":"video",n=0;n<e.length;n++)if(0===n||n===e.length-1){var i=e[n].split(",");if(i.length<=0||!i[0].startsWith("ID="))continue;for(var o=1;o<i.length;o++)if(i[o].startsWith("DURATION="))a[r+"Duration"]=i[o].substring(9);else if(i[o].startsWith("RANGE=")){var s=i[o].substring(6);if(null===s)continue;var l=s.split("-");if(null===s||s.length<2)continue;0===n&&(a[r+"RangeBegin"]=Number(l[0])),n===e.length-1&&(a[r+"RangeEnd"]=Number(l[1])+Number(l[0]))}}}),a}}}function l(e){if(void 0!==e)return"bytes="+e.rangeBegin+"-"+e.rangeEnd}t.parsePlayListIndex=function(e,t){for(var r=void 0,n=void 0,i=[],u=t.split("\n"),c=u.length,f=0;f<c;f++){var h=u[f],d=h.startsWith("INIT:URI=")&&u[f+1].startsWith("INIT-INF:"),p=h.startsWith("SEGMENT:URI=")&&u[f+1].startsWith("SEGMENT-INF:");if(h.startsWith("HEADER:"))n=o(h.substring(7));else if(h.startsWith("TRACK-INF:"))r=s(h.substring(10),u);else if((d||p)&&f<c-1){if(void 0===n||void 0===r)continue;var g=d?"INIT":"SEGMENT",y=a(e,r,h.substring((g+":URI=").length),u[f+1].substring((g+":INF=").length));if(f++,void 0!==y){y.initSegment=d;var m=y.audioRangeBegin<y.videoRangeBegin,v=y.audioRangeEnd<y.videoRangeEnd,b=m?y.audioRangeBegin:y.videoRangeBegin,w=v?y.videoRangeEnd:y.audioRangeEnd;y.range=l({rangeBegin:b,rangeEnd:w}),i.push(y)}}}return n&&r?{headerInfo:n,trackInfo:r,segments:i}:void 0},t.parsePlayListHeader=o,t.parsePlayListTrack=s,t.parsePlayListSegment=a,t.segmentRangeToString=l,t.stringTosegmentRange=function(e){if(void 0!==e&&e.startsWith("bytes=")){var t=e.indexOf("-",6);if(!(t<=6)){var r=Number(e.substring(6,t)),n=Number(e.substring(t+1));if(!(isNaN(r)||isNaN(n)))return{rangeBegin:r,rangeEnd:n}}}}},7921:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentsIndexedDBStorage=void 0;var s=r(2793),a=r(2266),l={};t.SegmentsIndexedDBStorage=function(e){var t=this;this.settings=e,this.streamId="",this.videoBasic="videoBasic",this.segmentsMap=new Map,this.connectDatabase=function(){setInterval(function(){return n(t,void 0,void 0,function(){var e,t=this;return i(this,function(r){switch(r.label){case 0:return[4,this._getDB()];case 1:return(e=r.sent())&&(e.close(),setTimeout(function(){l[t.database]=t._setDB()},100)),[2]}})})},6e5)},this._setDB=function(){return n(t,void 0,void 0,function(){var e,t,r,n;return i(this,function(i){return e=this,t=e.database,r=e.table,n=e.videoBasic,[2,new Promise(function(e,i){var o=indexedDB.open(t,2);o.onerror=function(){i(o.error)},o.onupgradeneeded=function(){var e=o.result;e.objectStoreNames.contains(r)||o.result.createObjectStore(r),e.objectStoreNames.contains(n)||o.result.createObjectStore(n)},o.onsuccess=function(){e(o.result)}})]})})},this._getDB=function(){return n(t,void 0,void 0,function(){var e;return i(this,function(t){return l[e=this.database]||(l[e]=this._setDB()),[2,l[e]]})})},this.getAllKeys=function(e){return n(t,void 0,void 0,function(){var t,r=this;return i(this,function(o){switch(o.label){case 0:return t=[],[4,this.withStore("readonly",this.table,function(o){o.getAllKeys().onsuccess=function(o){return n(r,void 0,void 0,function(){return i(this,function(r){return t=e?e(o.target.result):o.target.result,[2]})})}})];case 1:return o.sent(),[2,t]}})})},this._getAll=function(){return n(t,void 0,void 0,function(){var e,t=this;return i(this,function(r){switch(r.label){case 0:return e=[],[4,this.withStore("readonly",this.table,function(r){r.getAll().onsuccess=function(r){return n(t,void 0,void 0,function(){return i(this,function(t){return e=r.target.result,[2]})})}})];case 1:return r.sent(),[2,e]}})})},this._formatId=function(e,r){return void 0===r&&(r=t.streamId),e.includes(r)||!r?e:r+"/"+e},this.withStore=function(e,r,o){return n(t,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,this._getDB()];case 1:return t=n.sent(),[2,new Promise(function(n,i){try{var a=t.transaction(r,e);a.oncomplete=function(){return n(void 0)},a.onerror=function(){return i(a.error)},o(a.objectStore(r))}catch(e){s.logUtils.log("withStore error:",e)}})]}})})},this.setVideoBasic=function(e,r){return void 0===r&&(r=t.streamId),n(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.withStore("readwrite",this.videoBasic,function(t){t.get(r).onsuccess=function(n){var i=a(n.target.result||{},e);t.put(i,r)}})];case 1:return t.sent(),[2]}})})},this.getVideoBasic=function(e){return void 0===e&&(e=t.streamId),n(t,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return t=null,[4,this.withStore("readonly",this.videoBasic,function(r){t=r.get(e)})];case 1:if(r.sent(),!(null==t?void 0:t.result))return[2,null];return[2,{streamId:e,info:t.result}]}})})},this.storeSegment=function(e){return n(t,void 0,void 0,function(){var t=this;return i(this,function(r){switch(r.label){case 0:return[4,this.withStore("readwrite",this.table,function(r){var n=t._formatId(e.id),i={segment:e,lastAccessed:Date.now()},o=JSON.parse(JSON.stringify(i));r.put(i,n).onsuccess=function(){delete o.segment.data,t.segmentsMap.set(n,o)}})];case 1:return r.sent(),[2]}})})},this.getSegment=function(e,r){return n(t,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return e=this._formatId(e,r),[4,this.withStore("readonly",this.table,function(r){t=r.get(e)})];case 1:if(n.sent(),!(null==t?void 0:t.result))return[2,void 0];return t.result.lastAccessed=Date.now(),[2,t.result.segment]}})})},this.getSegmentsMap=function(e){return n(t,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return t=new Map,[4,this.withStore("readwrite",this.table,function(r){r.openCursor().onsuccess=function(r){var n=r.target.result;if(n&&n.key.startsWith(e)){var i=n.value;delete i.segment.data,t.set(n.key,i),n.continue()}}})];case 1:return r.sent(),[2,t]}})})},this.syncCacheToSegmentsMap=function(){return n(t,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return[4,this.withStore("readwrite",this.table,function(t){t.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var n=r.value;delete n.segment.data,e.segmentsMap.set(r.key,n),r.continue()}}})];case 1:return t.sent(),[2,this.segmentsMap]}})})},this.removeSegment=function(e,r){return void 0===r&&(r=!0),n(t,void 0,void 0,function(){return i(this,function(t){return r&&(e=this._formatId(e)),[2,this.withStore("readwrite",this.table,function(t){t.delete(e)})]})})},this.removeSegments=function(e,r){return void 0===r&&(r=!0),n(t,void 0,void 0,function(){var t=this;return i(this,function(o){return e=e.map(function(e){return t._formatId(e)}),[2,new Promise(function(o,s){return n(t,void 0,void 0,function(){var t,n=this;return i(this,function(i){switch(i.label){case 0:return[4,this.getAllKeys()];case 1:return Promise.all((t=i.sent().filter(function(t){return e.find(function(e){return r?t===e:t.includes(e)})})).map(function(e){return n.removeSegment(e,!1)})).then(function(){return o(t)}).catch(function(e){return s(e)}),[2]}})})})]})})},this.hasSegment=function(e,r){return n(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return[2,t.sent().includes(this._formatId(e,r))]}})})},this.setStreamSwarmId=function(e){t.streamId=e},this.clean=function(e,r,s){return n(t,void 0,void 0,function(){var t,n,a,l,u,c,f,h,d,p,g,y,m,v;return i(this,function(i){switch(i.label){case 0:return t=[],n=[],a=Date.now(),[4,this._getAll()];case 1:if((l=(l=i.sent()).filter(function(t){return t.segment.masterSwarmId===e})).length<=this.settings.cachedSegmentsCount)return[2,t];try{for(c=(u=o(l)).next();!c.done;c=u.next())f=c.value,a-f.lastAccessed>this.settings.cachedSegmentExpiration||(null==s?void 0:s(f.segment.id))?t.push(f.segment.id):n.push(f)}catch(e){g={error:e}}finally{try{c&&!c.done&&(y=u.return)&&y.call(u)}finally{if(g)throw g.error}}if((h=n.length-this.settings.cachedSegmentsCount)>0){n.sort(function(e,t){return e.lastAccessed-t.lastAccessed});try{for(p=(d=o(n)).next();!p.done&&(f=p.value,void 0!==r&&r(f.segment.id)||(t.push(f.segment.id),h--,0!==h));p=d.next());}catch(e){m={error:e}}finally{try{p&&!p.done&&(v=d.return)&&v.call(d)}finally{if(m)throw m.error}}}return t.length>0&&this.removeSegments(t),[2,t]}})})},this.destroy=function(){return n(t,void 0,void 0,function(){return i(this,function(e){return[2,this.withStore("readwrite",this.table,function(e){e.clear()})]})})},this.database=this.settings.database||"cachedVideos",this.table=this.settings.table||"videoStore",this.connectDatabase()}},4787:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentsMemoryStorage=void 0,t.SegmentsMemoryStorage=function(e){var t=this;this.settings=e,this.cache=new Map,this.storeSegment=function(e){return r(t,void 0,void 0,function(){return n(this,function(t){return this.cache.set(e.id,{segment:e,lastAccessed:performance.now()}),[2]})})},this.getSegmentsMap=function(){return r(t,void 0,void 0,function(){return n(this,function(e){return[2,this.cache]})})},this.getSegment=function(e){return r(t,void 0,void 0,function(){var t;return n(this,function(r){return void 0===(t=this.cache.get(e))?[2,void 0]:(t.lastAccessed=performance.now(),[2,t.segment])})})},this.hasSegment=function(e){return r(t,void 0,void 0,function(){return n(this,function(t){return[2,this.cache.has(e)]})})},this.clean=function(e,o){return r(t,void 0,void 0,function(){var e,t,r,s,a,l,u,c,f,h,d,p,g,y=this;return n(this,function(n){e=[],t=[],r=performance.now();try{for(a=(s=i(this.cache.values())).next();!a.done;a=s.next())l=a.value,r-l.lastAccessed>this.settings.cachedSegmentExpiration?e.push(l.segment.id):t.push(l)}catch(e){h={error:e}}finally{try{a&&!a.done&&(d=s.return)&&d.call(s)}finally{if(h)throw h.error}}if((u=t.length-this.settings.cachedSegmentsCount)>0){t.sort(function(e,t){return e.lastAccessed-t.lastAccessed});try{for(f=(c=i(t)).next();!f.done&&(l=f.value,void 0!==o&&o(l.segment.id)||(e.push(l.segment.id),u--,0!==u));f=c.next());}catch(e){p={error:e}}finally{try{f&&!f.done&&(g=c.return)&&g.call(c)}finally{if(p)throw p.error}}}return e.forEach(function(e){return y.cache.delete(e)}),[2,e]})})},this.destroy=function(){return r(t,void 0,void 0,function(){return n(this,function(e){return this.cache.clear(),[2]})})}}},4217:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.STEEmitter=void 0;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.on=function(r,n){return e.prototype.on.call(t,r,n)},t.emit=function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return e.prototype.emit.apply(t,s([r],o(n)))},t}return i(t,e),t}(r(2100).EventEmitter);t.STEEmitter=a},3795:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(5269)),l=r(2100),u=s(r(8931)),c=s(r(8852)),f=r(8969),h=s(r(1891)),d=a.default("bittorrent-tracker:client"),p=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this)||this;if(!t.peerId)throw Error("Option `peerId` is required");if(!t.announce)throw Error("Option `announce` is required");n.peerId="string"==typeof t.peerId?t.peerId:t.peerId.toString("hex"),n._peerIdBuffer=f.hexToBinary(n.peerId),n._peerIdBinary=f.binaryToHex(n._peerIdBuffer),n.useP2P=t.useP2P||!1,d("new client %s",n.peerId),n.destroyed=!1,n._port=t.port,n._getAnnounceOpts=t.getAnnounceOpts,n._rtcConfig=t.rtcConfig,n._userAgent=t.userAgent,n._wrtc="function"==typeof t.wrtc?t.wrtc():t.wrtc;var i="string"==typeof t.announce?[t.announce]:t.announce||[];i=Array.from(new Set(i.map(function(e){return e.replace(/\/$/,"")})));var o=!1!==n._wrtc&&(!!n._wrtc||c.default.WEBRTC_SUPPORT),s=function(e){return queueMicrotask(function(){return n.emit("warning",e)})};return n._trackers=i.map(function(e){try{var t=new URL(e);if(t.port&&(0>Number(t.port)||Number(t.port)>65535))return s(Error("Invalid tracker port: "+e)),null;var i=t.protocol;if(!["ws:","wss:"].includes(i)||!o||"ws:"===i&&"undefined"!=typeof window&&"https:"===window.location.protocol)return s(Error("Unsupported tracker protocol: "+e)),null;return new h.default(n,e,r)}catch(t){return s(Error("Invalid tracker URL: "+e)),null}}).filter(Boolean),n}return i(t,e),t.prototype.start=function(e){void 0===e&&(e={}),d("send `start` %o",e=this._defaultAnnounceOpts(o(o({},e),{event:"started"}))),this._announce(e),this._trackers.forEach(function(e){return e.setInterval()})},t.prototype.startPlay=function(e){void 0===e&&(e={}),this._trackers.forEach(function(t){return t.startPlay(e)})},t.prototype.reconnect=function(){this._trackers.forEach(function(e){return e.connectTracker()})},t.prototype.stop=function(e){void 0===e&&(e={}),d("send `stop` %o",e=this._defaultAnnounceOpts(o(o({},e),{event:"stopped"}))),this._announce(e)},t.prototype.complete=function(e){void 0===e&&(e={}),d("send `complete` %o",e=this._defaultAnnounceOpts(o(o({},e),{event:"completed"}))),this._announce(e)},t.prototype.update=function(e){void 0===e&&(e={}),e=this._defaultAnnounceOpts(o({},e)),delete e.event,d("send `update` %o",e),this._announce(e)},t.prototype.scrape=function(e){d("send `scrape`"),this._trackers.forEach(function(t){return t.scrape(e)})},t.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,d("destroy"),u.default(this._trackers.map(function(e){return function(t){return e.destroy(t)}}),e),this._trackers=[])},t.prototype._defaultAnnounceOpts=function(e){var t;return o(o({uploaded:0,downloaded:0,numwant:f.DEFAULT_ANNOUNCE_PEERS},e),null===(t=this._getAnnounceOpts)||void 0===t?void 0:t.call(this))},t.prototype._announce=function(e){this._trackers.forEach(function(t){return t.announce(e)})},t}(l.EventEmitter);t.default=p},493:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,r){var n=e.call(this)||this;return n.DEFAULT_ANNOUNCE_INTERVAL=3e4,n.client=t,n.announceUrl=r,n.interval=void 0,n.destroyed=!1,n}return i(t,e),t.prototype.setInterval=function(e){var t=this;null==e&&(e=this.DEFAULT_ANNOUNCE_INTERVAL),this.interval&&clearInterval(this.interval),e&&(this.interval=setInterval(function(){t.announce(t.client._defaultAnnounceOpts())},e),this.interval.unref&&this.interval.unref())},t.prototype.announce=function(e){},t.prototype.destroy=function(){this.interval&&(clearInterval(this.interval),this.interval=void 0),this.destroyed=!0,this.emit("destroy")},t}(r(2100).EventEmitter);t.default=o},1891:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(2793),a=o(r(8852)),l=o(r(497)),u=r(8969),c=r(3771),f=o(r(493)),h={},d={LIVE:{close:6001,server:6004,serverRes:6005,peer:6006,peerRes:6007,heartbeat:6002,heartbeatRes:6003,sdp:6008},VOD:{close:7001,server:7004,serverRes:7005,peer:7006,peerRes:7007,heartbeat:7002,heartbeatRes:7003,sdp:7008,report:7010,reportRes:7011},CRT:{close:8001,server:8004,serverRes:8005,peer:8006,peerRes:8007,heartbeat:8002,heartbeatRes:8003,sdp:8008,report:8010,reportRes:8011}},p=function(){},g=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i._onSocketConnectBound=function(){},i._onSocketDataBound=function(){},i._onSocketErrorBound=function(){},i._onSocketCloseBound=function(){},i.metrics=n,i.announceUrl=r,i.peers={},i.wrtPeers={},i.unValidPeerIds={},i.socket=null,i.streamId=null,i.mediaIdFromServer=void 0,i.playOptions={},i.reconnecting=!1,i.retries=0,i.serverType=void 0,i.reconnectTimer=null,i.expectingResponse=!1,i.lastServerConnectId=-1,i._openSocket(),i}return i(t,e),t.prototype.announce=function(e){var t,r=this;if(!this.destroyed&&!this.reconnecting){if(!(null===(t=this.socket)||void 0===t?void 0:t.connected)){this.socket.once("connect",function(){r.announce(e)});return}if("stopped"===e.event||"completed"===e.event){var n=Object.assign({},{msgType:d[e.playType].close});this._send(n)}else{this.streamId&&this.streamId.length>0&&(-1===this.lastServerConnectId&&this._requestServerPeer(),this.requestNeigbour(e)),"LIVE"!==e.playType&&this.playOptions.getReportOptions&&this.playOptions.getReportOptions().then(function(t){t.localMedias.length>0&&(t.msgType=d[e.playType].report,r._send(t))});var n=Object.assign({},{msgType:d[e.playType].heartbeat});this.heartbeatTimeId||(this.heartbeatTimeId=setTimeout(function(){r.heartbeatTimeId=void 0,r.destroy(),r._startReconnectTimer()},12e4),this._send(n))}}},t.prototype.requestNeigbour=function(e){var t,r,n=e;if(e||(n=null===(r=null===(t=this.client)||void 0===t?void 0:t._getAnnounceOpts)||void 0===r?void 0:r.call(t)),Object.keys(this.peers).length<20&&this.client.useP2P&&("LIVE"===n.playType||this.mediaIdFromServer&&("MPT"!==this.playOptions.playMode||1===this.serverType))){var i=Object.assign({},{msgType:d[n.playType].peer,mediaId:this.streamId,neighborsWant:20,lastConnectId:this.lastServerConnectId});this._send(i)}},t.prototype.scrape=function(e){var t,r=this;if(!this.destroyed&&!this.reconnecting){if(!(null===(t=this.socket)||void 0===t?void 0:t.connected)){this.socket.once("connect",function(){r.scrape(e)});return}var n=Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(function(e){return e.toString("binary")}):e.infoHash&&e.infoHash.toString("binary");this._send({action:"scrape",info_hash:n})}},t.prototype.destroy=function(e){if(void 0===e&&(e=function(){}),this.destroyed)return e(null);for(var t in s.logUtils.warn("websocket destroy........"),this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer),this.unValidPeerIds){var r;clearTimeout(this.unValidPeerIds[t])}if(this.unValidPeerIds={},this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,h[this.announceUrl]&&(h[this.announceUrl].consumers-=1),h[this.announceUrl].consumers>0)return e();var n=h[this.announceUrl];if(delete h[this.announceUrl],n.on("error",p),n.once("close",e),!this.expectingResponse)return i();function i(){r&&(clearTimeout(r),r=void 0),n.removeListener("data",i),n.destroy(),n=null}r=setTimeout(i,c.DESTROY_TIMEOUT),n.once("data",i)},t.prototype.startPlay=function(e){this.streamId=e.streamId||e.mediaId||e.fileId,this.playOptions=e,this.lastServerConnectId=-1,this._requestServerPeer()},t.prototype.stopPlay=function(){for(var e in this.streamId=null,this.playOptions={},this.lastServerConnectId=-1,this.peers){var t=this.peers[e];!0===t.connectedByClient&&(null!==t.trackerTimeout&&clearTimeout(t.trackerTimeout),t.destroy())}},t.prototype._openSocket=function(){var e=this;this.destroyed=!1,this.peers||(this.peers={}),this.wrtPeers||(this.wrtPeers={}),this.unValidPeerIds||(this.unValidPeerIds={}),this._onSocketConnectBound=function(){e._onSocketConnect()},this._onSocketErrorBound=function(t){e._onSocketError(t)},this._onSocketDataBound=function(t){e._onSocketData(t)},this._onSocketCloseBound=function(){e._onSocketClose()},this.socket=h[this.announceUrl],this.socket?(h[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound()):(this.socket=h[this.announceUrl]=new l.default(this.announceUrl),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)),this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound),setTimeout(function(){e.setInterval()},0)},t.prototype.connectTracker=function(e){e&&(h[this.announceUrl]&&delete h[this.announceUrl],this.announceUrl=e),this._openSocket()},t.prototype._getDefaultOpts=function(){return this.client._defaultAnnounceOpts()},t.prototype._onSocketConnect=function(){this.destroyed||(this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.announce(this._getDefaultOpts())),this.client.emit("connect"))},t.prototype._onSocketData=function(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse(e)}catch(e){this.client.emit("warning",Error("Invalid tracker response"));return}[d.LIVE.heartbeatRes,d.VOD.heartbeatRes,d.CRT.heartbeatRes].includes(e.msgType)?this._onHeartBeatResponse(e):[d.LIVE.serverRes,d.VOD.serverRes,d.CRT.serverRes].includes(e.msgType)?(this.client.emit("server-recieve"),this._onServerReqResponse(e)):[d.LIVE.peerRes,d.VOD.peerRes,d.CRT.peerRes].includes(e.msgType)?this._onNeighReqResponse(e):[d.LIVE.sdp,d.VOD.sdp,d.CRT.sdp].includes(e.msgType)?this._onSdpExchange(e):[d.VOD.reportRes,d.CRT.reportRes].includes(e.msgType)&&this._onReportResponse(e)}},t.prototype._onReportResponse=function(e){this.client.emit("report-response",e)},t.prototype._onServerReqResponse=function(e){this.metrics.recordStartupParams("first_tr",+new Date);var t=this._getDefaultOpts().playType,r=e.resId||"";if(this.serverType=e.serverType,"LIVE"!==t&&(this.streamId=e.mediaId,this.mediaIdFromServer=e.mediaId,this.requestNeigbour(),this.client.emit("indexName",e.fileIndex),this.client.emit("recieveMediaId",e.mediaId)),this.lastServerConnectId=e.connectId,this.client.emit("server-response",e),2===e.serverType){s.logUtils.log("[Tracker] get cdn server: ",e.serverAddress);var n=e.serverAddress.includes("resId=")||!r?e.serverAddress:e.serverAddress+"?resId="+r+"&authId="+e.authId;this.client.emit("cdn",n,r,e.authId,e)}else s.logUtils.log("[Tracker] get wrt server: ",this.lastServerConnectId,e.serverId),this._generateOfferWrt(this.lastServerConnectId,"offer")},t.prototype._onNeighReqResponse=function(e){if(this.metrics.record("peer_num",e.neighbors.length),e.neighbors&&e.neighbors.length>0)for(var t=0;t<e.neighbors.length;t++)Object.keys(this.peers).length<20&&!this.peers[e.neighbors[t]]&&this._generateOffer(e.neighbors[t],"offer")},t.prototype._onHeartBeatResponse=function(e){1===e.allocServerFlag&&(this.lastServerConnectId=-1),this.heartbeatTimeId&&(clearTimeout(this.heartbeatTimeId),this.heartbeatTimeId=void 0)},t.prototype._onSdpExchange=function(e){var t,r=this,n=this._getDefaultOpts().playType;if("offer"===e.sdpType){if(!this.client.useP2P)return;var i=null;try{i=JSON.parse(e.extra)}catch(e){this.client.emit("warning",Error("Invalid tracker sdp no extra"));return}if(Object.keys(this.peers).length>20)return;s.logUtils.log("[Tracker] creating peer (from remote offer)"),(t=this._createPeer()).id=e.connectId,t.peerType="web",t.streamId=i.streamId,t.once("signal",function(t){var i={msgType:d[n].sdp,connectId:e.connectId,description:t.sdp,sdpType:"answer",extra:JSON.stringify({streamId:null!==r.streamId?r.streamId:""})};r._send(i)}),t.signal({type:e.sdpType,sdp:e.description}),this.client.emit("peer",t),this.peers[t.id]=t,t.once("close",function(){s.logUtils.warn("peer close"),delete r.peers[t.id],r._addUnValidPeer(t.id)})}else if("answer"===e.sdpType){var o=null;try{o=JSON.parse(e.extra)}catch(e){this.client.emit("warning",Error("Invalid tracker response no extra"));return}var a=e.connectId===this.lastServerConnectId;(t=a?this.wrtPeers[o.offerId]:this.peers[e.connectId])?(t.id=a?o.offerId:e.connectId,a?(t.peerType="wrt",t.once("close",function(){s.logUtils.warn("[Tracker]  wrt data-channel closed, peer id:",t.id),delete r.wrtPeers[o.offerId],Object.keys(r.wrtPeers).length<4&&null!==r.streamId&&r._requestServerPeer()})):(t.peerType="web",t.streamId=o.streamId,t.once("close",function(){s.logUtils.warn("[Tracler] p2p media peer closed, peer id:",t.id),delete r.peers[t.id],r._addUnValidPeer(t.id)})),t.signal({type:e.sdpType,sdp:e.description}),this.client.emit("peer",t),clearTimeout(t.trackerTimeout),t.trackerTimeout=null):s.logUtils.error("[Tracker] got unexpected answer: "+JSON.stringify(e.answer))}},t.prototype._onScrapeResponse=function(e){var t=this,r=Object.keys(e=e.files||{});if(0===r.length){this.client.emit("warning",Error("invalid scrape response"));return}r.forEach(function(r){var n=Object.assign(e[r],{announce:t.announceUrl,infoHash:u.binaryToHex(r)});t.client.emit("scrape",n)})},t.prototype._onSocketClose=function(){this.destroyed||(s.logUtils.warn("scoket close...."),this.destroy(),this._startReconnectTimer())},t.prototype._onSocketError=function(e){this.destroyed||(s.logUtils.warn("scoket destroy...."),this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())},t.prototype._startReconnectTimer=function(){var e=this,t=Math.floor(3e5*Math.random())+Math.min(1e4*Math.pow(2,this.retries),36e5);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(function(){e.retries++,e.lastServerConnectId=-1,e.destroyPeers(),e.client.emit("reconnect")},t),this.reconnectTimer.unref&&this.reconnectTimer.unref(),s.logUtils.warn("reconnecting socket in ms",t)},t.prototype.destroyPeers=function(){for(var e in this.peers){var t=this.peers[e];null!==t.trackerTimeout&&clearTimeout(t.trackerTimeout),t.destroy()}for(var e in this.wrtPeers){var t=this.wrtPeers[e];null!==t.trackerTimeout&&clearTimeout(t.trackerTimeout),t.destroy()}this.peers={},this.wrtPeers={}},t.prototype._send=function(e){if(!this.destroyed){this.expectingResponse=!0;var t=JSON.stringify(e);this.socket.send(t)}},t.prototype._generateOfferWrt=function(e,t){for(var r=this,n=this,i=this._getDefaultOpts().playType,o=this,a=0;a<6;a++)!function(a){var l=o.client.peerId+u.genRandomId(4),c=n.wrtPeers[l]=n._createPeer({initiator:!0,channelSize:4,channelConfig:{ordered:!1,maxRetransmits:10}});c.connectedByClient=!0,c.once("signal",function(n){var o=Object.assign({},{msgType:d[i].sdp,connectId:e,sdpType:t,description:n.sdp,extra:JSON.stringify({offerId:l})});r._send(o)}),c.trackerTimeout=setTimeout(function(){s.logUtils.warn("wrt/wm peer SDP exchange timeout: destroying peer",e,c.id),c.trackerTimeout=null,delete n.wrtPeers[l],r.emit("peer-timeout",c),c.destroy(),Object.keys(r.wrtPeers).length<4&&null!==r.streamId&&r._requestServerPeer()},12e4),c.trackerTimeout.unref&&c.trackerTimeout.unref()}(0)},t.prototype._generateOffer=function(e,t){var r=this,n=this,i=this._getDefaultOpts().playType,o=n.peers[e]=n._createPeer({channelSize:4,initiator:!0});o.connectedByClient=!0,o.once("signal",function(n){var o=Object.assign({},{msgType:d[i].sdp,connectId:e,description:n.sdp,sdpType:t,extra:JSON.stringify({streamId:r.streamId})});r._send(o)}),o.trackerTimeout=setTimeout(function(){s.logUtils.warn("[Tracker] p2p peer SDP exchange timeout: destroying peer",e),o.trackerTimeout=null,delete n.peers[e],o.destroy(),r._addUnValidPeer(e)},12e4),o.trackerTimeout.unref&&o.trackerTimeout.unref()},t.prototype._createPeer=function(e){var t=this;e=Object.assign({trickle:!1,config:t.client._rtcConfig,wrtc:t.client._wrtc},e||{});var r=new a.default(e);return r.once("error",n),r.once("connect",function e(){r.removeListener("error",n),r.removeListener("connect",e)}),r;function n(e){s.logUtils.warn("[Tracker] peer error, peer id:",r.id),t.client.emit("warning",e.message+", peer id: "+r.id),r.destroy()}},t.prototype._addUnValidPeer=function(e){var t=this;if(!this.unValidPeerIds[e]){s.logUtils.log("[Tracker] add unvalid peer: ",e);var r=setTimeout(function(){s.logUtils.log("[Tracker] cancel unvalid peer: ",e),delete t.unValidPeerIds[e]},6e5);this.unValidPeerIds[e]=r}},t.prototype._requestServerPeer=function(){if(this.socket&&this.socket.connected){var e=this._getDefaultOpts().playType,t=Object.assign({msgType:d[e].server,lastConnectId:this.lastServerConnectId},this.playOptions);"LIVE"===e?t.mediaId=this.playOptions.streamId:"VOD"===e&&(t.FORMAT=this.playOptions.FORMAT||1),s.logUtils.log("[Tracker] request for server"),this._send(t)}},t}(f.default);t.default=g},3771:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.querystringStringify=t.querystringParse=t.toUInt32=t.DESTROY_TIMEOUT=t.REQUEST_TIMEOUT=t.EVENT_NAMES=t.EVENT_IDS=t.EVENTS=t.ACTIONS=t.CONNECTION_ID=t.REMOVE_IPV4_MAPPED_IPV6_RE=t.IPV6_RE=t.IPV4_RE=void 0;var a=o(r(9787)),l=s(r(5343));function u(e){var t=l.default.allocate(4);return t.writeUint32(e,0),t}t.IPV4_RE=/^[\d.]+$/,t.IPV6_RE=/^[\da-fA-F:]+$/,t.REMOVE_IPV4_MAPPED_IPV6_RE=/^::ffff:/,t.CONNECTION_ID=l.default.concat([u(1047),u(655366528)]),t.ACTIONS={CONNECT:0,ANNOUNCE:1,SCRAPE:2,ERROR:3},t.EVENTS={update:0,completed:1,started:2,stopped:3},t.EVENT_IDS={0:"update",1:"completed",2:"started",3:"stopped"},t.EVENT_NAMES={update:"update",completed:"complete",started:"start",stopped:"stop"},t.REQUEST_TIMEOUT=15e3,t.DESTROY_TIMEOUT=1e3,t.toUInt32=u,t.querystringParse=function(e){return a.parse(e,null,null,{decodeURIComponent:unescape})},t.querystringStringify=function(e){return a.stringify(e,null,null,{encodeURIComponent:escape}).replace(/[@*/+]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},8969:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.genRandomId=t.isEmpty=t.hexToBinary=t.binaryToHex=t.MAX_ANNOUNCE_PEERS=t.DEFAULT_ANNOUNCE_PEERS=void 0;var s=o(r(5343));t.DEFAULT_ANNOUNCE_PEERS=50,t.MAX_ANNOUNCE_PEERS=82,t.binaryToHex=function(e){return"string"!=typeof e&&(e=String(e)),s.default.wrap(e,"binary").toHex()},t.hexToBinary=function(e){return"string"!=typeof e&&(e=String(e)),s.default.fromHex(e).toBinary()},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.genRandomId=function(e){var t="0123456789",r=function(e,r){var n=0===r?t.slice(1):t;return n.charAt(Math.floor(Math.random()*n.length))};return Array.from({length:e},function(t,n){return r(e,n)}).join("")},i(r(3771),t)},2793:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=this;Object.defineProperty(t,"__esModule",{value:!0}),t.logUtils=t.decrypt=t.encrypt=t.genRandomId=t.isEmpty=t.cleanObject=t.xhrRequest=t.debounce=t.jsonClone=t.downloadBufferToFile=t.concatenate=t.stringify=t.base64Encode=void 0;var l=s(r(5726)),u=s(r(5200)),c="Y*fkhF8s!ypQg0jaikuraY*I",f=u.default.enc.Hex.parse("00000000000000000000000000000000"),h={beforeLogTask:[]};t.logUtils=h,t.base64Encode=function(e){return u.default.enc.Base64.stringify(u.default.enc.Utf8.parse(e))},["log","info","warn","error"].forEach(function(e){h[e]=function(){for(var t,r,s,u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var f=window.console[e],d=l.default().format("YYYY-MM-DD HH:mm:ss.SSS");if((null===(s=null==h?void 0:h.beforeLogTask)||void 0===s?void 0:s.length)>0)try{for(var p=n(h.beforeLogTask),g=p.next();!g.done;g=p.next()){var y=g.value;null==y||y(d,e,u)}}catch(e){t={error:e}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}if("log"!==e)return f.apply(a,o([d],i(u)))}}),t.stringify=function(e){var t=[],r=JSON.stringify(e,function(e,r){var n;if("object"==typeof r&&null!==r){if((null===(n=null==t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,r))!==-1)return;t.push(r)}return r});return t=null,r},t.concatenate=function(){for(var e,t,r,i,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=0;try{for(var l=n(o),u=l.next();!u.done;u=l.next()){var c=u.value;a+=c.byteLength}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}var f=new Uint8Array(a),h=0;try{for(var d=n(o),p=d.next();!p.done;p=d.next()){var c=p.value,g=new Uint8Array(c);f.set(g,h),h+=c.byteLength}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return f.buffer},t.downloadBufferToFile=function(e,t){var r=new Blob([t],{type:"application/octet-stream"}),n=window.URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),document.body.removeChild(i)},t.jsonClone=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return h.error("jsonClone Error：",t),e}},t.debounce=function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=window);var i,o=function(){var o=this,s=arguments,a=function(){i=void 0,a=null,r||e.apply(o,s)};!i&&r&&e.apply(o,s),n.clearTimeout(i),i=n.setTimeout(a,t)};return o.cancel=function(){n.clearTimeout(i),i=void 0},o},t.xhrRequest=function(e){if("[object Object]"===String(e)){e.method=e.method?e.method.toUpperCase():"GET",e.data=e.data||{};var t=[];for(var r in e.data)t.push("".concat(r,"=",e.data[r]));e.data=t.join("&"),"GET"===e.method&&e.data&&(e.url+=0===location.search.length?"".concat("?",e.data):"".concat("&",e.data));var n=new XMLHttpRequest;n.responseType=e.responseType||"json",n.onreadystatechange=function(){4===n.readyState&&(200===n.status?e.success&&"function"==typeof e.success&&e.success(n.response):e.error&&"function"==typeof e.error&&e.error())},n.open(e.method,e.url,!0),"POST"===e.method&&n.setRequestHeader("Content-Type",e.contentType||"application/x-www-form-urlencoded"),e.xhrSetup&&e.xhrSetup(n),n.send("POST"===e.method?e.data:null)}},t.cleanObject=function(e){return Object.keys(e).reduce(function(t,r){var n=e[r];return null!=n&&(t[r]=n),t},{})},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.genRandomId=function(e){void 0===e&&(e=10);var t="0123456789";return o([],i(Array(e))).map(function(e,r){return t.charAt(Math.floor(Math.random()*t.length))}).join("")},t.encrypt=function(e){return u.default.AES.encrypt(e,u.default.enc.Utf8.parse(c),{iv:f,mode:u.default.mode.CBC,padding:u.default.pad.Pkcs7}).toString()},t.decrypt=function(e){return u.default.AES.decrypt(e,u.default.enc.Utf8.parse(c),{iv:f,mode:u.default.mode.CBC,padding:u.default.pad.Pkcs7}).toString(u.default.enc.Utf8)}},1311:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.WrtMediaManager=void 0;var c=r(4217),f=r(764),h=r(9205),d=r(2793),p=h.createBitField(h.ExceptionType.Player,h.ExceptionSubType.Unspecified),g=function(e,t){this.peerId=e,this.segment=t},y=function(e){function t(t,r){var n=e.call(this)||this;return n.settings=t,n.metrics=r,n.peers=new Map,n.peerCandidates=new Map,n.peerSegmentRequests=new Map,n.streamSwarmId=null,n.downloadWrtIdx=1,n.indexName=null,n.wrtOptions={},n.segmentBytesBufferMap=new Map,n.getPeers=function(){return n.peers},n.setStreamSwarmId=function(e){n.streamSwarmId!==e&&(n.destroy(!0),n.streamSwarmId=e)},n.setOptions=function(e){n.wrtOptions=e},n.addTrackerPeer=function(e){if(!n.peers.has(e.id)){if(n.peers.size>0)for(;n.peers.size>6;){var t=l(n.peers.entries().next().value,2)[1];n.peers.delete(t.id)}if(null!==n.streamSwarmId){var r=new f.WrtPeer(e,n.streamSwarmId,n.wrtOptions,n.settings,n.metrics);null!==n.indexName&&r.setIndxName(n.indexName),r.on("connect",n.onPeerConnect),r.on("close",n.onPeerClose),r.on("status",n.onPeerStatus),r.on("segment-loaded",n.onSegmentLoaded),r.on("segment-error",n.onSegmentError),r.on("bytes-downloaded",n.onPieceBytesDownloaded),r.on("segment-list",n.onSegmentList),r.on("segment-bytesize",n.onSegmentSize),r.on("header-info",n.onHeaderInfo),r.on("re-init",n.onReInit),r.on("track-info",n.onTrackInfo);var i=n.peerCandidates.get(r.id);i||(i=[],n.peerCandidates.set(r.id,i)),i.push(r)}}},n.download=function(e,t){if(n.isDownloading(e))return!1;var r,i,o=[];try{for(var s=u(n.peers.values()),a=s.next();!a.done;a=s.next()){var l=a.value;l.isAvailable&&o.push(l)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}if(0===o.length)return!1;n.downloadWrtIdx>=o.length&&("LIVE"!==n.settings.params.playType?n.downloadWrtIdx=0:n.downloadWrtIdx=o.length>1?1:0);var c=o[n.downloadWrtIdx++];return n.peerSegmentRequests.has(e.id)||c.requestSegment(e,n.segmentBytesBufferMap.get(e.id)),n.peerSegmentRequests.set(e.id,new g(c.id,e)),!0},n.abort=function(e){},n.isDownloading=function(e){return n.peerSegmentRequests.has(e.id)},n.getActiveDownloadsCount=function(){return n.peerSegmentRequests.size},n.getActiveDownloads=function(){return n.peerSegmentRequests},n.setIndxName=function(e){var t,r,i,o;n.indexName=e,n.peers.forEach(function(t){return t.setIndxName(e)});try{for(var s=u(n.peerCandidates.values()),a=s.next();!a.done;a=s.next()){var l=a.value;try{for(var c=(i=void 0,u(l)),f=c.next();!f.done;f=c.next())f.value.setIndxName(e)}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}},n.destroy=function(e){var t,r,i,o;void 0===e&&(e=!1),n.streamSwarmId=null,n.peers.forEach(function(e){return e.destroy()}),n.peers.clear(),n.peerSegmentRequests.clear();try{for(var s=u(n.peerCandidates.values()),a=s.next();!a.done;a=s.next()){var l=a.value;try{for(var c=(i=void 0,u(l)),f=c.next();!f.done;f=c.next())f.value.destroy()}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}n.peerCandidates.clear()},n.onPieceBytesDownloaded=function(e,t,r){var i=n.segmentBytesBufferMap.get(r)||[];i.push(t),n.segmentBytesBufferMap.set(r,i),n.emit("bytes-downloaded",t.byteLength,e.id)},n.onSegmentList=function(e,t){var r,i;try{for(var o=u(n.peers.values()),s=o.next();!s.done;s=o.next()){s.value.id===t&&n.emit("segment-list",e);break}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},n.onSegmentSize=function(e){n.emit("segment-bytesize",e)},n.onHeaderInfo=function(e){n.emit("header-info",e)},n.onReInit=function(e){n.emit("re-init",e)},n.onTrackInfo=function(e){n.emit("track-info",e)},n.onPeerConnect=function(e){if(!n.peers.get(e.id)){n.metrics.recordStartupParams("prt_rtt",Date.now()),n.peers.set(e.id,e);var t,r,i=n.peerCandidates.get(e.id);if(i){try{for(var o=u(i),s=o.next();!s.done;s=o.next()){var a=s.value;a!==e&&a.destroy()}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}n.peerCandidates.delete(e.id)}}},n.onPeerStatus=function(e){var t,r,i,o;try{for(var s=u(n.peers.values()),a=s.next();!a.done;a=s.next()){var c=a.value;c.id===e.id&&(c.isAvailable=e.isAvailable)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}if(!e.isAvailable)try{for(var f=u(n.peerSegmentRequests),h=f.next();!h.done;h=f.next()){var d=l(h.value,2),p=d[0];d[1].peerId===e.id&&n.peerSegmentRequests.delete(p)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}},n.onPeerClose=function(e){n.cleanUpClosePeer(e)},n.cleanUpClosePeer=function(e){var t,r;if(n.peers.get(e.id)!==e){var i=n.peerCandidates.get(e.id);if(!i)return;var o=i.indexOf(e);-1!==o&&i.splice(o,1),0===i.length&&n.peerCandidates.delete(e.id);return}try{for(var s=u(n.peerSegmentRequests),a=s.next();!a.done;a=s.next()){var c=l(a.value,2),f=c[0];c[1].peerId===e.id&&n.peerSegmentRequests.delete(f)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}n.peers.delete(e.id)},n.onSegmentLoaded=function(e,t,r){return s(n,void 0,void 0,function(){var n,i,s,l,u,c,f,h,p;return a(this,function(a){switch(a.label){case 0:if(!(n=this.peerSegmentRequests.get(t)))return d.logUtils.warn("not find segment in request queue..",t),[2];if(i=(this.metrics.getVariables("recv_ts_ok_svr_p")||0)+1,null===(c=this.metrics)||void 0===c||c.record("recv_ts_ok_svr_p",i),(s=n.segment).initSegment||(l=Date.now(),null===(f=this.metrics)||void 0===f||f.recordStartupParams("ts_use",l),null===(h=this.metrics)||void 0===h||h.recordStartupParams("first_gop",l),null===(p=this.metrics)||void 0===p||p.recordStartupParams("first_ts",l)),!this.settings.segmentValidator)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.settings.segmentValidator(o(o({},s),{data:r}),"wrt",e.id)];case 2:return a.sent(),[3,4];case 3:return u=a.sent(),this.emit("segment-error",s,u,e.id),[2];case 4:return this.emit("segment-loaded",s,r,e.id),this.segmentBytesBufferMap.delete(t),[2]}})})},n.onSegmentError=function(e,t,r){n.metrics.report(h.EVENT_TYPES.exception,{exp_type:p,exp_subtype:7,exp_desc:"Download Segement Error - segment id: "+t+", description: "+r});var i=n.peerSegmentRequests.get(t);i&&(n.peerSegmentRequests.delete(t),n.emit("segment-error",i.segment,r,e.id))},n}return i(t,e),t.prototype.segmentDealOk=function(e){this.peerSegmentRequests.delete(e)},t}(c.STEEmitter);t.WrtMediaManager=y},764:function(e,t,r){"use strict";var n,i,o,s,a,l,u,c=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WrtPeer=void 0;var d=r(5872),p=h(r(5200)),g=r(4217),y=h(r(5343)),m=r(8241),v=r(3502),b=r(3847),w=r(9205),_=h(r(9787)),S=r(2793),E=w.createBitField(w.ExceptionType.Player,w.ExceptionSubType.Unspecified);(n=a||(a={}))[n.BeginTagValue=2114351101]="BeginTagValue",n[n.HeadTagValue=2097573645]="HeadTagValue",n[n.BLOCKTagValue=2097573661]="BLOCKTagValue",n[n.IndexTagValue=2097569821]="IndexTagValue",n[n.AttrTagVaLue=2097569853]="AttrTagVaLue",n[n.StreamTagValue=2097569837]="StreamTagValue",(i=l||(l={}))[i.QuickConnect=5001]="QuickConnect",i[i.QuickConnectRsp=5002]="QuickConnectRsp",i[i.IndexNotify=5003]="IndexNotify",i[i.BlockReq=5004]="BlockReq",i[i.BlockRsp=5005]="BlockRsp",i[i.QuitConnect=5006]="QuitConnect",i[i.HeartbeatReq=5007]="HeartbeatReq",i[i.HeartbeatRsp=5008]="HeartbeatRsp",(o=u||(u={}))[o.UnSupportFormat=1400]="UnSupportFormat";var T=function(e,t){this.id=e,this.uri=t,this.size=0,this.bytesDownloaded=0,this.pieces=[]},I=function(e){function t(t,r,n,i,o){var s=e.call(this)||this;s.peer=t,s.streamid=r,s.wrtOptions=n,s.settings=i,s.metrics=o,s.remoteAddress="",s.isMPT=!1,s.isAvailable=!0,s.playRequestTimer=null,s.heartbeatTimer=null,s.downloadingSegmentMap=new Map,s.downLaodTimerMap=new Map,s.trackInfo=null,s.indexName=null,s.stopHeartbeat=function(){s.heartbeatInterval&&clearInterval(s.heartbeatInterval)},s.startHeartbeat=function(){s.stopHeartbeat(),s.heartbeatInterval=setInterval(function(){var e=S.jsonClone(s.wrtOptions),t=new y.default(200);t.writeInt32(a.BeginTagValue);var r=t.offset;t.skip(4),t.writeInt32(a.HeadTagValue),t.writeInt32(20+s.streamid.length),t.writeInt32(2097573885),t.writeInt32(e.APPVER),t.writeInt32(l.HeartbeatReq),t.writeIString(s.streamid),t.writeInt32(0),t.writeInt32(t.offset-4,r),t.flip();var n=t.toBuffer(),i=d.Buffer.from(n,0,n.byteLength);s.peer.writable&&(s.peer.write(i),s.runHearbreakTimeoutTimer())},3e3)},s.calculateRequiredSize=function(){e=32+s.streamid.length+4+4;var e,t=S.jsonClone(s.wrtOptions),r=null;if(s.isMPT){var n=encodeURIComponent(t.fileId);delete t.fileId,t.mediaId=s.streamid,r=decodeURIComponent(r=_.default.stringify(t))+"&fileId="+n+"&Proxy-AuthId="+s.settings.params["Proxy-AuthId"]}else r=decodeURIComponent(r=_.default.stringify(t));return r=p.default.enc.Utf8.parse(r),(e+=4+(r=p.default.enc.Base64.stringify(r)).length)+50},s.playRequest=function(){S.logUtils.log("[WM/WRT] connect server data-channel id:",s.id);var e=S.jsonClone(s.wrtOptions),t=s.calculateRequiredSize(),r=new y.default(t);try{r.writeInt32(a.BeginTagValue);var n=r.offset;r.skip(4),r.writeInt32(a.HeadTagValue),r.writeInt32(20+s.streamid.length),r.writeInt32(2097573885),r.writeInt32(e.APPVER),r.writeInt32(l.QuickConnect),r.writeIString(s.streamid),r.writeInt32(0),r.writeInt32(a.AttrTagVaLue);var i=null;if(s.isMPT){var o=encodeURIComponent(e.fileId);delete e.fileId,e.mediaId=s.streamid,i=_.default.stringify(e),i=decodeURIComponent(i)+"&fileId="+o+"&Proxy-AuthId="+s.settings.params["Proxy-AuthId"]}else i=_.default.stringify(e),i=decodeURIComponent(i);if(i=p.default.enc.Utf8.parse(i),i=p.default.enc.Base64.stringify(i),r.remaining()<i.length+4)throw Error("Buffer capacity exceeded");r.writeIString(i);var u=r.offset-4;if(u>r.capacity())throw Error("Final length exceeds buffer capacity");r.writeInt32(u,n),r.flip();var c=r.toBuffer(),f=d.Buffer.from(c,0,c.byteLength);s.peer.write(f),s.runPlayRequestTimeoutTimer()}catch(e){S.logUtils.error("Buffer operation failed:",e)}},s.onPeerConnect=function(){S.logUtils.log("[WM/WRT] data-channel connected",s.id),s.remoteAddress=s.peer.remoteAddress,s.playRequest(),s.startHeartbeat(),s.emit("connect",s)},s.onPeerClose=function(){S.logUtils.log("[WM/WRT] data-channel closed",s.id),s.terminateSegmentRequest(),s.stopHeartbeat(),s.emit("close",s)},s.onPeerError=function(e){S.logUtils.log("[WM/WRT] data-channel error",s.id,e),s.stopHeartbeat(),s.metrics.report(w.EVENT_TYPES.exception,{exp_type:E,exp_subtype:4097,exp_desc:"[WM/WRT] data-channel error: Peer id: "+s.id+", "+e})},s.onPeerData=function(e){s.isAvailable=!0,s.emit("status",s),null!==s.playRequestTimer&&s.cancelPlayRequestTimeoutTimer(),null!==s.heartbeatTimer&&s.cancelHeartbeatTimeoutTimer();var t,r,n,i,o=y.default.wrap(e);if(!o){S.logUtils.error("[WM/WRT] data-channel data to bytebuffer error",s.id),s.terminateSegmentRequest();return}var u=o.readInt32();if(u!==a.BeginTagValue){S.logUtils.error("[WM/WRT] data-channel error data, begin tag value error",s.id,u),s.terminateSegmentRequest();return}o.readInt32(),o.remaining();var c=o.readInt32();if(c!==a.HeadTagValue){S.logUtils.error("[WM/WRT] data-channel error data, head tag value error",s.id,c),s.terminateSegmentRequest();return}var f=o.readInt32();if(f>o.remaining()||f<20){S.logUtils.error("[WM/WRT] data-channel error data, head len value error",s.id,f),s.terminateSegmentRequest();return}if(2097573885!==o.readInt32()){S.logUtils.error("[WM/WRT] data-channel error data, head protocol error",s.id),s.stopHeartbeat(),s.terminateSegmentRequest();return}o.skip(4);var h=o.readInt32(),d=o.readIString();if(d!==s.streamid){S.logUtils.error("[WM/WRT] data-channel error data, streamid error",s.id,d,s.streamid);return}if(0!==o.readInt32()){S.logUtils.error("[WM/WRT] data-channel answer error, mybe login error",s.id,s.streamid),s.terminateSegmentRequest();return}switch(h){case l.QuickConnectRsp:"LIVE"!==s.settings.params.playType&&(null===s.indexName?S.logUtils.error("vod not have indexName"):s.requestIndex(s.indexName));break;case l.HeartbeatRsp:s.isAvailable=!0,s.emit("status",s);break;case l.IndexNotify:if(s.metrics.recordStartupParams("first_index",Date.now()),s.metrics.record("index_total_times",Number(s.metrics.getVariables("index_total_times")||0)+1),o.readInt32()!==a.IndexTagValue){S.logUtils.error("[WM/WRT] data-channel error index notify data, tag value error",s.id);break}var p=o.readInt32();if(p>o.remaining()){S.logUtils.error("[WM/WRT] data-channel error index notify data, len error",s.id,p,o.remaining());break}p<o.remaining()&&S.logUtils.warn("[WM/WRT] data-channel index notify data, remain len too long",s.id,p,o.remaining());var g=e.slice(o.offset,o.offset+p),v=s.settings.params.playType,b="";if((null===(r=null===(t=s.indexName)||void 0===t?void 0:t.includes)||void 0===r?void 0:r.call(t,".gz."))||"LIVE"===v&&(null===(i=null===(n=s.indexName)||void 0===n?void 0:n.endsWith)||void 0===i?void 0:i.call(n,".rpd")))b=m.inflate(g,{to:"string"});else{var w=new TextDecoder("utf-8"),_=new Uint8Array(g);b=w.decode(_)}b&&s.onPlayListIndex(b);break;case l.BlockRsp:if(o.readInt32()!==a.BLOCKTagValue){S.logUtils.error("[WM/WRT] data-channel error block head, tag value error",s.id);break}o.readInt32(),o.remaining();var E=o.readIString();if(null===E){S.logUtils.error("[WM/WRT] data-channel error block head, blockname value error",s.id);break}var T=s.downloadingSegmentMap.get(E);if(void 0===T)break;var I=o.readInt32();T.size<=0&&(T.size=I);var k=o.readInt32(),R=o.readInt32();if(0!==o.readInt32()){S.logUtils.error("[WM/WRT] data-channel error block data, error code",s.id),s.onDownLoadSegmentError(T.uri);break}if(o.readInt32()!==a.StreamTagValue){S.logUtils.error("[WM/WRT] data-channel error block stream, tag value error",s.id);break}var x=o.readInt32();if(R>o.remaining()){S.logUtils.error("[WM/WRT] data-channel error block data, block len error",s.id,E,R,x,o.remaining()),s.onDownLoadSegmentError(T.uri);break}o.remaining();var P=e.slice(o.offset,o.offset+R);s.metrics.record("recv_ps_all_p",Number(s.metrics.getVariables("recv_ps_all_p")||0)+1),s.receiveSegmentPiece(P,T,I,k/5e3)}},s.isTrackInfoCodecDifferent=function(e){var t,r,n=!1;if((null===(t=s.trackInfo)||void 0===t?void 0:t.length)&&e.length){if((null===(r=s.trackInfo)||void 0===r?void 0:r.length)!==e.length)return!0;for(var i=0;i<e.length;i++)if(s.trackInfo[i].audioCodec!==e[i].audioCodec||s.trackInfo[i].videoCodec!==e[i].videoCodec){n=!0;break}}return n},s.onPlayListIndex=function(e){if(s.metrics.recordStartupParams("stream_info",Date.now()),s.isMPT){var t=b.parsePlaylist(s.streamid,e),r=t.segments,n=t.byteSize;s.emit("segment-list",r,s.id),s.emit("segment-bytesize",n)}else{var i=v.parsePlayListIndex(s.streamid,e);if(void 0===i){S.logUtils.error("[WM/WRT] data-channel parse rpdlist error ",e);return}s.isTrackInfoCodecDifferent(i.trackInfo)&&s.emit("re-init",!0),s.trackInfo=i.trackInfo,s.emit("header-info",i.headerInfo),s.emit("track-info",i.trackInfo),s.emit("segment-list",JSON.parse(JSON.stringify(i.segments)),s.id)}},s.receiveSegmentPiece=function(e,t,r,n){var i,o,a=t.id,l=t.uri;if(t.bytesDownloaded+=e.byteLength,t.pieces[n]=e,s.emit("bytes-downloaded",s,e,a),t.bytesDownloaded===t.size){var u=new Uint8Array(t.size),c=0;try{for(var h=f(t.pieces),d=h.next();!d.done;d=h.next()){var p=d.value;u.set(new Uint8Array(p),c),c+=p.byteLength}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}if(S.logUtils.log("[WM/WRT] data-channel peer segment download done, wrt peerId: "+s.id+", segment id: "+l),s.cancelResponseTimeoutTimer(l),s.downloadingSegmentMap.delete(l),t.uri===s.indexName){s.metrics.recordStartupParams("first_index",+new Date),s.metrics.record("index_total_times",Number(s.metrics.getVariables("index_total_times")||0)+1);var g="",y=s.settings.params.playType;if(s.indexName.includes(".gz.")||"LIVE"===y&&s.indexName.endsWith(".rpd"))g=m.inflate(u.buffer,{to:"string"});else{var v=new TextDecoder("utf-8"),b=new Uint8Array(u.buffer);g=v.decode(b)}s.onPlayListIndex(g)}else s.emit("segment-loaded",s,a,u.buffer)}else t.bytesDownloaded>t.size&&(S.logUtils.error("[WM/WRT] data-channel peer segment download bytes mismatch",s.id,a,r),s.onDownLoadSegmentError(l))},s.destroy=function(){S.logUtils.log("[WM/WRT] data-channel destroy",s.id),s.terminateSegmentRequest(),s.downloadingSegmentMap.clear(),s.stopHeartbeat(),s.peer.destroy()},s.setIndxName=function(e){s.indexName=e},s.requestSegment=function(e,t){if(s.downloadingSegmentMap.has(e.url)){S.logUtils.log("[WM/WRT] data-channel segment alreday dwonload",s.id,e.url);return}if(void 0===e.range)throw Error("[WM/WRT] data-channel error segment not have range:"+e.url);var r,n,i=v.stringTosegmentRange(e.range);if(void 0===i)throw Error("[WM/WRT] data-channel error segment range error:"+e.url+e.range);var o=i.rangeEnd-i.rangeBegin;s.isMPT&&(o+=1),s.downloadingSegmentMap.has(e.url)&&s.downloadingSegmentMap.delete(e.url);var a=new T(e.id,e.url);if(a.size=o,void 0!==t)try{for(var l=f(t),u=l.next();!u.done;u=l.next()){var c=u.value;a.pieces.push(c),a.bytesDownloaded+=c.byteLength}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}a.bytesDownloaded>=o||(s.downloadingSegmentMap.set(e.url,a),s.sendRequest(a))},s.abort=function(e){S.logUtils.log("[WM/WRT] data-channel abort segment ",e.id,e.url)},s.requestIndex=function(e){if(!s.downloadingSegmentMap.has(e)){var t=new T(e,e);s.downloadingSegmentMap.set(e,t),s.sendRequest(t)}},s.sendRequest=function(e){S.logUtils.log("[WM/WRT] data-channel send segment request",s.id,e.uri,e.bytesDownloaded,e.size);var t=new y.default(200);t.writeInt32(a.BeginTagValue);var r=t.offset;t.skip(4),t.writeInt32(a.HeadTagValue),t.writeInt32(20+s.streamid.length),t.writeInt32(2097573885),t.writeInt32(s.settings.params.APPVER),t.writeInt32(l.BlockReq),t.writeIString(s.streamid),t.writeInt32(0),t.writeInt32(a.BLOCKTagValue),t.writeInt32(20+e.uri.length),t.writeIString(e.uri),t.writeInt32(e.size),t.writeInt32(e.bytesDownloaded),t.writeInt32(e.size-e.bytesDownloaded),t.writeInt32(0),t.writeInt32(t.offset-4,r),t.flip();var n=t.toBuffer(),i=d.Buffer.from(n,0,n.byteLength);s.peer.write(i),s.runResponseTimeoutTimer(e.uri)},s.onDownLoadSegmentError=function(e){s.emit("segment-error",s,e,"wrt downloadsegment error"),s.downloadingSegmentMap.delete(e),s.cancelResponseTimeoutTimer(e),e===s.indexName?(s.metrics.record("index_fail_times",Number(s.metrics.getVariables("index_fail_times")||0)+1),s.requestIndex(s.indexName)):s.metrics.record("recv_ts_fail",Number(s.metrics.getVariables("recv_ts_fail")||0)+1),s.metrics.report(w.EVENT_TYPES.exception,{exp_type:E,exp_subtype:4097,exp_desc:"Download Segement Error - segment uri: "+e})},s.runResponseTimeoutTimer=function(e){var t=setTimeout(function(){if(s.downLaodTimerMap.delete(e),clearTimeout(s.downLaodTimerMap.get(e)),S.logUtils.error("[WM/WRT] data-channel download segment timeout",s.id,e),s.metrics.record("recv_ps_fail_p",Number(s.metrics.getVariables("recv_ps_fail_p")||0)+1),"LIVE"===s.settings.params.playType)s.emit("segment-error",s,e,"wrt downloadsegment error"),s.downloadingSegmentMap.delete(e);else{var t=s.downloadingSegmentMap.get(e);t&&(s.metrics.record("recv_ps_try_p",Number(s.metrics.getVariables("recv_ps_try_p")||0)+1),s.sendRequest(t))}},s.settings.wrtFailedSegmentTimeout);s.downLaodTimerMap.set(e,t)},s.cancelResponseTimeoutTimer=function(e){var t=s.downLaodTimerMap.get(e);t&&(clearTimeout(t),s.downLaodTimerMap.delete(e))},s.terminateSegmentRequest=function(){s.cancelPlayRequestTimeoutTimer(),s.downLaodTimerMap.forEach(function(e){return clearTimeout(e)}),s.downLaodTimerMap.clear()},s.runHearbreakTimeoutTimer=function(){s.heartbeatTimer=setTimeout(function(){s.heartbeatTimer=null,S.logUtils.warn("[WM/WRT] data-channel heartbeat timeout",s.id),s.isAvailable=!1,s.destroy()},18e4)},s.runPlayRequestTimeoutTimer=function(){s.playRequestTimer=setTimeout(function(){s.playRequestTimer=null,S.logUtils.error("[WM/WRT] data-channel play request timeout",s.id),s.playRequest()},s.settings.wrtFailedSegmentTimeout)},s.cancelPlayRequestTimeoutTimer=function(){s.playRequestTimer&&(clearTimeout(s.playRequestTimer),s.playRequestTimer=null)},s.cancelHeartbeatTimeoutTimer=function(){s.heartbeatTimer&&(clearTimeout(s.heartbeatTimer),s.heartbeatTimer=null)},s.peer.on("connect",s.onPeerConnect),s.peer.on("close",s.onPeerClose),s.peer.on("error",s.onPeerError),s.peer.on("data",s.onPeerData),s.id=t.id;var u=s.settings.params,c=u.playType,h=u.playMode;return s.isMPT="VOD"===c&&"MPT"===h,s}return c(t,e),t}(g.STEEmitter);t.WrtPeer=I},8863:(e,t,r)=>{e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw Error(t);n("traceDeprecation"),r=!0}return e.apply(this,arguments)}};function n(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}},3624:()=>{},7942:()=>{},2880:()=>{},5881:()=>{}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r(6870)})();